import{x as d,r as a,N as f,I as g,e as h,c as o,a as y,F as v,g as k,o as r,M as w,i as c,t as N}from"#entry";import{_ as A}from"./DlAUqK2U.js";const S={class:"viewer-container"},B={class:"canvas relative w-full min-h-screen bg-gray-100"},E={key:0,class:"cms-text"},F=["src"],I=["src"],M={__name:"[id]",setup(R){const _=d(),p=a(_.mainDevServer),u=f().params.id,s=a([]),i=t=>t?.file_url?Array.isArray(t.file_url)&&t.file_url.length?t.file_url[0]?.url||null:typeof t.file_url=="string"?t.file_url:null:null,m=g(()=>s.value.filter(t=>(t.page_route_link_belong||"").split("/").pop().trim()===u));return h(async()=>{try{const t=await fetch(`${p.value}/api/cms/boxes/`);if(!t.ok){s.value=[];return}const l=await t.json(),e=Array.isArray(l?.boxes)?l.boxes:[];s.value=e.map(n=>({cms_id:n.cms_id||"",component_width:Number(n.component_width)||240,component_height:Number(n.component_height)||180,component_top:Number(n.component_top)||0,component_left:Number(n.component_left)||0,component_type:n.component_type||"text",component_content:n.component_content||"",component_properties:n.component_properties||{},file_url:Array.isArray(n.file_url)?n.file_url:n.file_url?[{url:n.file_url}]:[],page_route_link_belong:n.page_route_link_belong||""}))}catch(t){console.error("Error loading CMS data:",t),s.value=[]}}),(t,l)=>(r(),o("div",S,[y("div",B,[(r(!0),o(v,null,k(m.value,e=>(r(),o("div",{key:e.cms_id,class:"cms-box",style:w({width:e.component_width+"px",height:e.component_height+"px",top:e.component_top+"px",left:e.component_left+"px",position:"absolute"})},[e.component_type==="text"?(r(),o("div",E,N(e.component_content),1)):c("",!0),["image","image_link"].includes(e.component_type)&&i(e)?(r(),o("img",{key:1,src:i(e),class:"cms-image"},null,8,F)):c("",!0),e.component_type==="video"&&e.component_properties?.videoEmbed?(r(),o("iframe",{key:2,src:e.component_properties.videoEmbed,class:"w-full h-full border-0 rounded",allowfullscreen:""},null,8,I)):c("",!0)],4))),128))])]))}},j=A(M,[["__scopeId","data-v-5046e346"]]);export{j as default};
