import{x as u,r as i,N as d,I as f,e as h,c as n,a as g,F as y,g as v,o as r,M as k,i as l,t as w}from"#entry";const N={class:"viewer-container"},S={class:"canvas relative w-full h-screen"},x={key:0,class:"cms-text"},A=["src"],B=["src"],C={__name:"[id]",setup(E){const a=u(),_=i(a.mainDevServer),p=d().params.id,s=i([]),m=f(()=>s.value.filter(o=>o.page_route_link_belong===p));return h(async()=>{try{const o=await fetch(`${_}/api/cms/boxes/`);if(!o.ok){s.value=[];return}const c=await o.json(),e=Array.isArray(c?.boxes)?c.boxes:[];s.value=e.map(t=>({cms_id:t.cms_id||"",component_width:Number(t.component_width)||240,component_height:Number(t.component_height)||180,component_top:Number(t.component_top)||0,component_left:Number(t.component_left)||0,component_type:t.component_type||"text",component_content:t.component_content||"",component_properties:t.component_properties||{},file_url:Array.isArray(t.file_url)?t.file_url:t.file_url?[{url:t.file_url}]:[],page_route_link_belong:t.page_route_link_belong||""}))}catch(o){console.error("Failed to load CMS boxes:",o),s.value=[]}}),(o,c)=>(r(),n("div",N,[g("div",S,[(r(!0),n(y,null,v(m.value,e=>(r(),n("div",{key:e.cms_id,class:"cms-box",style:k({width:(e.component_width||240)+"px",height:(e.component_height||180)+"px",top:(e.component_top||0)+"px",left:(e.component_left||0)+"px",position:"absolute"})},[e.component_type==="text"?(r(),n("div",x,w(e.component_content),1)):l("",!0),["image","image_link"].includes(e.component_type)&&e.file_url.length&&e.file_url[0].url?(r(),n("img",{key:1,src:e.file_url[0].url,class:"cms-image"},null,8,A)):l("",!0),e.component_type==="video"&&e.component_properties?.videoEmbed?(r(),n("iframe",{key:2,src:e.component_properties.videoEmbed,class:"w-full h-full",frameborder:"0",allowfullscreen:""},null,8,B)):l("",!0)],4))),128))])]))}};export{C as default};
