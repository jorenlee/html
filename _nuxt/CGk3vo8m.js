import{o as d,c,a as e,d as g,m as H,u as Y,r as u,q as J,v as h,x as b,n as v,b as j,y as K,z as f,t as r,F as T,D as $,E as Q,B as X,C as Z}from"./omnWsaoz.js";import{_ as ee}from"./BWB436R2.js";import"./C5S46NFB.js";import{_ as te}from"./5JjjnmY2.js";import{_ as se}from"./DlAUqK2U.js";const ae={class:"mx-auto mt-10 mb-5 grid grid-cols-1"},oe={__name:"CampusPassMenuBar",props:["goToList","goToCreate"],setup(k){return(_,l)=>(d(),c("div",null,[l[3]||(l[3]=e("div",{class:"w-fit mx-auto mt-5 mb-3"},[e("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/logos/LSU_Seal.PNG",class:"lg:w-24 w-20 mx-auto"})],-1)),l[4]||(l[4]=e("div",{class:"text-center"},[e("h1",{class:"font-bold text-green-800 text-3xl"},"Welcome!")],-1)),e("div",ae,[e("button",{onClick:l[0]||(l[0]=(...i)=>k.goToList&&k.goToList(...i)),class:"text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white"},l[1]||(l[1]=[e("i",{class:"fa fa-list mr-3","aria-hidden":"true"},null,-1),g(" All Request Lists ")])),l[2]||(l[2]=e("a",{href:"/",class:"text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white"},[e("i",{class:"fa fa-globe mr-3","aria-hidden":"true"}),g(" LSU HOME PAGE ")],-1))])]))}},le={class:"flex"},ne={class:"pt-7 pb-24 w-3/12 px-5 bg-gray-100 lg:block hidden"},ie={class:"w-full min-h-screen"},re={class:"bg-green-800"},de={class:"lg:flex mx-auto justify-between py-2 px-3.5"},ce={class:"lg:flex items-center text-white gap-5"},ue={class:"flex -mt-1"},pe={class:"text-sm"},ve={class:"w-full lg:p-5 py-2"},me={class:""},he={class:"appointment-lists mx-auto text-xs"},fe={class:""},ge={key:0,class:"px-2 lg:grid grid-cols-4 gap-x-10"},_e={class:"py-3 w-full border-4 border-gray-100 shadow-lg"},xe={class:"px-2 flex items-center justify-center"},ye={class:"flex items-center px-2 mb-5"},we={class:"w-full"},be={class:""},ke={class:"px-2 flex items-center justify-center"},Ce={class:"px-2 flex items-center justify-center"},Te={class:"my-5"},$e=["href"],Se=["href"],De={class:"flex"},Ae=["onUpdate:modelValue","onChange"],je={class:"mx-auto lg:flex justify-center text-white items-center"},Le=["onClick"],Ue={class:"flex items-center justify-center"},Be={class:"flex w-fit mx-auto my-2 gap-5"},Pe={class:"w-fit mx-auto flex items-center gap-3"},Ie=["onUpdate:modelValue","onChange"],Me={class:"flex px-2 font-bold justify-center"},Re={class:"mx-auto lg:flex justify-center text-white items-center"},Ve=["onClick"],Ee={class:""},Ne={class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#ffffff59] w-full h-screen flex items-center"},Oe={class:"px-5 rounded-lg bg-white shadow-2xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},Ge={key:0,class:"italic text-gray-400 text-center p-1"},qe={__name:"index",setup(k){const _=H(),l=Y(),i=u(l.mainDevServer),p=u(0);let S=u(),D=u(),L=u(!0),m=u(!0),x=u(!1);const w=u(!1),a=u(null);J(()=>{setTimeout(async()=>{l.user.isAuthenticated&&(l.user.email==="jorenleeluna24@gmail.com"||l.user.email==="esmael.larubis@lsu.edu.ph")?(p.value=await $fetch(i.value+"/api/campus-pass/list").catch(o=>o.data)||0,_.push("/_/panels/campus-security"),console.log(p.value)):_.push("/_/unauthorized")},5e3)});const U=async(o,t)=>{a.value=await $fetch(i.value+"/api/campus-pass/"+o+"/").catch(y=>y.data),a.value.approval_status=t,console.log(a.value),R(o)},B=async(o,t)=>{a.value=await $fetch(i.value+"/api/campus-pass/"+o+"/").catch(y=>y.data),a.value.remarks=t,console.log(a.value)},P=o=>{w.value=!0,D.value=o},I=()=>{M(),w.value=!1},M=async()=>{await $fetch(i.value+"/api/campus-pass/"+D.value+"/edit/",{method:"PUT",body:a.value}).then(o=>{console.log("response",o),console.log(a.value)})},R=async o=>{await $fetch(i.value+"/api/campus-pass/"+o+"/edit/",{method:"PUT",body:a.value}).then(t=>{console.log("response",t),console.log(a.value),a.value.approval_status==="approved"&&V(),a.value.approval_status==="declined"&&E(),a.value.approval_status==="for revision"&&N()})},V=async()=>{await $fetch(i.value+"/api/campus-pass/to-gmail-approved/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks}}).then(o=>{console.log(o)})},E=async()=>{await $fetch(i.value+"/api/campus-pass/to-gmail-declined/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks}}).then(o=>{console.log(o)})},N=async()=>{await $fetch(i.value+"/api/campus-pass/to-gmail-for-revision/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks}}).then(o=>{console.log(o)})},O=async()=>{w.value=!1,p.value=await $fetch(i.value+"/api/campus-pass/list").catch(o=>o.data)||0},A=o=>{x.value=!x.value,S.value=o},G=async()=>{await $fetch(i.value+"/api/campus-pass/"+S.value+"/delete/",{method:"DELETE",headers:{Authorization:l.user.token,"Content-Type":"application/json"}}).then(async o=>{console.log("response",o),p.value=await $fetch(i.value+"/api/campus-pass/list").catch(t=>t.data)||0,x.value=!x.value})},q=()=>{l.removeToken(),_.push("/_/campus-pass-admin")},z=()=>{_.push("/_/panels/campus-security")};return(o,t)=>{const y=oe,F=ee;return d(),c("div",null,[e("div",le,[h(e("div",ne,[j(y,{goToList:z})],512),[[b,v(m)]]),e("div",ie,[e("div",re,[e("div",de,[e("div",ce,[e("div",{onClick:t[0]||(t[0]=s=>K(m)?m.value=!v(m):m=!v(m)),class:"w-10 px-1.5"},[e("i",{class:f(["fa text-3xl text-white",v(m)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)]),e("div",ue,[t[1]||(t[1]=e("i",{class:"fa fa-user mr-2 mt-1","aria-hidden":"true"},null,-1)),e("h1",pe,r(v(l).user.email),1)])]),e("button",{onClick:q,class:"flex hover:font-bold pt-1"},t[2]||(t[2]=[e("i",{class:"fa fa-sign-out text-white text-xl"},null,-1),e("h1",{class:"text-xs text-white p-1.5"},"Log Out",-1)]))])]),e("div",null,[e("div",ve,[h(e("div",null,[e("div",me,[e("div",he,[e("div",fe,[p.value.length>0?(d(),c("div",ge,[(d(!0),c(T,null,$(v(te).orderBy(p.value,"id","asc"),(s,W)=>(d(),c("div",{class:"justify-evenly text-center items-center h-auto mb-5",key:W},[e("div",_e,[e("div",xe,r(s.attendees),1),e("div",ye,[e("div",we,[e("span",be,r(s.incharge_firstname)+" "+r(s.incharge_middlename)+" "+r(s.incharge_lastname),1),t[3]||(t[3]=e("br",null,null,-1)),g(" "+r(s.incharge_contact_email)+" ",1),t[4]||(t[4]=e("br",null,null,-1)),g(" "+r(s.incharge_contact_number),1)])]),e("div",ke,[e("ul",null,[(d(!0),c(T,null,$(s.type_of_access,(n,C)=>(d(),c("li",{key:C},r(n),1))),128))])]),e("div",Ce,r(s.schedule),1),e("div",Te,[e("a",{href:s.approved_activities_link,target:"_blank",class:f(["font-bold w-full block text-green-800",s.approved_activities_link==="-"?"hidden":""])},"Approved Activities ",10,$e),e("a",{href:s.approved_gso_docs_link,target:"_blank",class:f(["font-bold w-full block text-green-800",s.approved_gso_docs_link==="-"?"hidden":""])},"Approved Booking GSO ",10,Se)]),e("div",De,[e("div",null,[t[5]||(t[5]=e("label",{for:"remarks"},"Remarks:",-1)),h(e("input",{type:"text",class:"border w-11/12 mx-auto","onUpdate:modelValue":n=>s.remarks=n,onChange:n=>B(s.id,s.remarks)},null,40,Ae),[[X,s.remarks]])]),e("div",je,[e("button",{onClick:n=>P(s.id),class:"text-yellow-500 hover:text-white hover:bg-yellow-500 bg-white border border-yellow-500 px-5 py-2 rounded-md"},t[6]||(t[6]=[e("i",{class:"fa fa-check rounded-lg uppercase mr-3","aria-hidden":"true"},null,-1),g(" Update ")]),8,Le)])]),e("div",Ue,[e("div",Be,[e("div",Pe,[e("div",null,[e("label",{class:f(["font-bold py-1 block",{"text-red-700":s.approval_status==="declined","text-yellow-500":s.approval_status==="pending","text-orange-500":s.approval_status==="for revision","text-green-900":s.approval_status==="approved"}])},"STATUS:",2),h(e("select",{"onUpdate:modelValue":n=>s.approval_status=n,name:"borrower_category",class:"shadow-md p-2 block font-bold rounded-md w-fit border border-[#e5e7eb] capitalize",required:"",onChange:n=>U(s.id,s.approval_status)},t[7]||(t[7]=[e("option",{value:"approved"},"approved",-1),e("option",{value:"declined"},"declined",-1),e("option",{value:"pending"},"pending",-1),e("option",{value:"for revision"},"for revision",-1)]),40,Ie),[[Z,s.approval_status]])])])])]),e("div",Me,[e("div",Re,[e("button",{onClick:n=>A(s.id),class:"text-red-500 hover:text-white hover:bg-red-500 bg-white border border-red-500 px-5 py-2 rounded-md"},t[8]||(t[8]=[e("i",{class:"fa fa-trash rounded-lg uppercase mr-3","aria-hidden":"true"},null,-1),g(" Delete ")]),8,Ve)])])]),e("div",{class:f(["border-4 border-gray-100 shadow-lg",s.attendees==="Individual"?"hidden":""])},[t[9]||(t[9]=e("div",{class:"text-center border-y py-2 font-bold"}," List of Names ",-1)),e("div",Ee,[(d(!0),c(T,null,$(s.name_list,(n,C)=>(d(),c("div",{key:C,class:"text-left px-3 py-5 bg-gray-100 mb-0.5"},[e("div",null,r(n.firstname),1),e("div",null,r(n.middlename),1),e("div",null,r(n.lastname),1),e("div",null,r(n.email),1)]))),128))])],2)]))),128)),h(e("div",Ne,[e("div",{class:"w-fit mx-auto flex items-center shadow-2xl border-2 rounded-lg py-2 bg-white"},[e("div",{class:"flex items-center"},[t[10]||(t[10]=e("div",{class:"font-bold pl-5 pr-10"},"Confirm Remarks: ",-1)),e("div",{class:"flex gap-10 mr-10"},[e("span",{class:"px-3 uppercase py-1 rounded-lg bg-green-900 border hover:border-green-900 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:I},"yes"),e("span",{class:"px-3 uppercase py-1 rounded-lg bg-red-700 border hover:border-red-700 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:O},"no")])])])],512),[[b,w.value]]),h(e("div",Oe,[t[11]||(t[11]=e("div",{class:"my-6"},"Are you sure you want to Delete?",-1)),e("div",{class:"flex gap-5 mx-auto w-fit my-5"},[e("span",{class:"bg-green-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:G},"Yes"),e("span",{class:"bg-red-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:A},"Cancel")])],512),[[b,v(x)]])])):Q("",!0)]),p.value.length===0?(d(),c("div",Ge," No Results Found! ")):(d(),c("div",{key:1,class:f(["italic text-gray-400 text-center p-1",p.value.length>0?"hidden":""])}," Please Wait ... ",2))])])],512),[[b,v(L)]])])])])]),j(F)])}}},Je=se(qe,[["__scopeId","data-v-069b5e88"]]);export{Je as default};
