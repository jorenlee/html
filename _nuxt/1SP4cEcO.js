import{_ as Te}from"./CTRDuXqT.js";import{k as Pe,l as Ue,r,p as me,K as ge,m as P,c as a,a as e,f as _,i as xe,h as d,e as pe,t as o,X as he,n as m,d as w,aa as Ve,v as q,j as h,F as K,g as Q,b as ye,o as i,s as Ne,q as U,y as Re,w as Ye,ab as qe}from"./kxi-KN3l.js";import{_ as Oe}from"./5JjjnmY2.js";import{h as te}from"./C5S46NFB.js";const ze={class:"h-screen flex"},Be={class:"pb-3 lg:w-3/12 bg-gray-100 w-full flex overflow-hidden"},Ge={class:"w-full"},Fe={class:"flex items-center justify-center text-white bg-green-900 lg:py-[16px] py-[8px] sta"},Ke={class:"flex items-center w-full px-2"},Qe={class:"text-sm"},He={class:"w-full overflow-y-scroll"},We={class:"bg-green-800 fixed w-full"},Xe={class:"flex mx-auto justify-between py-2 px-3.5"},Je={class:"pt-14"},Ze={class:"w-full lg:p-5 px-2 py-2"},et={class:"w-full flex justify-between items-center mb-4 px-4 py-2 bg-white shadow rounded-md"},tt={class:"flex justify-between w-full"},st={class:"flex items-center"},lt={class:"flex items-center"},at={class:"relative"},ot=["disabled"],it={class:""},nt={class:"appointment-lists mx-auto text-xs"},rt={key:0,class:"text-center"},dt={key:1},ut={key:0,class:"gap-4"},ct={class:"flex items-center justify-center px-2"},ft=["value"],vt={class:"w-full"},mt={class:"w-full px-3 lg:block flex items-center lg:py-0 py-2"},gt={class:"text-[10px] font-light whitespace-nowrap"},xt={class:""},pt={class:"w-full"},ht={class:"w-full"},yt=["onClick"],bt={class:"max-w-[150px] truncate flex mr-1 cursor-pointer"},_t={class:"cursor-pointer"},wt={class:"w-full px-3 lg:block flex items-center lg:py-0 py-2 pl-5"},kt={class:"text-[10px] font-light whitespace-nowrap"},Ct={class:"flex gap-x-3"},It={key:0,class:"flex gap-x-3"},Mt=["onClick"],jt=["src"],Dt=["onClick"],Lt=["src"],Et={key:1,class:"flex gap-x-3"},St=["onClick"],At=["src"],$t={class:"space-y-4"},Tt={class:"flex items-center"},Pt={class:"ml-4"},Ut={class:"text-sm font-medium text-gray-900"},Vt={class:"text-sm text-gray-500"},Nt={class:"bg-gray-50 p-4 rounded-md"},Rt={class:"grid grid-cols-1 gap-3"},Yt={class:"flex items-start"},qt={class:"ml-3 text-sm"},Ot={class:"text-gray-500"},zt={class:"flex items-start"},Bt={class:"ml-3 text-sm"},Gt={class:"text-gray-500"},Ft={class:"flex items-start"},Kt={class:"ml-3 text-sm"},Qt={class:"text-gray-500"},Ht={class:"flex items-start"},Wt={class:"ml-3 text-sm"},Xt={class:"text-gray-500"},Jt={class:"flex items-center w-11/12 mx-auto"},Zt={class:"flex w-full"},es=["onUpdate:modelValue"],ts={class:"flex items-center w-11/12 mx-auto"},ss={class:"flex w-full"},ls=["onUpdate:modelValue"],as={class:"flex items-center w-11/12 mx-auto"},os={class:"flex w-full"},is=["onUpdate:modelValue"],ns={class:"flex items-center w-11/12 mx-auto"},rs={class:"flex w-full"},ds=["onUpdate:modelValue"],us={class:"w-full"},cs={class:"lg:flex items-center w-full"},fs={class:"w-6/12 items-center text-left"},vs={class:"w-full px-3 lg:block flex items-center lg:py-0 py-2"},ms={class:"text-[10px] font-light whitespace-nowrap"},gs={class:"list-decimal pl-4"},xs={class:"lg:w-3/12 w-full text-left"},ps={class:"w-full px-3 lg:block flex items-center lg:py-0 py-2"},hs={class:"text-[10px] font-light whitespace-nowrap"},ys={class:""},bs=["src"],_s={class:"lg:w-3/12 w-full flex items-center justify-center py-1"},ws=["onClick"],ks={class:"flex justify-between items-center mb-4 border-b pb-3"},Cs={class:"text-lg font-medium text-gray-900"},Is={class:"mb-6 max-h-[40vh] overflow-y-auto"},Ms={key:0,class:"text-center text-gray-500 py-4"},js={key:1,class:"space-y-3"},Ds={class:"flex justify-between items-start"},Ls={class:"text-gray-500"},Es={class:"border-t pt-4"},Ss={class:"space-y-3"},As={class:"flex justify-end gap-2"},$s=["disabled"],Ts={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Ps={class:"flex min-h-full items-center justify-center p-4 text-center"},Us={class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},Vs={class:"mt-2"},Ns={class:"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4"},Rs={class:"flex"},Ys={class:"ml-3"},qs={class:"text-sm text-yellow-700"},Os={class:"font-medium"},zs={class:"mt-4 flex justify-end gap-2"},Bs=["disabled"],Gs={key:0,class:"fa fa-paper-plane mr-2"},Fs={key:1,class:"fa fa-spinner fa-spin mr-2"},Ks={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300"},Qs={class:"text-center"},Hs={class:"text-sm text-gray-500 mb-6"},Ws={class:"flex justify-center gap-4"},Xs=["disabled"],Js={key:0,class:"fa fa-spinner fa-spin mr-2"},Zs=["disabled"],el={key:1,class:"flex justify-center my-4 pb-10"},tl=["disabled"],sl=["onClick"],ll=["disabled"],al={key:2,class:"text-center my-5"},ol={class:"fixed bottom-0 w-full"},il=1e3,se=500,H=4,fl={__name:"index",setup(nl){const W=Pe(),k=Ue(),y=r(0);let be=r(!0),v=r(!1),C=r(!1);const D=r(k.mainDevServer);r(k.emailServer);let le=r(null);const L=r(!1),ae=r(""),X=l=>{ae.value=l,L.value=!0,g.value=!0,document.body.style.overflow="hidden"},O=()=>{L.value=!1,g.value=A(),document.body.style.overflow="auto"},E=r(!1),u=r(null),I=r(""),_e=l=>{u.value=l,E.value=!0,g.value=!0,I.value="",document.body.style.overflow="hidden"},oe=()=>{E.value=!1,g.value=A(),document.body.style.overflow="auto"},z=r(!1),V=r(!1),N=r(""),we=async()=>{if(!(!I.value.trim()||!u.value))try{N.value=I.value.trim();const l={timestamp:te().format("MMMM DD, YYYY h:mm:ss A"),status_remarks:N.value},t=u.value.logs?[...u.value.logs]:[];t.unshift(l),le.value=u.value.id;const c={...u.value,logs:t};await $fetch(D.value+"/api/registrar/"+le.value+"/edit/",{method:"PUT",headers:{"Content-Type":"application/json"},body:c}),u.value.logs=t,I.value="",await ne(),z.value=!0}catch(l){console.error("Error adding log:",l)}},J=()=>{z.value=!1,N.value=""},ke=async()=>{if(u.value){V.value=!0;try{const l={id:u.value.id,latest_status:N.value};console.log("Sending email data:",l),await $fetch(D.value+"/api/registrar/confirmation/",{method:"POST",headers:{"Content-Type":"application/json"},body:l}),console.log("Email sent successfully"),z.value=!1,N.value=""}catch(l){console.error("Error sending confirmation email:",l)}finally{V.value=!1}}};me(async()=>{setTimeout(async()=>{k.user.isAuthenticated&&(k.user.email==="jorenleeluna24@gmail.com"||k.user.email==="registrar@lsu.edu.ph")?(await B(),W.push("/registrar/dashboard"),Ce()):W.push("/unauthorized")},5e3),await B()});let S=null,g=r(!1);const A=()=>E.value||L.value||C.value||T.value,Ce=()=>{S&&clearInterval(S),S=setInterval(async()=>{g.value=A(),g.value||(await ne(),await Ie())},il)},ie=()=>{S&&(clearInterval(S),S=null)},Ie=async()=>{try{const l=y.value;if(!l||!Array.isArray(l)||l.length===0)return;const t={},c=[];l.forEach(s=>{if(s.tracking_id)if(t[s.tracking_id]){const j=t[s.tracking_id],F=new Date(j.created_at)>new Date(s.created_at)?j.id:s.id;c.push(F)}else t[s.tracking_id]=s});for(const s of c)console.log(`Removing duplicate item with ID: ${s}`),await $fetch(D.value+"/api/registrar/"+s+"/delete/",{method:"DELETE",headers:{"Content-Type":"application/json"}});c.length>0&&(console.log(`Removed ${c.length} duplicate entries`),await B())}catch(l){console.error("Error checking for duplicates:",l)}},ne=async()=>{try{const l=await $fetch(D.value+"/api/registrar/list").catch(t=>t.data)||[];if(l.length>0&&(p.value.length>0?(p.value=l,ee()):y.value=l,u.value)){const t=l.find(c=>c.id===u.value.id);t&&(u.value=t)}}catch(l){console.error("Error fetching list items quietly:",l)}},B=async()=>{G.value=!0;try{y.value=await $fetch(D.value+"/api/registrar/list").catch(l=>l.data)||[],p.value=[],M.value=""}catch(l){console.error("Error fetching list items:",l)}finally{G.value=!1}};ge(()=>{ie()});const Me=()=>{W.push("/registrar/login"),k.removeToken()},f=r([]),$=r(!1),re=P(()=>f.value.length===R.value.length&&R.value.length>0),je=()=>{re.value?f.value=[]:f.value=R.value.map(l=>l.id)},De=()=>{f.value.length!==0&&(C.value=!0,g.value=!0)},Le=()=>{C.value=!1,g.value=A()},Ee=async()=>{if(f.value.length!==0)try{$.value=!0;for(const l of f.value)await $fetch(D.value+"/api/registrar/"+l+"/delete/",{method:"DELETE",headers:{"Content-Type":"application/json"}});console.log(`${f.value.length} items deleted successfully`),f.value=[],await B(),C.value=!1,g.value=A()}catch(l){console.error("Error deleting items:",l)}finally{$.value=!1}};let de;const Z=P(()=>(de=y.value,Oe.orderBy(de,"created_at","asc"))),G=r(!0),x=r(1),ue=P(()=>Math.ceil(Z.value.length/se)),R=P(()=>{const l=(x.value-1)*se,t=l+se;return Z.value.slice(l,t)}),Se=P(()=>{const l=[];let t=Math.max(1,x.value-Math.floor(H/2)),c=Math.min(ue.value,t+H-1);c-t+1<H&&(t=Math.max(1,c-H+1));for(let s=t;s<=c;s++)l.push(s);return l}),T=r(!1),ce=r(null),Ae=l=>{ce.value=l,T.value=!0,g.value=!0,document.body.style.overflow="hidden"},fe=()=>{T.value=!1,g.value=A(),document.body.style.overflow="auto"};me(()=>{window.addEventListener("keydown",l=>{l.key==="Escape"&&L.value&&O()})}),ge(()=>{window.removeEventListener("keydown",l=>{l.key==="Escape"&&L.value&&O()}),ie()});const M=r(""),p=r([]),ee=()=>{if(x.value=1,!M.value.trim()){$e();return}p.value.length===0&&y.value.length>0&&(p.value=[...y.value]),M.value.toLowerCase().trim();const l=p.value.length>0?p.value:y.value;y.value=l.filter(t=>{if(!t)return!1;const c=M.value.toLowerCase().trim();return Object.keys(t).some(s=>typeof t[s]=="string"?t[s].toLowerCase().includes(c):!1)}),f.value=[]},$e=()=>{p.value.length>0&&(y.value=[...p.value],p.value=[]),M.value="",x.value=1,f.value=[]},Y=P(()=>{var l;return!((l=u.value)!=null&&l.logs)||!Array.isArray(u.value.logs)?[]:[...u.value.logs].sort((t,c)=>{const s=te(t.timestamp,"MMMM DD, YYYY h:mm:ss A"),j=te(c.timestamp,"MMMM DD, YYYY h:mm:ss A");return s.valueOf()-j.valueOf()})});return(l,t)=>{const c=Te;return i(),a("div",null,[e("div",ze,[_(e("div",Be,[e("div",Ge,[e("div",Fe,[e("div",Ke,[t[11]||(t[11]=e("i",{class:"fa fa-user mx-2","aria-hidden":"true"},null,-1)),e("h1",Qe,o(d(k).user.email),1)]),e("div",{onClick:t[0]||(t[0]=s=>he(v)?v.value=!d(v):v=!d(v)),class:"w-10 px-1.5 lg:hidden flex"},[e("i",{class:m(["fa text-3xl text-white",d(v)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)])]),t[12]||(t[12]=pe('<div class=""><div class="w-fit mx-auto mt-5 mb-3"><img src="https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/logos/LSU_Seal.PNG" class="lg:w-24 w-20 mx-auto"></div><div class="text-center"><h1 class="font-bold text-green-800 text-2xl">Dashboard</h1></div><div class="mx-auto mt-10 mb-5 grid grid-cols-1"><a href="/registrar/dashboard" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-black hover:bg-black hover:text-white"><i class="fa fa-list mr-3" aria-hidden="true"></i> All Request Lists </a><a href="/" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white"><i class="fa fa-globe mr-3" aria-hidden="true"></i> LSU HOME PAGE </a></div></div>',1))])],512),[[xe,d(v)]]),e("div",He,[e("div",We,[e("div",Xe,[e("div",{onClick:t[1]||(t[1]=s=>he(v)?v.value=!d(v):v=!d(v)),class:"w-auto flex items-center lg:px-1.5"},[e("i",{class:m(["fa text-3xl text-white",d(v)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2),t[13]||(t[13]=e("p",{class:"text-white whitespace-nowrap lg:ml-5 ml-3 font-bold uppercase lg:text-sm text-xs"}," Registrar ",-1))]),e("button",{onClick:Me,class:"flex hover:font-bold pt-1"},t[14]||(t[14]=[e("i",{class:"fa fa-sign-out text-white text-xl"},null,-1),e("h1",{class:"text-xs text-white p-1.5 lg:flex hidden"},"Log Out",-1)]))])]),e("div",Je,[e("div",Ze,[_(e("div",null,[t[51]||(t[51]=e("div",{class:"w-full shadow bg-gray-100 text-green-900 font-bold px-2 text-center mb-3 py-2 text-xs uppercase"}," All Request Lists ",-1)),e("div",et,[e("div",tt,[e("div",st,[e("button",{onClick:je,class:"flex items-center bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1.5 rounded-md transition-colors duration-200"},[t[15]||(t[15]=e("i",{class:"fa fa-check-square-o mr-2"},null,-1)),w(" "+o(d(re)?"Deselect All":"Select All"),1)])]),e("div",lt,[e("div",at,[_(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>M.value=s),type:"search",placeholder:"Search name, tracking ID, email...",class:"px-3 py-1.5 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-green-500 w-64",onKeyup:Ve(ee,["enter"])},null,544),[[q,M.value]]),e("button",{onClick:ee,class:"absolute right-0 top-0 h-full px-3 text-gray-500 hover:text-green-600"},t[16]||(t[16]=[e("i",{class:"fa fa-search"},null,-1)]))])]),e("button",{onClick:De,class:m(["flex items-center hover:bg-red-600 text-white px-3 py-1.5 rounded-md transition-colors duration-200 disabled:opacity-50",f.value.length===0?"bg-pink-200":"bg-red-500"]),disabled:f.value.length===0},[t[17]||(t[17]=e("i",{class:"fa fa-trash mr-2"},null,-1)),w(" Delete ("+o(f.value.length)+") ",1)],10,ot)])]),e("div",it,[e("div",nt,[G.value?(i(),a("div",rt,t[18]||(t[18]=[pe('<div class=""><div class="flex animate-pulse space-x-4"><div class="flex-1"><div class="h-10 bg-gray-300"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-200"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-300"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-200"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-300"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-100"></div><div class="h-0.5 bg-gray-100"></div></div></div></div>',1)]))):(i(),a("div",dt,[d(R).length>0?(i(),a("div",ut,[(i(!0),a(K,null,Q(d(R),(s,j)=>{var F,ve;return i(),a("div",{class:"justify-evenly flex items-center h-auto shadow lg:mb-0 mb-5 border-gray-200",key:j},[e("div",ct,[_(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[3]||(t[3]=n=>f.value=n),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2"},null,8,ft),[[Ne,f.value]])]),e("div",vt,[e("div",mt,[e("div",gt,[t[19]||(t[19]=e("span",{class:"font-bold mr-1"},"Tracking ID:",-1)),e("span",xt,o(s.tracking_id),1)])])]),e("div",pt,[e("div",ht,[e("div",{class:"w-full capitalize text-xs flex cursor hover:underline",onClick:n=>Ae(s)},[e("span",bt,[t[20]||(t[20]=e("i",{class:"fa fa-user mr-2.5"},null,-1)),w(" "+o(s.lastname)+", ",1)]),e("span",_t,o(s.firstname),1),e("span",{class:m([s.middlename==="-"?"hidden":"","mx-1 cursor-pointer"])},o(s.middlename),3)],8,yt)]),e("div",wt,[e("div",kt,[t[21]||(t[21]=e("span",{class:"font-bold mr-1"},"IDs and Documents:",-1)),e("div",Ct,[s?(i(),a("span",It,[e("a",{onClick:U(n=>X(s.valid_id_front[0].url),["prevent"]),class:"cursor-pointer"},[e("img",{src:s.valid_id_front[0].url,class:"w-10 hover:opacity-80 transition-opacity"},null,8,jt)],8,Mt),e("a",{onClick:U(n=>X(s.valid_id_back[0].url),["prevent"]),class:"cursor-pointer"},[e("img",{src:s.valid_id_back[0].url,class:"w-10 hover:opacity-80 transition-opacity"},null,8,Lt)],8,Dt)])):h("",!0),s?(i(),a("span",Et,[e("a",{onClick:U(n=>X(s.credential_evaluation_requests[0].url),["prevent"]),class:"cursor-pointer"},[e("img",{src:s.credential_evaluation_requests[0].url,class:"w-10 hover:opacity-80 transition-opacity"},null,8,At)],8,St)])):h("",!0)])])])]),T.value&&ce.value===s?(i(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300",onClick:fe},[e("div",{class:m(["bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4 transform transition-transform duration-300",{"scale-100 opacity-100":T.value,"scale-95 opacity-0":!T.value}]),onClick:t[4]||(t[4]=U(()=>{},["stop"]))},[e("div",{class:"flex justify-between items-center mb-4 border-b pb-3"},[t[23]||(t[23]=e("h3",{class:"text-lg font-medium text-gray-900"}," Personal Information ",-1)),e("button",{onClick:fe,class:"text-gray-400 hover:text-gray-500"},t[22]||(t[22]=[e("i",{class:"fa fa-times"},null,-1)]))]),e("div",$t,[e("div",Tt,[t[24]||(t[24]=e("div",{class:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},[e("i",{class:"fa fa-user text-green-600"})],-1)),e("div",Pt,[e("p",Ut,o(s.firstname)+" "+o(s.middlename)+" "+o(s.lastname),1),e("p",Vt," Tracking ID: "+o(s.tracking_id),1)])]),e("div",Nt,[e("div",Rt,[e("div",Yt,[t[26]||(t[26]=e("div",{class:"flex-shrink-0 h-5 w-5 text-green-500"},[e("i",{class:"fa fa-envelope"})],-1)),e("div",qt,[t[25]||(t[25]=e("p",{class:"font-medium text-gray-900"}," Email ",-1)),e("p",Ot,o(s.email),1)])]),e("div",zt,[t[28]||(t[28]=e("div",{class:"flex-shrink-0 h-5 w-5 text-green-500"},[e("i",{class:"fa fa-phone"})],-1)),e("div",Bt,[t[27]||(t[27]=e("p",{class:"font-medium text-gray-900"}," Contact Number ",-1)),e("p",Gt,o(s.contact_number),1)])]),e("div",Ft,[t[30]||(t[30]=e("div",{class:"flex-shrink-0 h-5 w-5 text-green-500"},[e("i",{class:"fa fa-birthday-cake"})],-1)),e("div",Kt,[t[29]||(t[29]=e("p",{class:"font-medium text-gray-900"}," Date of Birth ",-1)),e("p",Qt,o(s.birthdate),1)])]),e("div",Ht,[t[32]||(t[32]=e("div",{class:"flex-shrink-0 h-5 w-5 text-green-500"},[e("i",{class:"fa fa-female"})],-1)),e("div",Wt,[t[31]||(t[31]=e("p",{class:"font-medium text-gray-900"}," Mother's Maiden Name ",-1)),e("p",Xt,o(s.mother_maiden_name),1)])]),e("div",Jt,[t[34]||(t[34]=e("label",{for:"alumni",class:"font-bold text-gray-800 mr-1"},"ICC / LSU Graduate? :",-1)),e("div",Zt,[_(e("select",{class:"border-b w-full mx-auto text-xs px-1 shadow-sm","onUpdate:modelValue":n=>s.alumni=n},t[33]||(t[33]=[e("option",{value:"yes"},"Alumnus",-1),e("option",{value:"no"},"Non-Alumnus",-1)]),8,es),[[Re,s.alumni]])])]),e("div",ts,[t[35]||(t[35]=e("label",{for:"college",class:"font-bold text-gray-800 mr-1"},"College:",-1)),e("div",ss,[_(e("input",{type:"text",class:"border-b w-full mx-auto text-xs px-1 shadow-sm",placeholder:"College","onUpdate:modelValue":n=>s.college=n},null,8,ls),[[q,s.college]])])]),e("div",as,[t[36]||(t[36]=e("label",{for:"course",class:"font-bold text-gray-800 mr-1"},"Course:",-1)),e("div",os,[_(e("input",{type:"text",class:"border-b w-full mx-auto text-xs px-1 shadow-sm",placeholder:"Course","onUpdate:modelValue":n=>s.course=n},null,8,is),[[q,s.course]])])]),e("div",ns,[t[37]||(t[37]=e("label",{for:"year_graduated_last_attended",class:"font-bold text-gray-800 whitespace-nowrap mr-1"}," A.Y. Graduated | Attended:",-1)),e("div",rs,[_(e("input",{type:"text",class:"border-b w-full mx-auto text-xs px-1 shadow-sm",placeholder:"Year Graduated or Last Attended","onUpdate:modelValue":n=>s.year_graduated_last_attended=n},null,8,ds),[[q,s.year_graduated_last_attended]])])])])])])],2)])):h("",!0),e("div",us,[e("div",cs,[e("div",fs,[e("div",vs,[e("div",ms,[t[38]||(t[38]=e("span",{class:"font-bold"},"Requested Documents:",-1)),e("ul",gs,[(i(!0),a(K,null,Q(s.type_document_requests,(n,b)=>(i(),a("li",{class:"leading-[10px] text-[9px]",key:b},o(n),1))),128))])])])]),e("div",xs,[e("div",ps,[e("div",hs,[t[39]||(t[39]=e("span",{class:"font-bold mr-1"},"Note:",-1)),e("span",ys,o(s.remarks),1)])]),L.value?(i(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:O},[e("div",{class:"relative max-w-4xl max-h-[90vh] overflow-auto bg-white p-2 rounded-lg",onClick:t[5]||(t[5]=U(()=>{},["stop"]))},[e("button",{onClick:O,class:"absolute top-2 right-2 text-gray-700 hover:text-red-500 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-md"},t[40]||(t[40]=[e("i",{class:"fa fa-close"},null,-1)])),e("img",{src:ae.value,class:"max-w-full max-h-[85vh] object-contain"},null,8,bs)])])):h("",!0)]),e("div",_s,[e("div",null,[e("p",{class:"text-blue-500 hover:text-blue-700 cursor-pointer underline",onClick:n=>_e(s)}," Status ("+o(s.logs?s.logs.length:0)+") ",9,ws)]),E.value&&u.value===s?(i(),a("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300",onClick:oe},[e("div",{class:m(["bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full mx-4 transform transition-transform duration-300 max-h-[90vh] overflow-auto",{"scale-100 opacity-100":E.value,"scale-95 opacity-0":!E.value}]),onClick:t[8]||(t[8]=U(()=>{},["stop"]))},[e("div",ks,[e("h3",Cs," Status Logs - "+o(((F=u.value)==null?void 0:F.tracking_id)||"N/A"),1),e("button",{onClick:oe,class:"text-gray-400 hover:text-gray-500"},t[41]||(t[41]=[e("i",{class:"fa fa-times"},null,-1)]))]),e("div",Is,[!((ve=u.value)!=null&&ve.logs)||u.value.logs.length===0?(i(),a("div",Ms," No logs available ")):(i(),a("div",js,[(i(!0),a(K,null,Q(d(Y),(n,b)=>(i(),a("div",{key:b,class:m(["border-l-4 rounded-r text-[10px]",b===d(Y).length-1?"border-green-500 bg-green-50 py-3 ":"border-gray-300 bg-gray-50"])},[e("div",Ds,[e("div",{class:m(["font-medium",b===d(Y).length-1?"text-green-800 text-sm":"text-gray-500"])},[e("div",{class:m(["w-full bg-transparent border-b focus:outline-none px-1",b===d(Y).length-1?"border-green-300 focus:border-green-500":"border-gray-300 focus:border-gray-500"])},o(n.status_remarks),3)],2),e("div",Ls,[e("div",{class:m(["bg-transparent border-b focus:outline-none px-1 text-right",b===d(Y).length-1?"border-green-300 focus:border-green-500":"border-gray-300 focus:border-gray-500"])},o(n.timestamp),3)])])],2))),128))]))]),e("div",Es,[e("div",Ss,[e("div",null,[t[42]||(t[42]=e("label",{for:"status_remarks",class:"block text-sm font-medium text-gray-700 mb-1"},"Status / Remarks",-1)),_(e("textarea",{id:"status_remarks","onUpdate:modelValue":t[6]||(t[6]=n=>I.value=n),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",placeholder:"Enter status update..."},null,512),[[q,I.value]])]),e("div",As,[e("button",{onClick:we,disabled:!I.value.trim(),class:"inline-flex justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},t[43]||(t[43]=[e("i",{class:"fa fa-plus mr-2"},null,-1),w(" Add ")]),8,$s)]),ye(qe,{appear:"",name:"fade"},{default:Ye(()=>{var n;return[z.value?(i(),a("div",Ts,[e("div",Ps,[e("div",{class:"fixed inset-0 bg-black bg-opacity-25",onClick:J}),e("div",Us,[t[48]||(t[48]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Send Status Update Email ",-1)),e("div",Vs,[t[47]||(t[47]=e("p",{class:"text-sm text-gray-500"}," Would you like to notify the applicant about this status update via email? ",-1)),e("div",Ns,[e("div",Rs,[t[46]||(t[46]=e("div",{class:"flex-shrink-0"},[e("i",{class:"fa fa-info-circle text-yellow-400"})],-1)),e("div",Ys,[e("p",qs,[t[44]||(t[44]=w(" This will send an email to ")),e("span",Os,o((n=u.value)==null?void 0:n.email),1),t[45]||(t[45]=w(" with the latest status information. "))])])])])]),e("div",zs,[e("button",{type:"button",class:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2",onClick:t[7]||(t[7]=(...b)=>J&&J(...b))}," No, Skip Email "),e("button",{type:"button",class:"inline-flex justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:ke,disabled:V.value},[V.value?(i(),a("i",Fs)):(i(),a("i",Gs)),w(" "+o(V.value?"Sending...":"Yes, Send Email"),1)],8,Bs)])])])])):h("",!0)]}),_:1})])])],2)])):h("",!0)])])])])}),128)),d(C)?(i(),a("div",Ks,[e("div",{class:m(["bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4 transform transition-transform duration-300",{"scale-100 opacity-100":d(C),"scale-95 opacity-0":!d(C)}])},[e("div",Qs,[t[49]||(t[49]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4"},[e("i",{class:"fa fa-exclamation-triangle text-red-600 text-xl"})],-1)),t[50]||(t[50]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"}," Confirm Deletion ",-1)),e("p",Hs," Are you sure you want to delete "+o(f.value.length===1?"this record":"these "+f.value.length+" records")+"? This action cannot be undone. ",1)]),e("div",Ws,[e("button",{onClick:Ee,class:"inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition-colors duration-200",disabled:$.value},[$.value?(i(),a("i",Js)):h("",!0),w(" "+o($.value?"Deleting...":"Delete"),1)],8,Xs),e("button",{onClick:Le,class:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 transition-colors duration-200",disabled:$.value}," Cancel ",8,Zs)])],2)])):h("",!0)])):h("",!0),d(Z).length>0?(i(),a("div",el,[e("button",{disabled:x.value===1,onClick:t[9]||(t[9]=s=>x.value--),class:"px-2 py-2 mx-1 bg-gray-200 rounded hover:bg-gray-500 hover:text-white"}," Prev ",8,tl),(i(!0),a(K,null,Q(d(Se),s=>(i(),a("button",{key:s,onClick:j=>x.value=s,class:m(["hover:bg-green-500 hover:text-white",{"px-4 py-2 mx-1 rounded":!0,"bg-green-800 text-white":x.value===s,"bg-gray-200":x.value!==s}])},o(s),11,sl))),128)),e("button",{disabled:x.value===d(ue),onClick:t[10]||(t[10]=s=>x.value++),class:"px-2 py-2 mx-1 bg-gray-200 rounded hover:bg-gray-500 hover:text-white"}," Next ",8,ll)])):G.value?h("",!0):(i(),a("div",al," No items found! "))]))])])],512),[[xe,d(be)]])])])])]),e("div",ol,[ye(c)])])}}};export{fl as default};
