import{_ as te}from"./HaqZioSe.js";import{_ as oe}from"./DxvgoqtR.js";import{u as le,g as ae,r as i,q as se,h as ie,c as n,b as U,a as e,t as y,k as re,f as o,F as R,s as A,i as u,y as de,l as p,z as k,d as f,x as ne,o as c,A as ce,j as ue,n as me,p as be,e as _e}from"./e_TlW8sH.js";import{s as pe}from"./mLt1cZes.js";import{X as he}from"./jby_OFtu.js";import{h as C}from"./C5S46NFB.js";import{_ as S}from"./vUEbHlag.js";import{_ as ge}from"./DlAUqK2U.js";import"./Cpj98o6Y.js";const a=x=>(be("data-v-eb86082b"),x=x(),_e(),x),fe={class:"bg-gray-50"},xe={class:""},ve={class:""},we={class:"relative"},ye=a(()=>e("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/banners/about.jpg",class:"align-top w-full h-auto lg:object-fill lg:block hidden"},null,-1)),ke=a(()=>e("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/banners/green-tones-gradient-background_23-2148374436.png",class:"align-top w-full h-36 object-none lg:hidden block"},null,-1)),Ce={class:"pt-10 absolute top-1/2 transform -translate-y-1/2 w-full"},Se={class:"font-bold uppercase text-white lg:text-2xl text-lg w-11/12 mx-auto"},Te=ne('<div class="pt-2.5 pb-3 shadow-lg" data-v-eb86082b><div class="w-11/12 mx-auto flex justify-between" data-v-eb86082b><ul class="flex lasalle-green-text capitalize text-xs" data-v-eb86082b><li data-v-eb86082b><a href="/" class="" data-v-eb86082b> Home </a></li><li class="flex items-center" data-v-eb86082b><i class="fas fa-caret-right mx-1.5 mt-0.5" data-v-eb86082b></i><a href="/library" class="mr-1 flex" data-v-eb86082b> Library </a></li><li class="flex items-center" data-v-eb86082b><i class="fas fa-caret-right mx-1.5 mt-0.5" data-v-eb86082b></i><a href="/library/LRCBookThru" class="mr-1 flex" data-v-eb86082b><span class="lg:flex hidden ml-1" data-v-eb86082b> LRC Book Thru</span><span class="lg:hidden flex" data-v-eb86082b> LRC Book Thru</span></a></li></ul></div></div>',1),De={class:"text-xs lg:mb-5 bg-white w-11/12 mx-auto lg:mt-5 shadow-xl rounded-xl"},Be={class:""},Ve=a(()=>e("div",{class:"bg-green-900 py-1 mt-4 lg:mb-10 mb-4 text-base font-medium text-white text-center uppercase tracking-tight"}," Book an Appointment ",-1)),Ne={class:"lg:w-fit w-auto mx-auto lg:flex lg:gap-20"},Ue={class:"lg:w-fit mb-1"},je={class:""},Me=a(()=>e("h1",{class:"font-bold lasalle-green-text text-xs text-center capitalize mb-3"}," Date ",-1)),ze={class:"mx-auto w-fit"},qe={class:"mx-auto shadow lg:h-fit lg:my-auto border rounded-sm my-3"},Re=a(()=>e("h1",{class:"border-b-2 border-green-900 text-center font-bold text-green-900 lg:whitespace-nowrap capitalize pt-3 pb-3 mb-3"}," Time ",-1)),Ae={class:"w-full rounded-md justify-center"},Le={class:"grid lg:grid-cols-3 grid-cols-2 pr-6"},Ye=["value","id"],Fe=["value"],Ie=["for"],$e={class:"lg:w-10/12 mx-auto lg:p-5"},Ee={class:"flex gap-2 lg:mb-3 lg:mt-0 mt-3"},Oe={class:"lg:w-fit w-[170px] lg:mb-0 mb-2"},Xe=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Borrower Category ",-1)),He=a(()=>e("option",{value:"",disabled:"",selected:"",hidden:""}," Select Borrower Category ",-1)),Pe=a(()=>e("option",{value:"Faculty"},"Faculty",-1)),Ze=a(()=>e("option",{value:"Staff"},"Staff",-1)),Ge=a(()=>e("option",{value:"Student"},"Student",-1)),Ke=[He,Pe,Ze,Ge],We={key:0,class:"lg:w-3/12 w-full lg:mb-0 mb-2"},Je=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," ID Number ",-1)),Qe={class:"lg:flex gap-2 lg:mb-3"},et={class:"w-full lg:mb-0 mb-2"},tt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," First Name ",-1)),ot={class:"w-full lg:mb-0 mb-2"},lt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Last Name ",-1)),at={class:"w-full lg:mb-0 mb-2"},st=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Email ",-1)),it={class:"shadow rounded-lg px-2 py-3"},rt=a(()=>e("div",{class:"text-green-900 text-sm text-center lg:mb-3 px-3"},[f(" Open this link "),e("a",{class:"font-bold cursor-pointer",target:"_blank",href:"http://210.5.95.130:443/district/servlet/presentlistsitesform.do?districtMode=true&fbclid=IwZXh0bgNhZW0CMTEAAR1l5ZC2C1yCw-n1xKCx_beYsEzANX-jBtdwdTZ0Fp0xnxQ4OXYXBpiTuek_aem_NoNWY4u2iaGDK1amE_xM7w"}," OPAC "),f(" for the available resources and copy the book details in the input boxes "),e("span",{class:""}," (please select first the borrower category above)"),f(". ")],-1)),dt={class:"flex items-center"},nt=a(()=>e("div",{class:"mr-2 lg:hidden block mt-1"},"Book",-1)),ct={class:"flex items-center lg:mr-3 mt-3 font-bold justify-center bg-green-900 text-white rounded-full h-8 w-8 py-2 px-2.5 text-sm mb-2"},ut={class:"w-full lg:mb-0 mb-2"},mt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Book Title ",-1)),bt=["onUpdate:modelValue"],_t={class:"w-full lg:mb-0 mb-2"},pt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Book Author ",-1)),ht=["onUpdate:modelValue"],gt={class:"w-full lg:mb-0 mb-2"},ft=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Book Call Number ",-1)),xt=["onUpdate:modelValue"],vt={key:0,class:"flex items-center lg:static absolute top-3 right-0"},wt=a(()=>e("div",{class:"mr-2 lg:hidden block"},"Remove",-1)),yt=["onClick"],kt=a(()=>e("i",{class:"fa fa-close"},null,-1)),Ct=[kt],St={class:"lg:w-10/12 lg:mx-auto"},Tt=a(()=>e("i",{class:"fa fa-plus mr-1"},null,-1)),Dt={key:0,class:"text-white w-full bg-red-800 text-sm px-3 py-2 rounded-md text-center"},Bt=a(()=>e("div",{class:"mt-5 mb-3 w-fit lg:mx-auto mr-0 ml-auto"},[e("button",{class:"hover:text-green-800 border border-green-800 text-white hover:bg-white bg-green-800 uppercase text-xs rounded-md w-fit mx-auto px-5 py-2 text-center font-bold lg:mb-0 mb-5"},[f(" Submit "),e("i",{class:"fa fa-paper-plane","aria-hidden":"true"})])],-1)),Vt=a(()=>e("div",null,null,-1)),Nt=a(()=>e("div",null,[e("div",{id:"fb-root"}),e("div",{id:"fb-customer-chat-library",class:"fb-customerchat"})],-1)),Ut={__name:"index",async setup(x){let v,j;const L=le(),Y=ae(),w=i(Y.mainServer),F=["LRC Book Thru","(lrc)","Book Thru"],I=i(pe.timeSelection),M=([v,j]=se(()=>$fetch(w.value+"/api/library/schedule/booking/list/").catch(d=>d.data)),v=await v,j(),v);let T=i([]);const $=i(new Date);let E=i(C(new Date).format("HH:MM")),z=i(),h=i(0),O=i(""),X=i(""),H=i(""),D=i(!1);i([]);let B=i([]);const _=i();i();const r=i({date:"",time:"",updated_at:new Date}),l=i({borrower_category:"",id_number:"",firstname:"",lastname:"",email:"",books:[],booking_date:"",booking_time:"",status:"pending",created_by_email:"",updated_at:new Date});ie(()=>{M.filter(function(d){T.value.push(d.date)})});let q=i(!1);const P=()=>{l.value.books.push({book_title:O.value,book_author:X.value,book_call_number:H.value}),h.value--},Z=d=>{l.value.books.length>1&&(S.pull(l.value.books,d),h.value++)},V=()=>{q.value=!0,l.value.id_number=""},G=()=>{l.value.borrower_category==="Faculty"&&(h.value=20,V()),l.value.borrower_category==="Staff"&&(h.value=20,V()),l.value.borrower_category==="Student"&&(h.value=15,V()),l.value.books=[{book_title:null,book_author:null,book_call_number:null}]},K=d=>{r.value.date=C(d).format("MM-DD-YYYY");let s=C(C().toDate()).format("MM-DD-YYYY");r.value.time=["-"],setTimeout(()=>{M.filter(function(m){m.date===r.value.date&&(z.value=m.id,r.value.time=m.time),m.date===s&&m.date===r.value.date&&(r.value.time=m.time.filter(N=>E.value.slice(0,2)<N.range_from_time.slice(0,2)))})},100)},W=async()=>{r.value.time.length===1?B.value=[{range_from_time:"",range_to_time:"",_12_hour_format_from:"",_12_hour_format_to:""}]:B.value=S.filter(r.value.time,function(d){return d.range_from_time!==_.value.range_from_time&&d.range_to_time!==_.value.range_to_time}),await $fetch(w.value+"/api/library/schedule/booking/"+z.value+"/edit/",{method:"PUT",headers:{"Content-Type":"application/json"},body:{date:r.value.date,time:B.value,updated_at:r.value.updated_at}}).then(d=>{})},J=()=>{Q(),ee()},Q=async()=>{l.value.booking_date=r.value.date,l.value.booking_time=_.value._12_hour_format_from+" - "+_.value._12_hour_format_to,l.value.created_by_email=l.value.email,await $fetch(w.value+"/api/library/booking/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:l.value}).then(d=>{d.status==="errors"?(D.value=!0,setTimeout(()=>{D.value=!1},1e4)):(W(),L.push({path:"/library/LRCBookThru/ConfirmationPage"}))})},ee=async()=>{await $fetch(w.value+"/api/library/submit-appointment-to-gmail/",{method:"POST",headers:{"Content-Type":"application/json"},body:l.value}).then(d=>{})};return(d,s)=>{const m=te,N=oe;return c(),n("div",fe,[U(m),e("div",xe,[e("div",ve,[e("div",we,[ye,ke,e("div",Ce,[e("h1",Se,y(F[0]),1)]),Te])]),e("div",De,[e("div",Be,[Ve,e("form",{onSubmit:re(J,["prevent"]),class:"px-3"},[e("div",Ne,[e("div",Ue,[e("div",je,[Me,e("div",ze,[U(o(he),{modelValue:o(r).date,"onUpdate:modelValue":[s[0]||(s[0]=t=>o(r).date=t),s[1]||(s[1]=t=>K(o(r).date))],inline:"","enable-time-picker":!1,name:"date","auto-apply":"",highlight:o(T),"year-range":[2024,2024],"disabled-week-days":[6,7,0],"week-start":"0","allowed-dates":o(T),"min-date":o($)},null,8,["modelValue","highlight","allowed-dates","min-date"])])])]),e("div",qe,[Re,e("div",Ae,[e("ul",Le,[(c(!0),n(R,null,A(o(I)[0].time,(t,g)=>(c(),n("li",{class:"flex items-center mb-3 font-semibold whitespace-nowrap lg:w-[170px] lg:text-left text-center lg:pl-6 pl-3.5",key:g},[o(S).find(o(r).time,t)?u((c(),n("input",{key:0,type:"radio",name:"time",value:t,class:"mr-2 mt-0.5","onUpdate:modelValue":s[2]||(s[2]=b=>ue(_)?_.value=b:null),id:g,required:""},null,8,Ye)),[[ce,o(_)]]):(c(),n("input",{key:1,type:"radio",name:"time",value:t,class:"mr-2 mt-0.5",disabled:""},null,8,Fe)),e("label",{for:g,class:me(["lg:text-xs text-[10px]",o(S).find(o(r).time,t)?"text-[#087830] font-bold":" text-gray-400 font-light"])},y(t._12_hour_format_from)+" - "+y(t._12_hour_format_to),11,Ie)]))),128))])])])]),e("div",$e,[e("div",Ee,[e("div",Oe,[Xe,u(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o(l).borrower_category=t),name:"borrower_category",class:"shadow-md px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21] capitalize",required:"",onChange:s[4]||(s[4]=t=>G())},Ke,544),[[de,o(l).borrower_category]])]),o(q)?(c(),n("div",We,[Je,u(e("input",{class:"shadow-md text-green-800 px-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":s[5]||(s[5]=t=>o(l).id_number=t),placeholder:"ID Number",type:"text",required:""},null,512),[[p,o(l).id_number]])])):k("",!0)]),e("div",Qe,[e("div",et,[tt,u(e("input",{class:"shadow-md text-xs text-green-800 px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":s[6]||(s[6]=t=>o(l).firstname=t),placeholder:"first Name",type:"text",required:""},null,512),[[p,o(l).firstname]])]),e("div",ot,[lt,u(e("input",{class:"shadow-md text-xs text-green-800 px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":s[7]||(s[7]=t=>o(l).lastname=t),placeholder:"last Name",type:"text",required:""},null,512),[[p,o(l).lastname]])]),e("div",at,[st,u(e("input",{class:"shadow-md text-xs text-green-800 px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21]","onUpdate:modelValue":s[8]||(s[8]=t=>o(l).email=t),placeholder:"Email",type:"email",required:""},null,512),[[p,o(l).email]])])]),e("div",it,[rt,(c(!0),n(R,null,A(o(l).books,(t,g)=>(c(),n("div",{class:"lg:flex lg:shadow lg:p-5 gap-2 mb-3 relative",key:g},[e("div",dt,[nt,e("div",ct,y(g+1),1)]),e("div",ut,[mt,u(e("input",{class:"shadow-md px-2 py-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":b=>t.book_title=b,placeholder:"book title",type:"text",required:""},null,8,bt),[[p,t.book_title]])]),e("div",_t,[pt,u(e("input",{class:"shadow-md px-2 py-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":b=>t.book_author=b,placeholder:"book author",type:"text",required:""},null,8,ht),[[p,t.book_author]])]),e("div",gt,[ft,u(e("input",{class:"shadow-md px-2 py-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":b=>t.book_call_number=b,placeholder:"book call number",type:"text",required:""},null,8,xt),[[p,t.book_call_number]])]),o(l).books.length>1?(c(),n("div",vt,[wt,e("div",{class:"flex items-center lg:ml-5 lg:mt-5 justify-center hover:bg-white bg-red-900 border border-red-900 hover:text-red-900 text-white rounded-full h-8 w-8 pt-2 pb-1.5 px-2.5 text-sm",onClick:b=>Z(t)},Ct,8,yt)])):k("",!0)]))),128)),e("div",St,[o(h)>1?(c(),n("div",{key:0,class:"hover:text-[#f4ca16] border border-[#f4ca16] text-white cursor-pointer w-fit mb-3 hover:bg-white bg-[#f4ca16] font-bold uppercase text-xs rounded-md px-3 py-2 text-center lg:-ml-2",onClick:P},[Tt,f(" Add Book ")])):k("",!0)])]),o(D)?(c(),n("div",Dt," Date and Time and other fields are required! ")):k("",!0),Bt])],32)])])]),Vt,Nt,U(N)])}}},It=ge(Ut,[["__scopeId","data-v-eb86082b"]]);export{It as default};
