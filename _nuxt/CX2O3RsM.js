import{_ as te}from"./yOdsgrpN.js";import{k as se,l as ae,r as p,p as le,m as $,c as i,a as e,f as y,i as j,h as o,e as E,t as r,X as G,n as v,j as N,F as S,g as T,b as ie,o as n,d as w,v as R,y as oe}from"./BWRtnBYW.js";import"./C5S46NFB.js";import{_ as re}from"./5JjjnmY2.js";const ne={class:"h-screen flex"},de={class:"pb-3 lg:w-3/12 bg-gray-100 w-full flex overflow-hidden"},ce={class:"w-full"},ue={class:"flex items-center justify-center text-white bg-green-900 lg:py-[16px] py-[8px] sta"},pe={class:"flex items-center w-full px-2"},ve={class:"text-sm"},fe={class:"w-full overflow-y-scroll"},ge={class:"bg-green-800 fixed w-full"},me={class:"flex mx-auto justify-between py-2 px-3.5"},xe={class:"pt-14"},he={class:"w-full lg:p-5 px-2 py-2"},_e={class:""},ye={key:0,class:"text-center"},we={key:1},be={key:0,class:"gap-4"},ke={class:"w-full"},Ce={class:"lg:flex items-center w-full"},$e={class:"lg:w-5/12 w-full block text-left text-[11px] leading-tight lg:px-2 px-2 lg:py-1 py-2"},Se={class:"w-full capitalize text-xs flex"},Te={class:"max-w-[150px] truncate flex mr-1"},Ae={class:""},De={class:"w-full text-xs"},Le={class:"w-full"},Pe={class:"lg:w-6/12 w-full"},je={class:"w-full font-bold pb-1 flex items-center lg:justify-start justify-center"},Ne={class:"w-full flex items-center justify-center uppercase"},Ie={class:"gap-x-0.5 flex w-full"},Ve={class:"lg:w-6/12 w-full flex items-center lg:py-0 py-4 border-r"},Ue={class:"w-full"},Me={class:"flex items-center w-11/12 mx-auto mb-1"},Oe={class:"flex w-full"},ze=["onUpdate:modelValue"],Be={class:"flex items-center w-11/12 mx-auto"},Ee={class:"flex w-full"},Ge=["onUpdate:modelValue"],Re={class:"w-full px-3 lg:block flex items-center lg:py-0 py-2"},qe=["onClick"],Fe={class:"text-[10px] font-light whitespace-nowrap"},He={class:""},Je={class:"gap-x-5 flex w-fit mx-5 pt-1"},Xe=["href"],Ye=["href"],Ke={class:"flex w-full"},Qe={class:"w-fit mx-auto lg:py-1 py-3 flex items-center"},We={class:"lg:block flex items-center w-full"},Ze=["onUpdate:modelValue","onChange"],et={class:"flex px-2 font-bold pl-4"},tt={class:"lg:mr-0 lg:ml-auto mx-auto lg:py-0 my-3 lg:flex justify-center text-white items-center"},st=["onClick"],at={class:"h-screen w-full px-5 bg-[#ffffffa3] shadow-2xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center"},lt={key:1,class:"flex justify-center my-4 pb-10"},it=["disabled"],ot=["onClick"],rt=["disabled"],nt={key:2,class:"text-center my-5"},dt={key:0,class:"w-full z-10 bg-white h-full mb-16"},ct={class:"border-4 border-gray-100 shadow-lg"},ut={class:"flex items-center"},pt={class:"lg:grid grid-cols-4 lg:gap-x-3 lg:text-sm text-xs"},vt={class:"fixed bottom-0 w-full"},I=500,A=4,_t={__name:"index",setup(ft){const D=se(),x=ae(),h=p(x.mainDevServer);p(x.emailServer);const C=p(0);let V=p(),q=p(!0),d=p(!1),b=p(!1);p(!1);const l=p(null),_=p(!1),U=p([]);le(async()=>{setTimeout(async()=>{x.user.isAuthenticated&&(x.user.email==="jorenleeluna24@gmail.com"||x.user.email==="esmael.larubis@lsu.edu.ph")?(await k(),D.push("/campus-pass/dashboard")):D.push("/unauthorized")},5e3),await k()});const k=async()=>{try{C.value=await $fetch(h.value+"/api/campus-pass/list").catch(a=>a.data)||[]}catch(a){console.error("Error fetching list items:",a)}finally{P.value=!1}},F=a=>{const t=c=>c.filter(s=>s!=null).map(s=>String(s).trim()).filter(s=>s.length>0);if(Array.isArray(a))return t(a);if(typeof a=="string"){const c=a.trim();if(!c)return[];try{const m=JSON.parse(c);if(Array.isArray(m))return t(m)}catch{}const s=c.replace(/^\[|\]$/g,""),g=s.split(",").map(m=>m.replace(/^['"]|['"]$/g,"").trim()).filter(m=>m.length>0);if(g.length>0)return g;const u=s.replace(/^['"]|['"]$/g,"").trim();return u?[u]:[]}return[]},H=async(a,t,c,s)=>{l.value=await $fetch(h.value+"/api/campus-pass/"+a+"/").catch(g=>g.data),l.value.approval_status=t,l.value.purpose=c,l.value.remarks=s,J(a)},J=async a=>{await $fetch(h.value+"/api/campus-pass/"+a+"/edit/",{method:"PUT",body:l.value}).then(t=>{console.log("response",t),l.value.approval_status==="approved"&&X(),l.value.approval_status==="declined"&&Y(),l.value.approval_status==="for revision"&&K()})},X=async()=>{await $fetch(h.value+"/api/campus-pass/to-gmail-approved/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:l.value.incharge_firstname,incharge_contact_email:l.value.incharge_contact_email,schedule:l.value.schedule,approval_status:l.value.approval_status,remarks:l.value.remarks,tracking_id:l.value.tracking_id,purpose:l.value.purpose}}).then(async a=>{console.log(a),await k()})},Y=async()=>{await $fetch(h.value+"/api/campus-pass/to-gmail-declined/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:l.value.incharge_firstname,incharge_contact_email:l.value.incharge_contact_email,schedule:l.value.schedule,approval_status:l.value.approval_status,remarks:l.value.remarks,tracking_id:l.value.tracking_id,purpose:l.value.purpose}}).then(async a=>{console.log(a),await k()})},K=async()=>{await $fetch(h.value+"/api/campus-pass/to-gmail-for-revision/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:l.value.incharge_firstname,incharge_contact_email:l.value.incharge_contact_email,schedule:l.value.schedule,approval_status:l.value.approval_status,remarks:l.value.remarks,tracking_id:l.value.tracking_id,purpose:l.value.purpose}}).then(async a=>{console.log(a),await k()})},M=a=>{b.value=!b.value,V.value=a},Q=async()=>{await $fetch(h.value+"/api/campus-pass/"+V.value+"/delete/",{method:"DELETE",headers:{Authorization:x.user.token,"Content-Type":"application/json"}}).then(async a=>{console.log("response",a),C.value=await $fetch(h.value+"/api/campus-pass/list").catch(t=>t.data)||0,b.value=!b.value})},W=a=>{C.value.filter(function(t){a===t.id&&(U.value=t.name_list,_.value=!_.value)})},Z=()=>{x.removeToken(),D.push("/campus-pass/login")};let O;const L=$(()=>(O=C.value,re.orderBy(O,"created_at","asc"))),P=p(!0),f=p(1),z=$(()=>Math.ceil(L.value.length/I)),B=$(()=>{const a=(f.value-1)*I,t=a+I;return L.value.slice(a,t)}),ee=$(()=>{const a=[];let t=Math.max(1,f.value-Math.floor(A/2)),c=Math.min(z.value,t+A-1);c-t+1<A&&(t=Math.max(1,c-A+1));for(let s=t;s<=c;s++)a.push(s);return a});return(a,t)=>{const c=te;return n(),i("div",null,[e("div",ne,[y(e("div",de,[e("div",ce,[e("div",ue,[e("div",pe,[t[5]||(t[5]=e("i",{class:"fa fa-user mx-2","aria-hidden":"true"},null,-1)),e("h1",ve,r(o(x).user.email),1)]),e("div",{onClick:t[0]||(t[0]=s=>G(d)?d.value=!o(d):d=!o(d)),class:"w-10 px-1.5 lg:hidden flex"},[e("i",{class:v(["fa text-3xl text-white",o(d)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)])]),t[6]||(t[6]=E('<div class=""><div class="w-fit mx-auto mt-5 mb-3"><img src="https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/logos/LSU_Seal.PNG" class="lg:w-24 w-20 mx-auto"></div><div class="text-center"><h1 class="font-bold text-green-800 text-2xl">Dashboard</h1></div><div class="mx-auto mt-10 mb-5 grid grid-cols-1"><a href="/campus-pass/dashboard" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-black hover:bg-black hover:text-white"><i class="fa fa-list mr-3" aria-hidden="true"></i> All Request Lists </a><a href="/" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white"><i class="fa fa-globe mr-3" aria-hidden="true"></i> LSU HOME PAGE </a></div></div>',1))])],512),[[j,o(d)]]),e("div",fe,[e("div",ge,[e("div",me,[e("div",{onClick:t[1]||(t[1]=s=>G(d)?d.value=!o(d):d=!o(d)),class:"w-auto flex items-center lg:px-1.5"},[e("i",{class:v(["fa text-3xl text-white",o(d)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2),t[7]||(t[7]=e("p",{class:"text-white whitespace-nowrap lg:ml-5 ml-3 font-bold uppercase lg:text-sm text-xs"}," Campus Pass Access ",-1))]),e("button",{onClick:Z,class:"flex hover:font-bold pt-1"},t[8]||(t[8]=[e("i",{class:"fa fa-sign-out text-white text-xl"},null,-1),e("h1",{class:"text-xs text-white p-1.5 lg:flex hidden"},"Log Out",-1)]))])]),e("div",xe,[e("div",he,[y(e("div",null,[t[25]||(t[25]=e("div",{class:"w-full shadow bg-gray-100 text-green-900 font-bold px-2 text-center mb-3 py-2 text-xs uppercase"}," All Request Lists ",-1)),e("div",_e,[e("div",{class:v(["appointment-lists mx-auto text-xs",_.value?"hidden":""])},[P.value?(n(),i("div",ye,t[9]||(t[9]=[E('<div class=""><div class="flex animate-pulse space-x-4"><div class="flex-1"><div class="h-10 bg-gray-300"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-200"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-300"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-200"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-300"></div><div class="h-0.5 bg-gray-100"></div><div class="h-10 bg-gray-100"></div><div class="h-0.5 bg-gray-100"></div></div></div></div>',1)]))):(n(),i("div",we,[o(B).length>0?(n(),i("div",be,[(n(!0),i(S,null,T(o(B),(s,g)=>(n(),i("div",{class:"justify-evenly items-center h-auto shadow lg:mb-0 mb-5 border-gray-200",key:g},[e("div",ke,[e("div",Ce,[e("div",$e,[e("div",Se,[e("span",Te,[t[10]||(t[10]=e("i",{class:"fa fa-user mr-2.5"},null,-1)),w(" "+r(s.incharge_lastname)+", ",1)]),e("span",Ae,r(s.incharge_firstname),1),e("span",{class:v([s.incharge_middlename==="-"?"hidden":"","mx-1"])},r(s.incharge_middlename),3)]),e("div",De,[t[11]||(t[11]=e("i",{class:"fa fa-envelope mr-1.5"},null,-1)),w(" "+r(s.incharge_contact_email),1)]),e("div",Le,[t[12]||(t[12]=e("i",{class:"fa fa-phone lg:mr-2 mr-1"},null,-1)),w(" "+r(s.incharge_contact_number),1)])]),e("div",Pe,[e("div",je,[t[13]||(t[13]=e("i",{class:"fa fa-calendar mr-2"},null,-1)),w(" "+r(s.schedule),1)]),e("div",Ne,[e("ul",Ie,[(n(!0),i(S,null,T(F(s.type_of_access),(u,m)=>(n(),i("li",{key:m,class:"border px-2 lg:py-0 py-1 text-[10px] tracking-tighter w-full whitespace-nowrap lg:text-left text-center"},r(u),1))),128))])])]),e("div",Ve,[e("div",Ue,[e("div",Me,[t[14]||(t[14]=e("label",{for:"remarks",class:"font-bold text-gray-800 mr-2.5"},"Remarks:",-1)),e("div",Oe,[y(e("input",{type:"text",class:"border-b w-full mx-auto text-xs px-1 shadow-sm","onUpdate:modelValue":u=>s.remarks=u},null,8,ze),[[R,s.remarks]])])]),e("div",Be,[t[15]||(t[15]=e("label",{for:"details",class:"font-bold text-gray-800 mr-5"},"Details:",-1)),e("div",Ee,[y(e("input",{type:"text",class:"border-b w-full mx-auto text-xs px-1 shadow-sm",placeholder:"Details","onUpdate:modelValue":u=>s.purpose=u},null,8,Ge),[[R,s.purpose]])])])])]),e("div",{class:v(["lg:w-5/12 w-full flex items-center text-left",s.attendees==="Group"?"cursor-pointer hover:bg-gray-300 hover:text-black bg-gray-200 py-1":"flex items-center py-1"])},[e("div",Re,[e("div",{class:"font-bold uppercase lg:w-full lg:mr-0 mr-6",onClick:u=>W(s.id)},[w(r(s.attendees)+" ",1),e("i",{class:v(["fa fa-caret-down text-lg ml-2",s.attendees==="Group"?"text-green-800":"hidden"])},null,2)],8,qe),e("div",Fe,[t[16]||(t[16]=w(" TID: ")),e("span",He,r(s.tracking_id),1)])]),e("div",Je,[e("a",{href:s.approved_activities_link,target:"_blank",class:v(["font-bold w-full block text-green-800",s.approved_activities_link==="-"?"hidden":""])},t[17]||(t[17]=[e("i",{class:"fa fa-file-pdf text-lg"},null,-1)]),10,Xe),e("a",{href:s.approved_gso_docs_link,target:"_blank",class:v(["font-bold w-full block text-green-800",s.approved_gso_docs_link==="-"?"hidden":""])},t[18]||(t[18]=[e("i",{class:"fa fa-file-pdf text-lg"},null,-1)]),10,Ye)])],2),e("div",{class:v(["lg:w-3/12 w-full flex items-center justify-center py-1 border-b",{"bg-red-700":s.approval_status==="declined","bg-gray-700":s.approval_status==="pending","bg-yellow-500":s.approval_status==="for revision","bg-green-900":s.approval_status==="approved"}])},[e("div",Ke,[e("div",Qe,[e("div",We,[t[20]||(t[20]=e("label",{class:"font-bold block text-white lg:mr-0 mr-2"},"Status",-1)),y(e("select",{"onUpdate:modelValue":u=>s.approval_status=u,name:"borrower_category",class:"shadow block font-bold rounded-md w-fit border pb-0.5 border-[#e5e7eb] capitalize",required:"",onChange:u=>H(s.id,s.approval_status,s.purpose,s.remarks)},t[19]||(t[19]=[e("option",{value:"pending"}," Update Data ",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"declined"},"declined",-1),e("option",{value:"for revision"}," revision ",-1)]),40,Ze),[[oe,s.approval_status]])])])])],2),e("div",et,[e("div",tt,[e("button",{onClick:u=>M(s.id),class:"text-red-500 hover:text-white hover:bg-red-500 bg-white border border-red-500 px-1.5 py-0.5 rounded-md"},t[21]||(t[21]=[e("i",{class:"fa fa-close rounded-lg uppercase","aria-hidden":"true"},null,-1)]),8,st)])])])])]))),128)),y(e("div",at,[e("div",{class:"my-[10%] bg-white w-fit mx-auto px-10 py-3 rounded-lg shadow-2xl"},[t[22]||(t[22]=e("div",{class:"my-6"}," Are you sure you want to Delete? ",-1)),e("div",{class:"flex gap-5 mx-auto w-fit my-5"},[e("span",{class:"bg-green-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:Q},"Yes"),e("span",{class:"bg-red-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:M},"Cancel")])])],512),[[j,o(b)]])])):N("",!0),o(L).length>0?(n(),i("div",lt,[e("button",{disabled:f.value===1,onClick:t[2]||(t[2]=s=>f.value--),class:"px-2 py-2 mx-1 bg-gray-200 rounded hover:bg-gray-500 hover:text-white"}," Prev ",8,it),(n(!0),i(S,null,T(o(ee),s=>(n(),i("button",{key:s,onClick:g=>f.value=s,class:v(["hover:bg-green-500 hover:text-white",{"px-4 py-2 mx-1 rounded":!0,"bg-green-800 text-white":f.value===s,"bg-gray-200":f.value!==s}])},r(s),11,ot))),128)),e("button",{disabled:f.value===o(z),onClick:t[3]||(t[3]=s=>f.value++),class:"px-2 py-2 mx-1 bg-gray-200 rounded hover:bg-gray-500 hover:text-white"}," Next ",8,rt)])):P.value?N("",!0):(n(),i("div",nt," No items found! "))]))],2),_.value?(n(),i("div",dt,[e("div",ct,[e("div",ut,[t[24]||(t[24]=e("div",{class:"text-center border-b py-2 font-bold w-full"}," List of Names ",-1)),e("div",{onClick:t[4]||(t[4]=s=>_.value=!_.value),class:"bg-gray-600 hover:bg-white hover:text-gray-600 border-b border-l text-white px-2 py-[8px]"},t[23]||(t[23]=[e("i",{class:"fa fa-close","aria-hidden":"true"},null,-1)]))]),e("div",pt,[(n(!0),i(S,null,T(U.value,(s,g)=>(n(),i("div",{key:g,class:"text-left lg:px-10 px-2 py-1 bg-gray-100 mb-0.5"},[e("div",null,r(s.lastname)+", "+r(s.firstname)+" "+r(s.middlename),1),e("div",null,r(s.email),1)]))),128))])])])):N("",!0)])],512),[[j,o(q)]])])])])]),e("div",vt,[ie(c)])])}}};export{_t as default};
