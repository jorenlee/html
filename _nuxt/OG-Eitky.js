import{_ as ie}from"./Aq-rDsau.js";import{_ as de}from"./BUYFEKv8.js";import{k as ne,l as ue,r as d,Y as H,p as me,c as r,b as A,a as t,j as m,e as $,t as h,h as l,q as pe,F as q,g as R,f as p,y as ge,v as y,d as f,X as I,o as i,x as be,n as O}from"./BI67Fsy7.js";import{s as ce}from"./DKACnJIE.js";import{X as fe}from"./CqnmsIar.js";import{h as D}from"./C5S46NFB.js";import{_ as C}from"./5JjjnmY2.js";import{_ as xe}from"./DlAUqK2U.js";const ve={class:"bg-gray-50"},he={class:""},ye={class:""},_e={class:"relative"},we={class:"pt-10 absolute top-1/2 transform -translate-y-1/2 w-full"},ke={class:"font-bold uppercase text-white lg:text-2xl text-lg w-11/12 mx-auto"},Ce={key:0,class:"text-xs lg:mb-5 bg-white w-11/12 mx-auto lg:mt-5 shadow-xl rounded-xl"},Te={class:""},Be={class:"lg:w-fit w-auto mx-auto lg:flex lg:gap-20"},De={class:"lg:w-fit mb-1"},Se={class:""},Ve={class:"mx-auto w-fit"},Ne={class:"mx-auto shadow lg:h-fit lg:my-auto border rounded-sm my-3"},Ue={class:"w-full rounded-md justify-center"},je={class:"grid lg:grid-cols-3 grid-cols-2 pr-6"},Fe=["value","id"],Le=["value"],Ae=["for"],$e={class:"lg:w-11/12 mx-auto lg:p-5"},qe={class:"lg:flex gap-2 lg:mb-3 lg:mt-0 mt-3"},Re={class:"flex lg:w-9/12 mx-auto gap-2"},ze={class:"lg:w-fit w-full mx-auto lg:mb-0 mb-2"},Me={key:0,class:"w-full lg:mb-0 mb-2"},Ye={key:0,class:"flex lg:w-full gap-2"},Pe={class:"w-full lg:mb-0 mb-2"},Ee={class:"w-full lg:mb-0 mb-2"},He={key:1,class:"lg:w-10/12 w-full lg:mb-0 mb-2"},Ie={class:"lg:shadow lg:rounded-lg lg:px-2 lg:py-3 lg:mt-0 mt-5"},Oe={key:0},Xe={class:"lg:w-6/12 mx-auto lg:my-5 flex"},Ge={class:"lg:mb-10 mb-3 lg:bg-white bg-green-700 lg:text-black text-white shadow-xl"},Je={class:"appointment-lists shadow mx-auto text-xs"},Ke={class:""},Qe={key:0,class:"header w-full bg-green-800 text-white lg:flex hidden items-center"},We={key:1,class:"w-full rows"},Ze={class:"px-2 lg:w-6/12 lg:flex items-center justify-evenly lg:border-r border-gray-200 lg:h-10 lg:mb-0 mb-2 lg:gap-0 gap-5"},et={class:"px-2 lg:w-40 flex items-center lg:justify-evenly lg:border-r border-gray-200 lg:h-10 lg:gap-0 gap-5"},tt={class:"px-2 lg:w-44 flex items-center lg:justify-evenly lg:border-r border-gray-200 lg:h-10 lg:gap-0 gap-5"},lt={class:"px-2 lg:w-32 flex items-center lg:justify-evenly lg:border-r border-gray-200 lg:h-10 lg:mb-0 mb-5 lg:gap-0 gap-5"},ot={key:0,class:"px-2 lg:w-52 lg:h-10 flex items-center justify-center gap-3"},st=["onClick"],at={key:1,class:"px-2 lg:w-52 lg:h-10 lg:mb-0 mb-3 flex items-center justify-center"},rt={key:2,class:"italic text-gray-400 text-center p-1"},it={key:1,class:"shadow-lg p-2 lg:border-0 border-t"},dt={class:"flex items-center"},nt={class:"flex items-center lg:mr-3 mt-3 font-bold justify-center bg-green-900 text-white rounded-full h-8 w-8 py-2 px-2.5 text-sm mb-2"},ut={class:"w-full lg:mb-0 mb-2"},mt=["onUpdate:modelValue"],pt={class:"lg:w-6/12 lg:mb-0 mb-2"},gt=["onUpdate:modelValue"],bt={class:"lg:w-4/12 lg:mb-0 mb-2"},ct=["onUpdate:modelValue"],ft={class:"flex items-center lg:static absolute top-3 right-0"},xt=["onClick"],vt={key:0,class:"lg:w-10/12 lg:mx-auto"},ht={key:0,class:"text-white w-full bg-red-800 text-sm px-3 py-2 rounded-md text-center"},yt={key:1,class:"lg:flex gap-10 rounded-4xl bg-white lg:px-14 px-3 py-1 w-fit mx-auto lg:my-10 shadow-sm rounded-xl"},_t={__name:"index",async setup(wt){let x,T;ne();const X=ue(),g=d(X.mainDevServer),G=["LRC Book Thru","(lrc)","Book Thru"],J=d(ce.timeSelection),z=([x,T]=H(()=>$fetch(g.value+"/api/library/schedule/booking/list/").catch(s=>s.data)),x=await x,T(),x),_=d("");let S=d([]);const K=d(new Date);let Q=d(D(new Date).format("HH:MM")),M=d(),w=d(0),V=d(!1);d([]);let N=d([]);const k=d();d(),d(!1);const n=d({date:"",time:"",updated_at:new Date}),a=d({borrower_category:"",id_number:"",firstname:"",lastname:"",email:"",books:[],booking_date:"",booking_time:"",status:"pending",created_by_email:"",updated_at:new Date});me(()=>{z.filter(function(s){S.value.push(s.date)})});let B=d(!1);d(null),d(null);const Y=async s=>{console.log("select one obj",s),s.number_of_copies&&s.number_of_copies--,a.value.books.push({book_title:s.title,book_author:s.author,book_call_number:s.call_number}),w.value--,W(s),v.value=[],_.value=""};let P=([x,T]=H(()=>$fetch(g.value+"/api/library/reports/book/list/").catch(s=>s.data)),x=await x,T(),x||0),U=d(!1),v=d([]),E=()=>{U.value=!0,setTimeout(()=>{U.value=!1},2e3),_.value.toLowerCase()!==""?v.value=P.filter(function(s){return s.title.toLowerCase().includes(_.value)}):v.value=0};const W=async s=>{let e=await $fetch(g.value+"/api/library/reports/book/"+s.id+"/").catch(u=>u.data)||0;e.number_of_copies--,console.log(e),await $fetch(g.value+"/api/library/reports/book/edit/"+s.id+"/",{method:"PUT",headers:{"Content-Type":"application/json"},body:e}).then(u=>{console.log(u)})},Z=s=>{P.filter(function(e){e.call_number===s.book_call_number&&(e.number_of_copies++,ee(e),console.log(e.number_of_copies)),a.value.books.length>2&&(C.pull(a.value.books,s),w.value++,v.value=[])})},ee=async s=>{let e=await $fetch(g.value+"/api/library/reports/book/"+s.id+"/").catch(u=>u.data)||0;e.number_of_copies++,console.log(e),await $fetch(g.value+"/api/library/reports/book/edit/"+s.id+"/",{method:"PUT",headers:{"Content-Type":"application/json"},body:e}).then(u=>{console.log(u)})},j=()=>{B.value=!0,a.value.id_number=""},te=()=>{a.value.borrower_category==="Faculty"&&(w.value=20,j()),a.value.borrower_category==="Staff"&&(w.value=20,j()),a.value.borrower_category==="Student"&&(w.value=15,j()),a.value.books=[{book_title:null,book_author:null,book_call_number:null}]},le=s=>{n.value.date=D(s).format("MM-DD-YYYY");let e=D(D().toDate()).format("MM-DD-YYYY");n.value.time=["-"],setTimeout(()=>{z.filter(function(u){u.date===n.value.date&&(M.value=u.id,n.value.time=u.time),u.date===e&&u.date===n.value.date&&(n.value.time=u.time.filter(L=>Q.value.slice(0,2)<L.range_from_time.slice(0,2)))})},100)},oe=async()=>{n.value.time.length===1?N.value=[{range_from_time:"",range_to_time:"",_12_hour_format_from:"",_12_hour_format_to:""}]:N.value=C.filter(n.value.time,function(s){return s.range_from_time!==k.value.range_from_time&&s.range_to_time!==k.value.range_to_time}),await $fetch(g.value+"/api/library/schedule/booking/"+M.value+"/edit/",{method:"PUT",headers:{"Content-Type":"application/json"},body:{date:n.value.date,time:N.value,updated_at:n.value.updated_at}}).then(s=>{console.log("response",s),re()})},se=()=>{ae()},F=d(!0),ae=async()=>{a.value.booking_date=n.value.date,a.value.booking_time=k.value._12_hour_format_from+" - "+k.value._12_hour_format_to,a.value.created_by_email=a.value.email,await $fetch(g.value+"/api/library/booking/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:a.value}).then(s=>{s.status==="errors"?(V.value=!0,setTimeout(()=>{V.value=!1},1e4)):(oe(),F.value=!1)})},re=async()=>{await $fetch(g.value+"/api/library/submit-appointment-to-gmail/",{method:"POST",headers:{"Content-Type":"application/json"},body:a.value}).then(s=>{console.log(s)})};return(s,e)=>{const u=ie,L=de;return i(),r("div",ve,[A(u),t("div",he,[t("div",ye,[t("div",_e,[e[11]||(e[11]=t("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/banners/about.jpg",class:"align-top w-full h-auto lg:object-fill lg:block hidden"},null,-1)),e[12]||(e[12]=t("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/banners/green-tones-gradient-background_23-2148374436.png",class:"align-top w-full h-36 object-none lg:hidden block"},null,-1)),t("div",we,[t("h1",ke,h(G[0]),1)]),e[13]||(e[13]=$('<div class="pt-2.5 pb-3 shadow-lg" data-v-7d597d40><div class="w-11/12 mx-auto flex justify-between" data-v-7d597d40><ul class="flex lasalle-green-text capitalize text-xs" data-v-7d597d40><li data-v-7d597d40><a href="/" class="" data-v-7d597d40> Home </a></li><li class="flex items-center" data-v-7d597d40><i class="fas fa-caret-right mx-1.5 mt-0.5" data-v-7d597d40></i><a href="/library" class="mr-1 flex" data-v-7d597d40> Library </a></li><li class="flex items-center" data-v-7d597d40><i class="fas fa-caret-right mx-1.5 mt-0.5" data-v-7d597d40></i><a href="/library/LRCBookThru" class="mr-1 flex" data-v-7d597d40><span class="lg:flex hidden ml-1" data-v-7d597d40> LRC Book Thru</span><span class="lg:hidden flex" data-v-7d597d40> LRC Book Thru</span></a></li></ul></div></div>',1))])]),l(F)?(i(),r("div",Ce,[t("div",Te,[e[40]||(e[40]=t("div",{class:"bg-green-900 py-1 mt-4 lg:mb-10 mb-4 text-base font-medium text-white text-center uppercase tracking-tight"}," Book an Appointment ",-1)),t("form",{onSubmit:pe(se,["prevent"]),class:"px-3"},[t("div",Be,[t("div",De,[t("div",Se,[e[14]||(e[14]=t("h1",{class:"font-bold lasalle-green-text text-xs text-center capitalize mb-3"}," Date ",-1)),t("div",Ve,[A(l(fe),{modelValue:l(n).date,"onUpdate:modelValue":[e[0]||(e[0]=o=>l(n).date=o),e[1]||(e[1]=o=>le(l(n).date))],inline:"","enable-time-picker":!1,name:"date","auto-apply":"",highlight:l(S),"year-range":[2025,2025],"disabled-week-days":[0,7],"week-start":"0","allowed-dates":l(S),"min-date":l(K)},null,8,["modelValue","highlight","allowed-dates","min-date"])])])]),t("div",Ne,[e[15]||(e[15]=t("h1",{class:"border-b-2 border-green-900 text-center font-bold text-green-900 lg:whitespace-nowrap capitalize pt-3 pb-3 mb-3"}," Time ",-1)),t("div",Ue,[t("ul",je,[(i(!0),r(q,null,R(l(J)[0].time,(o,b)=>(i(),r("li",{class:"flex items-center mb-3 font-semibold whitespace-nowrap lg:w-[170px] lg:text-left text-center lg:pl-6 pl-3.5",key:b},[l(C).find(l(n).time,o)?p((i(),r("input",{key:0,type:"radio",name:"time",value:o,class:"mr-2 mt-0.5","onUpdate:modelValue":e[2]||(e[2]=c=>I(k)?k.value=c:null),id:b,required:""},null,8,Fe)),[[be,l(k)]]):(i(),r("input",{key:1,type:"radio",name:"time",value:o,class:"mr-2 mt-0.5",disabled:""},null,8,Le)),t("label",{for:b,class:O(["lg:text-xs text-[10px]",l(C).find(l(n).time,o)?"text-[#087830] font-bold":" text-gray-400 font-light"])},h(o._12_hour_format_from)+" - "+h(o._12_hour_format_to),11,Ae)]))),128))])])])]),t("div",$e,[t("div",qe,[t("div",Re,[t("div",ze,[e[17]||(e[17]=t("label",{class:"text-[10px] text-gray-800"}," Borrower Category ",-1)),p(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>l(a).borrower_category=o),name:"borrower_category",class:"shadow-lg pl-2 pr-3 pt-2 pb-[6.5px] w-full border-b-2 border-green-800 capitalize",required:"",onChange:e[4]||(e[4]=o=>te())},e[16]||(e[16]=[t("option",{value:"",disabled:"",selected:"",hidden:""}," Select Borrower Category ",-1),t("option",{value:"Faculty"},"Faculty",-1),t("option",{value:"Staff"},"Staff",-1),t("option",{value:"Student"},"Student",-1)]),544),[[ge,l(a).borrower_category]])]),l(B)?(i(),r("div",Me,[e[18]||(e[18]=t("label",{class:"text-[10px] text-gray-800"}," ID Number ",-1)),p(t("input",{class:"shadow-lg px-2 py-2 text-xs w-full border-b-2 border-green-800 capitalize","onUpdate:modelValue":e[5]||(e[5]=o=>l(a).id_number=o),placeholder:"ID Number",type:"text",required:""},null,512),[[y,l(a).id_number]])])):m("",!0)]),l(B)?(i(),r("div",Ye,[t("div",Pe,[e[19]||(e[19]=t("label",{class:"text-[10px] text-gray-800"}," First Name ",-1)),p(t("input",{class:"shadow-lg text-xs px-2 py-2 w-full border-b-2 border-green-800 capitalize","onUpdate:modelValue":e[6]||(e[6]=o=>l(a).firstname=o),placeholder:"first Name",type:"text",required:""},null,512),[[y,l(a).firstname]])]),t("div",Ee,[e[20]||(e[20]=t("label",{class:"text-[10px] text-gray-800"}," Last Name ",-1)),p(t("input",{class:"shadow-lg text-xs px-2 py-2 w-full border-b-2 border-green-800 capitalize","onUpdate:modelValue":e[7]||(e[7]=o=>l(a).lastname=o),placeholder:"last Name",type:"text",required:""},null,512),[[y,l(a).lastname]])])])):m("",!0),l(B)?(i(),r("div",He,[e[21]||(e[21]=t("label",{class:"text-[10px] text-gray-800"}," Email ",-1)),p(t("input",{class:"shadow-lg text-xs px-2 py-2 w-full border-b-2 border-green-800","onUpdate:modelValue":e[8]||(e[8]=o=>l(a).email=o),placeholder:"Email",type:"email",required:""},null,512),[[y,l(a).email]])])):m("",!0)]),t("div",Ie,[e[38]||(e[38]=t("div",{class:"text-green-900 text-sm text-center lg:mb-3 tracking-tight"},[f(" Open this link "),t("a",{class:"font-bold cursor-pointer",target:"_blank",href:"https://lsu-opac.follettdestiny.com"}," OPAC "),f(" for the available resources and copy the book details in the input boxes "),t("span",{class:""}," (please select first the borrower category above)"),f(". ")],-1)),l(w)>0?(i(),r("div",Oe,[t("div",Xe,[p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>I(_)?_.value=o:null),placeholder:"Search for a Book Title ... ",class:"shadow-xl text-xs text-green-800 px-2 py-1 w-full lg:border-b-4 border-2 lg:border-b-[#225c21] border-[#225c21] lg:mb-0 mb-3"},null,512),[[y,l(_)]]),t("span",{onClick:e[10]||(e[10]=(...o)=>l(E)&&l(E)(...o)),class:"bg-green-800 hover:bg-white hover:text-green-800 text-white px-3.5 h-full lg:py-1 py-[3px] lg:mt-0 cursor-pointer border-green-800 border"},e[22]||(e[22]=[t("i",{class:"fa fa-search text-lg"},null,-1)]))]),t("div",Ge,[t("div",Je,[t("div",Ke,[l(v).length>0?(i(),r("div",Qe,e[23]||(e[23]=[$('<ul class="lg:flex w-full justify-center text-center whitespace-nowrap uppercase" data-v-7d597d40><li class="border-r border-green-700 py-2 px-1 lg:w-6/12" data-v-7d597d40> Title </li><li class="border-r border-green-700 py-2 px-1 lg:w-40" data-v-7d597d40> Author </li><li class="border-r border-green-700 py-2 px-1 lg:w-44" data-v-7d597d40> Call Number </li><li class="border-r border-green-700 py-2 px-1 lg:w-32" data-v-7d597d40> Remaining Copies </li><li class="py-2 px-1 lg:w-52" data-v-7d597d40>Status</li></ul>',1)]))):m("",!0),l(v).length>0?(i(),r("div",We,[(i(!0),r(q,null,R(l(C).orderBy(l(v),"id","asc"),(o,b)=>(i(),r("ul",{class:O(["lg:flex w-full justify-center lg:text-center h-auto border-b border-gray-100 lg:py-0 py-5",b%2?"lg:bg-gray-100":""]),key:b},[t("li",Ze,[e[24]||(e[24]=t("span",{class:"font-bold lg:hidden"},"Title:",-1)),f(" "+h(o.title),1)]),t("li",et,[e[25]||(e[25]=t("span",{class:"font-bold lg:hidden"},"Author:",-1)),f(h(o.author),1)]),t("li",tt,[e[26]||(e[26]=t("span",{class:"font-bold lg:hidden"},"Call Number:",-1)),f(h(o.call_number),1)]),t("li",lt,[e[27]||(e[27]=t("span",{class:"font-bold lg:hidden"},"Number of Copies:",-1)),f(h(o.number_of_copies),1)]),o.number_of_copies>0?(i(),r("li",ot,[e[28]||(e[28]=t("span",{class:"bg-green-500 text-white font-bold px-2 py-1 lg:border-0 border-white border"},"Available",-1)),t("span",{onClick:c=>Y(o),class:"bg-yellow-500 text-white hover:bg-yellow-700 hover:white font-bold px-2 py-1 rounded-xl uppercase shadow-lg cursor-pointer text-[10px]"}," + Add to Lists ",8,st)])):m("",!0),o.number_of_copies===0?(i(),r("li",at,e[29]||(e[29]=[t("span",{class:"bg-red-500 text-white font-bold px-2 py-1 whitespace-nowrap border border-white"},"Not Available",-1)]))):m("",!0)],2))),128))])):m("",!0),l(v).length===0&&l(_)!==""&&l(U)?(i(),r("div",rt," No Results Found! ")):m("",!0)])])])])):m("",!0),l(a).books.length>0?(i(),r("div",it,[e[37]||(e[37]=t("div",null,[t("p",{class:"text-center mb-3 text-green-800 py-2 font-bold"}," Final Lists of Books to be Borrowed: ")],-1)),(i(!0),r(q,null,R(l(a).books,(o,b)=>(i(),r("div",{class:"lg:flex lg:shadow lg:p-5 gap-2 mb-3 relative",key:b},[t("div",dt,[e[30]||(e[30]=t("div",{class:"mr-2 lg:hidden block mt-1"},"Book",-1)),t("div",nt,h(b+1),1)]),t("div",ut,[e[31]||(e[31]=t("label",{class:"text-[10px] text-gray-800"}," Book Title ",-1)),p(t("input",{class:"shadow-lg px-2 py-2 text-xs w-full border-b-2 border-[#225c21] capitalize","onUpdate:modelValue":c=>o.book_title=c,placeholder:"book title",type:"text",required:""},null,8,mt),[[y,o.book_title]])]),t("div",pt,[e[32]||(e[32]=t("label",{class:"text-[10px] text-gray-800"}," Book Author ",-1)),p(t("input",{class:"shadow-lg px-2 py-2 text-xs w-full border-b-2 border-[#225c21] capitalize","onUpdate:modelValue":c=>o.book_author=c,placeholder:"book author",type:"text",required:""},null,8,gt),[[y,o.book_author]])]),t("div",bt,[e[33]||(e[33]=t("label",{class:"text-[10px] text-gray-800"}," Book Call Number ",-1)),p(t("input",{class:"shadow-lg px-2 py-2 text-xs w-full border-b-2 border-[#225c21] capitalize","onUpdate:modelValue":c=>o.book_call_number=c,placeholder:"book call number",type:"text",required:""},null,8,ct),[[y,o.book_call_number]])]),t("div",ft,[e[35]||(e[35]=t("div",{class:"mr-2 lg:hidden block"},"Remove",-1)),t("div",{class:"flex items-center lg:ml-5 lg:mt-5 justify-center hover:bg-white bg-red-900 border border-red-900 hover:text-red-900 text-white rounded-full h-8 w-8 pt-2 pb-1.5 px-2.5 text-sm",onClick:c=>Z(o)},e[34]||(e[34]=[t("i",{class:"fa fa-close"},null,-1)]),8,xt)])]))),128)),l(w)>0?(i(),r("div",vt,[t("div",{class:"hover:text-[#f4ca16] border border-[#f4ca16] text-white cursor-pointer w-fit mb-3 hover:bg-white bg-[#f4ca16] font-bold uppercase text-xs rounded-md px-3 py-2 text-center lg:-ml-2",onClick:Y},e[36]||(e[36]=[t("i",{class:"fa fa-plus mr-1"},null,-1),f(" Add Book ")]))])):m("",!0)])):m("",!0)]),l(V)?(i(),r("div",ht," Date and Time and other fields are required! ")):m("",!0),e[39]||(e[39]=t("div",{class:"mt-5 mb-3 w-fit lg:mx-auto mx-auto"},[t("button",{class:"hover:text-green-800 border border-green-800 text-white hover:bg-white bg-green-800 uppercase text-xs rounded-md w-fit mx-auto px-5 py-2 text-center font-bold lg:mb-0 mb-5"},[f(" Submit "),t("i",{class:"fa fa-paper-plane","aria-hidden":"true"})])],-1))])],32)])])):m("",!0),l(F)?m("",!0):(i(),r("div",yt,e[41]||(e[41]=[$('<div class="flex items-center" data-v-7d597d40><img src="https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/icons/check-mark-icon-isolated-on-white-background-vector-26464923.jpg" class="lg:w-44 w-20 mx-auto lg:mt-0 mt-14" data-v-7d597d40></div><div class="text-xl text-green-900 text-center w-fit mx-auto lg:py-20 py-5" data-v-7d597d40><h1 class="font-bold text-3xl" data-v-7d597d40>Thanks for submitting!</h1><p class="font-light pt-3 pb-10" data-v-7d597d40> your appointment request has been sent! </p><p class="font-light italic mb-10" data-v-7d597d40>Please Check your Email.</p><a href="https://lsu.edu.ph/library" class="bg-green-800 text-white rounded-3xl py-1.5 px-10 lg:mb-0 mb-5 mx-auto block w-fit" data-v-7d597d40>Go Back to LRC</a></div>',2)])))]),e[42]||(e[42]=t("div",null,null,-1)),e[43]||(e[43]=t("div",null,[t("div",{id:"fb-root"}),t("div",{id:"fb-customer-chat-library",class:"fb-customerchat"})],-1)),A(L)])}}},Ut=xe(_t,[["__scopeId","data-v-7d597d40"]]);export{Ut as default};
