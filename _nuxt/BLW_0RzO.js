import{N as p,r as _,I as m,h as u,c as n,a as d,F as f,f as h,o as s,M as g,j as l,t as y}from"#entry";const v={class:"viewer-container"},k={class:"canvas relative w-full h-screen"},w={key:0,class:"cms-text"},N=["src"],A=["src"],B="http://127.0.0.1:8000",M={__name:"[id]",setup(x){const i=p().params.id,r=_([]),a=m(()=>r.value.filter(o=>o.page_route_link_belong===i));return u(async()=>{try{const o=await fetch(`${B}/api/cms/boxes/`);if(!o.ok){r.value=[];return}const c=await o.json(),e=Array.isArray(c?.boxes)?c.boxes:[];r.value=e.map(t=>({cms_id:t.cms_id||"",component_width:Number(t.component_width)||240,component_height:Number(t.component_height)||180,component_top:Number(t.component_top)||0,component_left:Number(t.component_left)||0,component_type:t.component_type||"text",component_content:t.component_content||"",component_properties:t.component_properties||{},file_url:Array.isArray(t.file_url)?t.file_url:t.file_url?[{url:t.file_url}]:[],page_route_link_belong:t.page_route_link_belong||""}))}catch(o){console.error("Failed to load CMS boxes:",o),r.value=[]}}),(o,c)=>(s(),n("div",v,[d("div",k,[(s(!0),n(f,null,h(a.value,e=>(s(),n("div",{key:e.cms_id,class:"cms-box",style:g({width:(e.component_width||240)+"px",height:(e.component_height||180)+"px",top:(e.component_top||0)+"px",left:(e.component_left||0)+"px",position:"absolute"})},[e.component_type==="text"?(s(),n("div",w,y(e.component_content),1)):l("",!0),["image","image_link"].includes(e.component_type)&&e.file_url.length&&e.file_url[0].url?(s(),n("img",{key:1,src:e.file_url[0].url,class:"cms-image"},null,8,N)):l("",!0),e.component_type==="video"&&e.component_properties?.videoEmbed?(s(),n("iframe",{key:2,src:e.component_properties.videoEmbed,class:"w-full h-full",frameborder:"0",allowfullscreen:""},null,8,A)):l("",!0)],4))),128))])]))}};export{M as default};
