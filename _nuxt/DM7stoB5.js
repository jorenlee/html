import{_ as F}from"./DQCpWnlr.js";import{e as H,u as W,r,g as Y,c as d,a as e,h,v as b,f as c,i as J,t as o,j as A,n as v,k as N,F as C,l as T,b as K,o as u,d as g,m as j,p as Q}from"./dUq-t-_n.js";import"./C5S46NFB.js";import{_ as X}from"./5JjjnmY2.js";import{_ as Z}from"./DlAUqK2U.js";const ee={class:"lg:flex min-h-screen"},te={class:"pb-3 lg:w-3/12 bg-gray-100 z-10 w-full lg:block lg:static absolute"},se={class:"flex items-center justify-center text-white bg-green-900 lg:py-[16px] py-[8px]"},ae={class:"flex items-center w-full px-2"},le={class:"text-sm"},oe={class:"w-full"},ie={class:"bg-green-800"},ne={class:"flex mx-auto justify-between py-2 px-3.5"},re={class:"w-full lg:p-5 px-2 py-2"},de={class:"relative"},ce={class:""},ue={key:0,class:"gap-4"},pe={class:"w-full"},ve={class:"flex"},fe={class:"w-[250px] border block text-left px-2"},me={class:"w-full px-2 py-0.5"},he={class:""},xe={class:"w-full px-2 py-0.5 border-b"},ge={class:"px-2 py-0.5"},_e={class:"w-[100px] flex items-center justify-center uppercase"},we={class:"gap-x-0.5 w-full"},be={class:"w-[270px] border font-bold py-1 px-2 flex items-center"},ye={class:"w-[300px] border flex items-center py-1"},ke={class:"w-full"},Ce={class:"flex items-center w-11/12 mx-auto mb-1"},Te={class:"flex w-full"},$e=["onUpdate:modelValue","onChange"],Se=["onClick"],De={class:"flex items-center w-11/12 mx-auto"},Ae={class:"flex w-full"},Ne=["onUpdate:modelValue"],je={class:"flex w-full"},Pe={class:"w-fit mx-auto py-1 flex items-center"},Le={class:"items-center w-full"},Ue=["onUpdate:modelValue","onChange"],Ve={class:"w-full"},ze={class:"w-full mx-2"},Re=["href"],Ie=["href"],Me={class:"w-full"},Ge=["onClick"],Be={class:"mb-3 text-[10px] font-light whitespace-nowrap"},Ee={class:""},Oe={class:"flex px-2 font-bold w-full"},qe={class:"mx-auto lg:flex justify-center text-white items-center"},Fe=["onClick"],He={class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#ffffff59] w-full h-screen flex items-center"},We={class:"w-fit mx-auto flex items-center shadow-2xl border-2 rounded-lg py-2 bg-white"},Ye={class:"flex items-center"},Je={class:"flex gap-10 mr-10"},Ke={class:"px-5 rounded-lg bg-white shadow-2xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},Qe={key:0,class:"italic text-gray-400 text-center p-1 h-screen"},Xe={key:0,class:"w-full z-10 bg-white h-full"},Ze={class:"border-4 border-gray-100 shadow-lg"},et={class:"flex items-center"},tt={class:"lg:grid grid-cols-4 lg:gap-x-3 lg:text-sm text-xs"},st={class:"static bottom-0 w-full"},at={__name:"index",setup(lt){const y=H(),m=W(),p=r(m.mainDevServer),f=r(0);let $=r();r();let P=r(!0),i=r(!1),_=r(!1);const L=r(!1),a=r(null),x=r(!1),S=r([]);Y(()=>{setTimeout(async()=>{m.user.isAuthenticated&&(m.user.email==="jorenleeluna24@gmail.com"||m.user.email==="esmael.larubis@lsu.edu.ph")?(f.value=await $fetch(p.value+"/api/campus-pass/list").catch(l=>l.data)||0,y.push("/_/panels/campus-security"),console.log(f.value)):y.push("/_/unauthorized")},5e3)});const U=async(l,t)=>{a.value=await $fetch(p.value+"/api/campus-pass/"+l+"/").catch(w=>w.data),a.value.approval_status=t,console.log(a.value),R(l)},V=async(l,t)=>{a.value=await $fetch(p.value+"/api/campus-pass/"+l+"/").catch(w=>w.data),a.value.remarks=t,console.log(a.value)},z=async l=>{a.value.remarks===""||a.value.remarks===null?a.value.remarks="N/A":await $fetch(p.value+"/api/campus-pass/"+l+"/edit/",{method:"PUT",body:a.value}).then(t=>{console.log("response",t),console.log(a.value)})},R=async l=>{await $fetch(p.value+"/api/campus-pass/"+l+"/edit/",{method:"PUT",body:a.value}).then(t=>{console.log("response",t),console.log(a.value),a.value.approval_status==="approved"&&I(),a.value.approval_status==="declined"&&M(),a.value.approval_status==="for revision"&&G()})},I=async()=>{await $fetch(p.value+"/api/campus-pass/to-gmail-approved/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks,tracking_id:a.value.tracking_id}}).then(l=>{console.log(l)})},M=async()=>{await $fetch(p.value+"/api/campus-pass/to-gmail-declined/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks,tracking_id:a.value.tracking_id}}).then(l=>{console.log(l)})},G=async()=>{await $fetch(p.value+"/api/campus-pass/to-gmail-for-revision/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks,tracking_id:a.value.tracking_id}}).then(l=>{console.log(l)})},D=l=>{_.value=!_.value,$.value=l},B=async()=>{await $fetch(p.value+"/api/campus-pass/"+$.value+"/delete/",{method:"DELETE",headers:{Authorization:m.user.token,"Content-Type":"application/json"}}).then(async l=>{console.log("response",l),f.value=await $fetch(p.value+"/api/campus-pass/list").catch(t=>t.data)||0,_.value=!_.value})},E=l=>{f.value.filter(function(t){l===t.id&&(console.log(t),S.value=t.name_list,x.value=!x.value)})},O=()=>{m.removeToken(),y.push("/_/campus-pass-admin")};return(l,t)=>{const w=F;return u(),d("div",null,[e("div",ee,[h(e("div",te,[e("div",se,[e("div",ae,[t[5]||(t[5]=e("i",{class:"fa fa-user mx-2","aria-hidden":"true"},null,-1)),e("h1",le,o(c(m).user.email),1)]),e("div",{onClick:t[0]||(t[0]=s=>A(i)?i.value=!c(i):i=!c(i)),class:"w-10 px-1.5 lg:hidden flex"},[e("i",{class:v(["fa text-3xl text-white",c(i)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)])]),t[6]||(t[6]=J('<div class="" data-v-80789d83><div class="w-fit mx-auto mt-5 mb-3" data-v-80789d83><img src="https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/logos/LSU_Seal.PNG" class="lg:w-24 w-20 mx-auto" data-v-80789d83></div><div class="text-center" data-v-80789d83><h1 class="font-bold text-green-800 text-2xl" data-v-80789d83>Dashboard</h1></div><div class="mx-auto mt-10 mb-5 grid grid-cols-1" data-v-80789d83><a href="/_/panels/campus-security" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-black hover:bg-black hover:text-white" data-v-80789d83><i class="fa fa-list mr-3" aria-hidden="true" data-v-80789d83></i> All Request Lists </a><a href="/_/panels/campus-security/pending" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-gray-900 hover:bg-gray-900 hover:text-white" data-v-80789d83><i class="fa fa-clock mr-0.5" aria-hidden="true" data-v-80789d83></i> Pending </a><a href="/_/panels/campus-security/declined" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-red-900 hover:bg-red-900 hover:text-white" data-v-80789d83><i class="fa fa-ban mr-0.5" aria-hidden="true" data-v-80789d83></i> Declined </a><a href="/_/panels/campus-security/inprogress" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-yellow-600 hover:bg-yellow-600 hover:text-white" data-v-80789d83><i class="fa fa-adjust mr-0.5" aria-hidden="true" data-v-80789d83></i> In Progress </a><a href="/_/panels/campus-security/approved" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white" data-v-80789d83><i class="fa fa-check" aria-hidden="true" data-v-80789d83></i> Approved </a><a href="/" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white" data-v-80789d83><i class="fa fa-globe mr-3" aria-hidden="true" data-v-80789d83></i> LSU HOME PAGE </a></div></div>',1))],512),[[b,c(i)]]),e("div",oe,[e("div",ie,[e("div",ne,[e("div",{onClick:t[1]||(t[1]=s=>A(i)?i.value=!c(i):i=!c(i)),class:"w-10 px-1.5"},[e("i",{class:v(["fa text-3xl text-white",c(i)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)]),e("button",{onClick:O,class:"flex hover:font-bold pt-1"},t[7]||(t[7]=[e("i",{class:"fa fa-sign-out text-white text-xl"},null,-1),e("h1",{class:"text-xs text-white p-1.5"},"Log Out",-1)]))])]),e("div",null,[e("div",re,[h(e("div",null,[t[25]||(t[25]=e("div",{class:"w-full shadow bg-gray-100 text-green-900 font-bold px-2 text-center mb-3 py-2 text-xs uppercase"}," All Request Lists ",-1)),e("div",de,[e("div",{class:v(["appointment-lists mx-auto text-xs",x.value?"hidden":""])},[e("div",ce,[f.value.length>0?(u(),d("div",ue,[(u(!0),d(C,null,T(c(X).orderBy(f.value,"id","asc"),(s,k)=>(u(),d("div",{class:"justify-evenly items-center h-auto border border-gray-200 shadow mb-5",key:k},[e("div",pe,[e("div",ve,[e("div",fe,[e("div",me,[e("span",he,[t[8]||(t[8]=e("i",{class:"fa fa-user mr-2"},null,-1)),g(" "+o(s.incharge_firstname),1)]),e("span",{class:v([{hidden:s.incharge_middlename==="-",hidden:s.incharge_middlename==="n/a",hidden:s.incharge_middlename==="N/A",hidden:s.incharge_middlename===""},"mx-1"])},o(s.incharge_middlename),3),e("span",null,o(s.incharge_lastname),1)]),e("div",xe,[t[9]||(t[9]=e("i",{class:"fa fa-envelope mr-2"},null,-1)),g(" "+o(s.incharge_contact_email),1)]),e("div",ge,[t[10]||(t[10]=e("i",{class:"fa fa-phone mr-2"},null,-1)),g(" "+o(s.incharge_contact_number),1)])]),e("div",_e,[e("ul",we,[(u(!0),d(C,null,T(s.type_of_access,(n,q)=>(u(),d("li",{key:q,class:"shadow px-2 py-0.5 text-[10px] tracking-tighter w-full whitespace-nowrap"},o(n),1))),128))])]),e("div",be,[t[11]||(t[11]=e("i",{class:"fa fa-calendar mr-2"},null,-1)),g(" "+o(s.schedule),1)]),e("div",ye,[e("div",ke,[e("div",Ce,[t[13]||(t[13]=e("label",{for:"remarks",class:"font-bold text-gray-800 mr-2.5"},"Remarks:",-1)),e("div",Te,[h(e("input",{type:"text",class:"border w-full mx-auto py-1 px-1 shadow-sm","onUpdate:modelValue":n=>s.remarks=n,onChange:n=>V(s.id,s.remarks)},null,40,$e),[[j,s.remarks]]),e("button",{onClick:n=>z(s.id),class:"flex text-green-500 hover:text-white hover:bg-green-500 bg-white border border-green-500 px-1 py-1.5"},t[12]||(t[12]=[e("i",{class:"fa fa-save rounded-lg uppercase","aria-hidden":"true"},null,-1)]),8,Se)])]),e("div",De,[t[14]||(t[14]=e("label",{for:"purpose",class:"font-bold text-gray-800 mr-3"},"Purpose:",-1)),e("div",Ae,[h(e("input",{type:"text",class:"border w-full mx-auto py-1 px-1 shadow-sm",placeholder:"Purpose","onUpdate:modelValue":n=>s.purpose=n},null,8,Ne),[[j,s.purpose]])])])])]),e("div",{class:v(["w-[110px] border flex items-center justify-center",{"bg-red-700":s.approval_status==="declined","bg-gray-700":s.approval_status==="pending","bg-yellow-500":s.approval_status==="for revision","bg-green-900":s.approval_status==="approved"}])},[e("div",je,[e("div",Pe,[e("div",Le,[t[16]||(t[16]=e("label",{class:"font-bold block text-white"},"Status:",-1)),h(e("select",{"onUpdate:modelValue":n=>s.approval_status=n,name:"borrower_category",class:"shadow block font-bold rounded-md w-fit border pb-0.5 border-[#e5e7eb] capitalize",required:"",onChange:n=>U(s.id,s.approval_status)},t[15]||(t[15]=[e("option",{value:"approved"},"approved",-1),e("option",{value:"declined"},"declined",-1),e("option",{value:"pending"},"pending",-1),e("option",{value:"for revision"}," for revision ",-1)]),40,Ue),[[Q,s.approval_status]])])])])],2),e("div",{class:v(["w-[200px] border flex items-center justify-center relative",s.attendees==="Group"?"pt-[7px] cursor-pointer hover:bg-gray-300 hover:text-black bg-gray-200":"pt-[14px] "])},[e("div",Ve,[e("div",ze,[e("a",{href:s.approved_activities_link,target:"_blank",class:v(["font-bold w-full block text-green-800",s.approved_activities_link==="-"?"hidden":""])},t[17]||(t[17]=[e("i",{class:"fa fa-file-pdf text-lg"},null,-1)]),10,Re),e("a",{href:s.approved_gso_docs_link,target:"_blank",class:v(["font-bold w-full block text-green-800",s.approved_gso_docs_link==="-"?"hidden":""])},t[18]||(t[18]=[e("i",{class:"fa fa-soccer-ball text-lg"},null,-1)]),10,Ie)])]),e("div",Me,[e("div",{class:"font-bold uppercase w-full",onClick:n=>E(s.id)},[g(o(s.attendees)+" ",1),e("i",{class:v(["fa fa-caret-down text-lg ml-2 -mt-[1px] h-[0px]",s.attendees==="Group"?"text-green-800":"hidden"])},null,2)],8,Ge),e("div",Be,[t[19]||(t[19]=g(" TID: ")),e("span",Ee,o(s.tracking_id),1)])]),e("div",Oe,[e("div",qe,[e("button",{onClick:n=>D(s.id),class:"text-red-500 hover:text-white hover:bg-red-500 bg-white border border-red-500 px-1.5 py-0.5 rounded-md"},t[20]||(t[20]=[e("i",{class:"fa fa-close rounded-lg uppercase","aria-hidden":"true"},null,-1)]),8,Fe)])])],2)])])]))),128)),h(e("div",He,[e("div",We,[e("div",Ye,[t[21]||(t[21]=e("div",{class:"font-bold pl-5 pr-10"}," Confirm Remarks: ",-1)),e("div",Je,[e("span",{class:"px-3 uppercase py-1 rounded-lg bg-green-900 border hover:border-green-900 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:t[2]||(t[2]=(...s)=>l.btnConfirm&&l.btnConfirm(...s))},"yes"),e("span",{class:"px-3 uppercase py-1 rounded-lg bg-red-700 border hover:border-red-700 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:t[3]||(t[3]=(...s)=>l.btnCloseModal&&l.btnCloseModal(...s))},"no")])])])],512),[[b,L.value]]),h(e("div",Ke,[t[22]||(t[22]=e("div",{class:"my-6"},"Are you sure you want to Delete?",-1)),e("div",{class:"flex gap-5 mx-auto w-fit my-5"},[e("span",{class:"bg-green-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:B},"Yes"),e("span",{class:"bg-red-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:D},"Cancel")])],512),[[b,c(_)]])])):N("",!0)]),f.value.length===0?(u(),d("div",Qe," Please Wait ... ")):(u(),d("div",{key:1,class:v(["italic text-gray-400 text-center p-1 h-screen",f.value.length>0?"hidden":""])}," No Results Found! ",2))],2),x.value?(u(),d("div",Xe,[e("div",Ze,[e("div",et,[t[24]||(t[24]=e("div",{class:"text-center border-b py-2 font-bold w-full"}," List of Names ",-1)),e("div",{onClick:t[4]||(t[4]=s=>x.value=!x.value),class:"bg-gray-600 hover:bg-white hover:text-gray-600 border-b border-l text-white px-2 py-[8px]"},t[23]||(t[23]=[e("i",{class:"fa fa-close","aria-hidden":"true"},null,-1)]))]),e("div",tt,[(u(!0),d(C,null,T(S.value,(s,k)=>(u(),d("div",{key:k,class:"text-left lg:px-10 px-2 py-1 bg-gray-100 mb-0.5"},[e("div",null,o(s.lastname)+", "+o(s.firstname)+" "+o(s.middlename),1),e("div",null,o(s.email),1)]))),128))])])])):N("",!0)])],512),[[b,c(P)]])])])])]),e("div",st,[K(w)])])}}},ct=Z(at,[["__scopeId","data-v-80789d83"]]);export{ct as default};
