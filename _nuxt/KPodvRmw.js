import{_ as te}from"./By4zltgk.js";import{_ as oe}from"./SQsT4ztc.js";import{u as le,g as ae,r as i,q as se,h as re,c as n,b as U,a as e,t as y,k as ie,f as o,F as M,s as R,i as u,y as de,l as p,z as k,d as f,x as ne,o as c,A as ce,j as ue,n as me,p as _e,e as be}from"./gMSlb7nw.js";import{s as pe}from"./mLt1cZes.js";import{X as he}from"./KnUDrC1r.js";import{h as S}from"./C5S46NFB.js";import{_ as C}from"./vUEbHlag.js";import{_ as ge}from"./DlAUqK2U.js";import"./Cpj98o6Y.js";const a=x=>(_e("data-v-e4e96235"),x=x(),be(),x),fe={class:"bg-gray-50"},xe={class:""},ve={class:""},we={class:"relative"},ye=a(()=>e("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/banners/about.jpg",class:"align-top w-full h-auto lg:object-fill lg:block hidden"},null,-1)),ke=a(()=>e("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/banners/green-tones-gradient-background_23-2148374436.png",class:"align-top w-full h-36 object-none lg:hidden block"},null,-1)),Se={class:"pt-10 absolute top-1/2 transform -translate-y-1/2 w-full"},Ce={class:"font-bold uppercase text-white lg:text-2xl text-lg w-11/12 mx-auto"},De=ne('<div class="pt-2.5 pb-3 shadow-lg" data-v-e4e96235><div class="w-11/12 mx-auto flex justify-between" data-v-e4e96235><ul class="flex lasalle-green-text capitalize text-xs" data-v-e4e96235><li data-v-e4e96235><a href="/" class="" data-v-e4e96235> Home </a></li><li class="flex items-center" data-v-e4e96235><i class="fas fa-caret-right mx-1.5 mt-0.5" data-v-e4e96235></i><a href="/library" class="mr-1 flex" data-v-e4e96235> Library </a></li><li class="flex items-center" data-v-e4e96235><i class="fas fa-caret-right mx-1.5 mt-0.5" data-v-e4e96235></i><a href="/library/LRCBookThru" class="mr-1 flex" data-v-e4e96235><span class="lg:flex hidden ml-1" data-v-e4e96235> LRC Book Thru</span><span class="lg:hidden flex" data-v-e4e96235> LRC Book Thru</span></a></li></ul></div></div>',1),Te={class:"text-xs lg:mb-5 bg-white w-11/12 mx-auto lg:mt-5 shadow-xl rounded-xl"},Ve={class:""},Be=a(()=>e("div",{class:"bg-green-900 py-1 mt-4 lg:mb-10 mb-4 text-base font-medium text-white text-center uppercase tracking-tight"}," Book an Appointment ",-1)),Ne={class:"lg:w-fit w-auto mx-auto lg:flex lg:gap-20"},Ue={class:"lg:w-fit mb-1"},je={class:""},qe=a(()=>e("h1",{class:"font-bold lasalle-green-text text-xs text-center capitalize mb-3"}," Date ",-1)),ze={class:"mx-auto w-fit"},Le={class:"mx-auto shadow lg:h-fit lg:my-auto border rounded-sm my-3"},Me=a(()=>e("h1",{class:"border-b-2 border-green-900 text-center font-bold text-green-900 lg:whitespace-nowrap capitalize pt-3 pb-3 mb-3"}," Time ",-1)),Re={class:"w-full rounded-md justify-center"},Fe={class:"grid lg:grid-cols-3 grid-cols-2 pr-6"},Ae=["value","id"],Ie=["value"],Ye=["for"],$e={class:"lg:w-10/12 mx-auto lg:p-5"},He={class:"flex gap-2 lg:mb-3 lg:mt-0 mt-3"},Oe={class:"lg:w-fit w-[170px] lg:mb-0 mb-2"},Pe=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Borrower Category ",-1)),Ee=a(()=>e("option",{value:"",disabled:"",selected:"",hidden:""}," Select Borrower Category ",-1)),Xe=a(()=>e("option",{value:"Faculty"},"Faculty",-1)),Ge=a(()=>e("option",{value:"Staff"},"Staff",-1)),Je=a(()=>e("option",{value:"Student"},"Student",-1)),Ke=[Ee,Xe,Ge,Je],Qe={key:0,class:"lg:w-3/12 w-full lg:mb-0 mb-2"},We=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," ID Number ",-1)),Ze={class:"lg:flex gap-2 lg:mb-3"},et={class:"w-full lg:mb-0 mb-2"},tt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," First Name ",-1)),ot={class:"w-full lg:mb-0 mb-2"},lt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Last Name ",-1)),at={class:"w-full lg:mb-0 mb-2"},st=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Email ",-1)),rt={class:"shadow rounded-lg px-2 py-3"},it=a(()=>e("div",{class:"text-green-900 text-sm text-center lg:mb-3 px-3"},[f(" Open this link "),e("a",{class:"font-bold cursor-pointer",target:"_blank",href:"http://203.177.51.122:443/common/servlet/presenthomeform.do?l2m=Home&tm=Home"}," OPAC "),f(" for the available resources and copy the book details in the input boxes "),e("span",{class:""}," (please select first the borrower category above)"),f(". ")],-1)),dt={class:"flex items-center"},nt=a(()=>e("div",{class:"mr-2 lg:hidden block mt-1"},"Book",-1)),ct={class:"flex items-center lg:mr-3 mt-3 font-bold justify-center bg-green-900 text-white rounded-full h-8 w-8 py-2 px-2.5 text-sm mb-2"},ut={class:"w-full lg:mb-0 mb-2"},mt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Book Title ",-1)),_t=["onUpdate:modelValue"],bt={class:"w-full lg:mb-0 mb-2"},pt=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Book Author ",-1)),ht=["onUpdate:modelValue"],gt={class:"w-full lg:mb-0 mb-2"},ft=a(()=>e("label",{class:"text-[10px] text-gray-300 lg:block hidden"}," Book Call Number ",-1)),xt=["onUpdate:modelValue"],vt={key:0,class:"flex items-center lg:static absolute top-3 right-0"},wt=a(()=>e("div",{class:"mr-2 lg:hidden block"},"Remove",-1)),yt=["onClick"],kt=a(()=>e("i",{class:"fa fa-close"},null,-1)),St=[kt],Ct={class:"lg:w-10/12 lg:mx-auto"},Dt=a(()=>e("i",{class:"fa fa-plus mr-1"},null,-1)),Tt={key:0,class:"text-white w-full bg-red-800 text-sm px-3 py-2 rounded-md text-center"},Vt=a(()=>e("div",{class:"mt-5 mb-3 w-fit lg:mx-auto mr-0 ml-auto"},[e("button",{class:"hover:text-green-800 border border-green-800 text-white hover:bg-white bg-green-800 uppercase text-xs rounded-md w-fit mx-auto px-5 py-2 text-center font-bold lg:mb-0 mb-5"},[f(" Submit "),e("i",{class:"fa fa-paper-plane","aria-hidden":"true"})])],-1)),Bt=a(()=>e("div",null,null,-1)),Nt=a(()=>e("div",null,[e("div",{id:"fb-root"}),e("div",{id:"fb-customer-chat-library",class:"fb-customerchat"})],-1)),Ut={__name:"index",async setup(x){let v,j;const F=le(),A=ae(),w=i(A.mainServer),I=["LRC Book Thru","(lrc)","Book Thru"],Y=i(pe.timeSelection),q=([v,j]=se(()=>$fetch(w.value+"/api/library/schedule/booking/list/").catch(r=>r.data)),v=await v,j(),v);let D=i([]);const $=i(new Date);let H=i(S(new Date).format("HH:MM")),z=i(),h=i(0),O=i(""),P=i(""),E=i(""),T=i(!1);i([]);let V=i([]);const b=i();i();const d=i({date:"",time:"",updated_at:new Date}),l=i({borrower_category:"",id_number:"",firstname:"",lastname:"",email:"",books:[],booking_date:"",booking_time:"",status:"pending",created_by_email:"",updated_at:new Date});re(()=>{q.filter(function(r){D.value.push(r.date)})});let L=i(!1);const X=()=>{l.value.books.push({book_title:O.value,book_author:P.value,book_call_number:E.value}),h.value--},G=r=>{l.value.books.length>1&&(C.pull(l.value.books,r),h.value++)},B=()=>{L.value=!0,l.value.id_number=""},J=()=>{l.value.borrower_category==="Faculty"&&(h.value=20,B()),l.value.borrower_category==="Staff"&&(h.value=20,B()),l.value.borrower_category==="Student"&&(h.value=15,B()),l.value.books=[{book_title:null,book_author:null,book_call_number:null}]},K=r=>{d.value.date=S(r).format("MM-DD-YYYY");let s=S(S().toDate()).format("MM-DD-YYYY");d.value.time=["-"],setTimeout(()=>{q.filter(function(m){m.date===d.value.date&&(z.value=m.id,d.value.time=m.time),m.date===s&&m.date===d.value.date&&(d.value.time=m.time.filter(N=>H.value.slice(0,2)<N.range_from_time.slice(0,2)))})},100)},Q=async()=>{d.value.time.length===1?V.value=[{range_from_time:"",range_to_time:"",_12_hour_format_from:"",_12_hour_format_to:""}]:V.value=C.filter(d.value.time,function(r){return r.range_from_time!==b.value.range_from_time&&r.range_to_time!==b.value.range_to_time}),await $fetch(w.value+"/api/library/schedule/booking/"+z.value+"/edit/",{method:"PUT",headers:{"Content-Type":"application/json"},body:{date:d.value.date,time:V.value,updated_at:d.value.updated_at}}).then(r=>{console.log("response",r)})},W=()=>{Z(),ee()},Z=async()=>{console.log("submitForm"),l.value.booking_date=d.value.date,l.value.booking_time=b.value._12_hour_format_from+" - "+b.value._12_hour_format_to,l.value.created_by_email=l.value.email,await $fetch(w.value+"/api/library/booking/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:l.value}).then(r=>{r.status==="errors"?(console.log("response.status",r.status),console.log("response.errors",r.errors),T.value=!0,setTimeout(()=>{T.value=!1},1e4)):(Q(),F.push({path:"/library/LRCBookThru/ConfirmationPage"}))})},ee=async()=>{await $fetch(w.value+"/api/library/submit-appointment-to-gmail/",{method:"POST",headers:{"Content-Type":"application/json"},body:l.value}).then(r=>{})};return(r,s)=>{const m=te,N=oe;return c(),n("div",fe,[U(m),e("div",xe,[e("div",ve,[e("div",we,[ye,ke,e("div",Se,[e("h1",Ce,y(I[0]),1)]),De])]),e("div",Te,[e("div",Ve,[Be,e("form",{onSubmit:ie(W,["prevent"]),class:"px-3"},[e("div",Ne,[e("div",Ue,[e("div",je,[qe,e("div",ze,[U(o(he),{modelValue:o(d).date,"onUpdate:modelValue":[s[0]||(s[0]=t=>o(d).date=t),s[1]||(s[1]=t=>K(o(d).date))],inline:"","enable-time-picker":!1,name:"date","auto-apply":"",highlight:o(D),"year-range":[2024,2024],"disabled-week-days":[6,7,0],"week-start":"0","allowed-dates":o(D),"min-date":o($)},null,8,["modelValue","highlight","allowed-dates","min-date"])])])]),e("div",Le,[Me,e("div",Re,[e("ul",Fe,[(c(!0),n(M,null,R(o(Y)[0].time,(t,g)=>(c(),n("li",{class:"flex items-center mb-3 font-semibold whitespace-nowrap lg:w-[170px] lg:text-left text-center lg:pl-6 pl-3.5",key:g},[o(C).find(o(d).time,t)?u((c(),n("input",{key:0,type:"radio",name:"time",value:t,class:"mr-2 mt-0.5","onUpdate:modelValue":s[2]||(s[2]=_=>ue(b)?b.value=_:null),id:g,required:""},null,8,Ae)),[[ce,o(b)]]):(c(),n("input",{key:1,type:"radio",name:"time",value:t,class:"mr-2 mt-0.5",disabled:""},null,8,Ie)),e("label",{for:g,class:me(["lg:text-xs text-[10px]",o(C).find(o(d).time,t)?"text-[#087830] font-bold":" text-gray-400 font-light"])},y(t._12_hour_format_from)+" - "+y(t._12_hour_format_to),11,Ye)]))),128))])])])]),e("div",$e,[e("div",He,[e("div",Oe,[Pe,u(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o(l).borrower_category=t),name:"borrower_category",class:"shadow-md px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21] capitalize",required:"",onChange:s[4]||(s[4]=t=>J())},Ke,544),[[de,o(l).borrower_category]])]),o(L)?(c(),n("div",Qe,[We,u(e("input",{class:"shadow-md text-green-800 px-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":s[5]||(s[5]=t=>o(l).id_number=t),placeholder:"ID Number",type:"text",required:""},null,512),[[p,o(l).id_number]])])):k("",!0)]),e("div",Ze,[e("div",et,[tt,u(e("input",{class:"shadow-md text-xs text-green-800 px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":s[6]||(s[6]=t=>o(l).firstname=t),placeholder:"first Name",type:"text",required:""},null,512),[[p,o(l).firstname]])]),e("div",ot,[lt,u(e("input",{class:"shadow-md text-xs text-green-800 px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":s[7]||(s[7]=t=>o(l).lastname=t),placeholder:"last Name",type:"text",required:""},null,512),[[p,o(l).lastname]])]),e("div",at,[st,u(e("input",{class:"shadow-md text-xs text-green-800 px-2 py-2 rounded-md w-full lg:border-2 border border-[#225c21]","onUpdate:modelValue":s[8]||(s[8]=t=>o(l).email=t),placeholder:"Email",type:"email",required:""},null,512),[[p,o(l).email]])])]),e("div",rt,[it,(c(!0),n(M,null,R(o(l).books,(t,g)=>(c(),n("div",{class:"lg:flex lg:shadow lg:p-5 gap-2 mb-3 relative",key:g},[e("div",dt,[nt,e("div",ct,y(g+1),1)]),e("div",ut,[mt,u(e("input",{class:"shadow-md px-2 py-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":_=>t.book_title=_,placeholder:"book title",type:"text",required:""},null,8,_t),[[p,t.book_title]])]),e("div",bt,[pt,u(e("input",{class:"shadow-md px-2 py-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":_=>t.book_author=_,placeholder:"book author",type:"text",required:""},null,8,ht),[[p,t.book_author]])]),e("div",gt,[ft,u(e("input",{class:"shadow-md px-2 py-2 text-xs rounded-md w-full lg:border-2 border border-[#225c21] capitalize","onUpdate:modelValue":_=>t.book_call_number=_,placeholder:"book call number",type:"text",required:""},null,8,xt),[[p,t.book_call_number]])]),o(l).books.length>1?(c(),n("div",vt,[wt,e("div",{class:"flex items-center lg:ml-5 lg:mt-5 justify-center hover:bg-white bg-red-900 border border-red-900 hover:text-red-900 text-white rounded-full h-8 w-8 pt-2 pb-1.5 px-2.5 text-sm",onClick:_=>G(t)},St,8,yt)])):k("",!0)]))),128)),e("div",Ct,[o(h)>1?(c(),n("div",{key:0,class:"hover:text-[#f4ca16] border border-[#f4ca16] text-white cursor-pointer w-fit mb-3 hover:bg-white bg-[#f4ca16] font-bold uppercase text-xs rounded-md px-3 py-2 text-center lg:-ml-2",onClick:X},[Dt,f(" Add Book ")])):k("",!0)])]),o(T)?(c(),n("div",Tt," Date and Time and other fields are required! ")):k("",!0),Vt])],32)])])]),Bt,Nt,U(N)])}}},Yt=ge(Ut,[["__scopeId","data-v-e4e96235"]]);export{Yt as default};
