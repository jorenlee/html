import{_ as te}from"./DiQUzcr9.js";import{_ as ae}from"./Cl_p_ECO.js";import{j as se,r as f,e as re,c as l,b as O,f as le,a as e,i as g,d as m,q as z,z as B,F as h,g as b,o as i,t as u,n as y,w as ie,T as ne,ag as oe,s as de}from"#entry";import{h as F}from"./BLMuvzoS.js";import{_ as ce}from"./DlAUqK2U.js";const ue={class:"bg-gray-50"},pe={class:"w-11/12 mx-auto my-6"},fe={class:"bg-white shadow-md border-2 border-gray-200"},ge={class:"p-4"},xe={class:"flex flex-col lg:flex-row gap-3 items-center"},_e={class:"flex-1 w-full"},me={class:"relative"},ve={key:0,class:"mt-4 text-sm text-red-700 bg-red-50 border-2 border-red-300 py-2 px-4 flex items-center gap-2"},ye={key:0,class:"w-11/12 mx-auto mb-8"},he={class:"bg-white shadow-lg overflow-hidden border-2 border-gray-200"},be={class:"bg-green-700 px-4 py-3 border-b-2 border-green-800"},ke={class:"flex items-center justify-between"},we={class:"text-white font-semibold text-sm lg:text-base uppercase"},Ae={class:"bg-green-800 text-white text-xs px-3 py-1 font-medium"},Te={class:"p-4"},De={class:"grid lg:grid-cols-2 gap-4"},Ce={class:"space-y-3"},$e={class:"bg-green-50 p-3 border-2 border-green-200"},je={class:"space-y-1.5 text-xs"},Me={class:"flex"},Ne={class:"text-gray-900 font-medium"},Re={class:"flex"},Se={class:"text-gray-900"},Pe={class:"flex"},Ie={class:"text-gray-900"},Ue={class:"flex"},Oe={class:"text-gray-900"},Fe={class:"bg-gray-50 p-3 border-2 border-gray-200"},Ye={class:"space-y-1.5"},Je={class:"text-gray-600"},Ee={class:"text-gray-900 font-medium ml-1"},qe={class:"bg-blue-50 p-3 border-2 border-blue-200"},Ge={class:"space-y-1"},ze={class:"text-gray-900"},Be={key:0,class:"bg-yellow-50 p-3 border-2 border-yellow-200"},Ve={class:"text-xs text-gray-900"},Le={class:"space-y-3"},He={key:0,class:"bg-blue-50 border-2 border-blue-300 px-3 py-2 text-xs flex items-center gap-2"},Ke={key:2,class:"space-y-2"},Qe={class:"bg-green-50 p-3 border-2 border-green-300"},We=["onChange"],Xe={class:"bg-blue-50 p-3 border-2 border-blue-300"},Ze=["onChange"],et={class:"bg-white border-2 border-gray-200 overflow-hidden"},tt={key:0,class:"px-3 pt-2 bg-gray-100 border-b-2 border-gray-300"},at={class:"flex overflow-x-auto"},st={class:"w-10 mx-1"},rt=["src"],lt={key:1,class:"w-10 h-10 bg-green-100 rounded flex items-center justify-center mb-1"},it={class:"w-10 mx-1"},nt=["src"],ot={key:1,class:"w-10 h-10 bg-green-100 rounded flex items-center justify-center mb-1"},dt=["src"],ct={key:1,class:"w-10 h-10 bg-blue-100 rounded flex items-center justify-center mb-1"},ut={key:0,class:"fa fa-file-pdf-o text-2xl text-red-600"},pt={key:1,class:"fa fa-file-word-o text-2xl text-blue-600"},ft={key:2,class:"fa fa-file-o text-2xl text-gray-600"},gt={class:"p-3 bg-gray-50 max-h-[250px] overflow-y-auto space-y-3"},xt={key:1,class:"text-center py-6"},_t={key:0,class:"bg-green-700 text-white text-xs px-3 py-1.5 shadow-lg text-center border-2 border-green-800"},mt={class:"p-2 bg-white border-t-2 border-gray-300"},vt=["onChange"],yt={class:"flex gap-2"},ht=["onKeyup"],bt=["onClick"],kt=["onClick","disabled"],wt={key:0,class:"fa fa-paper-plane"},At={key:1,class:"fa fa-spinner fa-spin"},Tt={key:0,class:"mt-2 space-y-1"},Dt={class:"flex items-center gap-1 flex-1 min-w-0"},Ct={class:"truncate"},$t={class:"font-semibold text-gray-600 ml-2"},jt={key:1,class:"mt-2 text-[10px]"},Mt={key:0,class:"fa fa-spinner fa-spin"},Nt={key:1,class:"fa fa-check-circle"},Rt={key:2,class:"fa fa-exclamation-circle"},St={__name:"index",setup(Pt){const V=se(),x=f(V.mainDevServer),k=f([]),R=f(""),D=f([]),S=f(!1),C=f({}),v=f({});re(async()=>{try{const n=await $fetch(x.value+"/api/registrar/list");k.value=Y(n||[])}catch(n){console.error("Fetch error:",n)}});const P=n=>{if(!n)return"";const t=n.match(/^(.*?\.(?:jpg|jpeg|png))/i);return t?t[1]:n},Y=n=>{if(!Array.isArray(n)||n.length===0)return n;const t=new Map,p=n.length;n.forEach(d=>{if(d?.tracking_id){const s=t.get(d.tracking_id);(!s||d.id>s.id)&&t.set(d.tracking_id,d)}});const o=Array.from(t.values()),a=p-o.length;return a>0&&console.log(`ðŸ§¹ Removed ${a} duplicate registrar ${a===1?"entry":"entries"}`),o},L=()=>{const n=R.value.trim().toUpperCase();if(n){const t=k.value.filter(p=>p?.tracking_id===n);D.value=Y(t),S.value=D.value.length===0}else D.value=[],S.value=!1},H=n=>{const t=(n?.logs?.[0]?.status_remarks||"").toLowerCase();return t==="assessment"||t==="preparing documents"};async function K(n,t){const p=n.target.files?.[0];if(!p||!t)return;const o=t.tracking_id;C.value[o]=!0,v.value[o]={ok:!1,msg:""};try{const a=new FormData;a.append("file",p);const d=await $fetch(x.value+"/api/registrar/upload/",{method:"POST",body:a}),s=Array.isArray(d)?d.map(c=>({name:c.name||c.file?.split("/").pop(),url:c.url||c.file})):[{name:d.name||d.file?.split("/").pop(),url:d.url||d.file}],r=await $fetch(`${x.value}/api/registrar/payment/by-tracking/?tracking_id=${encodeURIComponent(o)}`).catch(()=>null);if(r){const c=[...r.receipt_image_url||[],...s],A={payment_id:r.payment_id||"",fullname:r.fullname||"",email:r.email||"",course:r.course||"",college:r.college||"",date_graduated_last_attended:r.date_graduated_last_attended||"",total:r.total||"",detail_fees_type_document_requests:JSON.stringify(r.detail_fees_type_document_requests||[]),tracking_id:r.tracking_id||o,receipt_image_url:JSON.stringify(c)};await $fetch(`${x.value}/api/registrar/payment/${r.id}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:A})}else{const c={payment_id:"",fullname:"",email:"",course:"",college:"",date_graduated_last_attended:"",total:"",detail_fees_type_document_requests:JSON.stringify([]),tracking_id:o,receipt_image_url:JSON.stringify(s)};await $fetch(x.value+"/api/registrar/payment/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:c})}try{await $fetch(x.value+"/api/registrar/status/confirm-receipt/",{method:"POST",headers:{"Content-Type":"application/json"},body:{id:t.id,latest_status:"Confirm Receipt"}})}catch(c){console.warn("Receipt uploaded, but email notification failed:",c)}v.value[o]={ok:!0,msg:"Receipt uploaded successfully."}}catch(a){console.error("Upload receipt failed",a),v.value[o]={ok:!1,msg:"Failed to upload receipt. Please try again."}}finally{C.value[o]=!1,n.target.value=""}}async function Q(n,t){const p=n.target.files?.[0];if(!p||!t)return;const o=t.tracking_id;C.value[o]=!0,v.value[o]={ok:!1,msg:""};try{const a=new FormData;a.append("file",p);const d=await $fetch(x.value+"/api/registrar/upload/",{method:"POST",body:a}),s=Array.isArray(d)?d.map(c=>({name:c.name||c.file?.split("/").pop(),url:c.url||c.file})):[{name:d.name||d.file?.split("/").pop(),url:d.url||d.file}],r=await $fetch(`${x.value}/api/registrar/payment/by-tracking/?tracking_id=${encodeURIComponent(o)}`).catch(()=>null);if(r){const c=[...r.additional_docs_image_url||[],...s],A={payment_id:r.payment_id||"",fullname:r.fullname||"",email:r.email||"",course:r.course||"",college:r.college||"",date_graduated_last_attended:r.date_graduated_last_attended||"",total:r.total||"",detail_fees_type_document_requests:JSON.stringify(r.detail_fees_type_document_requests||[]),tracking_id:r.tracking_id||o,receipt_image_url:JSON.stringify(r.receipt_image_url||[]),additional_docs_image_url:JSON.stringify(c)};await $fetch(`${x.value}/api/registrar/payment/${r.id}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:A})}else{const c={payment_id:"",fullname:"",email:"",course:"",college:"",date_graduated_last_attended:"",total:"",detail_fees_type_document_requests:JSON.stringify([]),tracking_id:o,receipt_image_url:JSON.stringify([]),additional_docs_image_url:JSON.stringify(s)};await $fetch(x.value+"/api/registrar/payment/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:c})}try{await $fetch(x.value+"/api/registrar/status/confirm-receipt/",{method:"POST",headers:{"Content-Type":"application/json"},body:{id:t.id,latest_status:"Confirm Receipt"}})}catch(c){console.warn("File uploaded, but email notification failed:",c)}v.value[o]={ok:!0,msg:"Additional document uploaded successfully."}}catch(a){console.error("Upload additional docs failed",a),v.value[o]={ok:!1,msg:"Failed to upload additional document. Please try again."}}finally{C.value[o]=!1,n.target.value=""}}const W=f(""),I=f(""),$=f(!1),J=f(""),U=f(!1),w=f(""),E=async n=>{if(w.value.trim()){I.value="",W.value="",$.value=!0;try{const t={sender:n.firstname||"User",message:w.value.trim(),timestamp:F().format("MMMM DD, YYYY h:mm:ss A")},o=[...Array.isArray(n.additional_response_details)?n.additional_response_details.filter(s=>s.message!=="N/A"):[],t],a={...n,additional_response_details:o};await $fetch(`${x.value}/api/registrar/${n.id}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:a}),n.additional_response_details=o;const d=k.value.findIndex(s=>s.id===n.id);return d!==-1&&(k.value[d].additional_response_details=o),J.value="âœ… Response submitted successfully!",U.value=!0,setTimeout(()=>U.value=!1,3e3),$.value=!1,w.value="",!0}catch(t){return console.error("Error updating response:",t),I.value="âŒ Failed to update record.",setTimeout(()=>I.value="",3e3),$.value=!1,!1}}},q=f({}),j=f({}),_=f({}),X=n=>{const t=q.value[n];t&&t.click()},Z=async(n,t)=>{const p=Array.from(n.target.files||[]),o=t.tracking_id;if(p.length!==0){j.value[o]=p,_.value[o]="Uploading attachments...";try{const a=[];for(const M of p){const G=new FormData;G.append("file",M);const T=await $fetch(x.value+"/api/registrar/upload/",{method:"POST",body:G}),ee=Array.isArray(T)?T.map(N=>({name:N.name||N.file?.split("/").pop(),url:N.url||N.file,timestamp:F().format("MMMM DD, YYYY h:mm:ss A")})):[{name:T.name||T.file?.split("/").pop(),url:T.url||T.file,timestamp:F().format("MMMM DD, YYYY h:mm:ss A")}];a.push(...ee)}const r=[...(t.additional_documents||[]).filter(M=>M.name!=="N/A"),...a],c={...t,additional_documents:r};await $fetch(`${x.value}/api/registrar/${t.id}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:c}),t.additional_documents=r;const A=k.value.findIndex(M=>M.id===t.id);A!==-1&&(k.value[A].additional_documents=r),_.value[o]="âœ… Upload successful!",setTimeout(()=>{_.value[o]="",j.value[o]=[]},3e3)}catch(a){console.error("Attachment upload error:",a),_.value[o]="âŒ Upload failed. Please try again.",setTimeout(()=>{_.value[o]=""},5e3)}n.target.value=""}};return(n,t)=>{const p=te,o=ae;return i(),l("div",ue,[O(p),t[30]||(t[30]=le('<div class="relative" data-v-3ef4dc3f><div class="bg-green-700 lg:h-[200px] h-[130px]" data-v-3ef4dc3f><div class="lg:pt-10 absolute top-1/2 transform -translate-y-1/2 w-full" data-v-3ef4dc3f><p class="font-bold uppercase text-white lg:text-2xl text-sm w-11/12 mx-auto" data-v-3ef4dc3f> REGISTRAR </p><p class="text-xs w-11/12 mx-auto text-white" data-v-3ef4dc3f> Appointment Tracker </p></div></div><div class="shadow-lg text-green-700" data-v-3ef4dc3f><div class="lg:flex justify-between border-b border-gray-200 lg:pl-5" data-v-3ef4dc3f><div class="flex items-center capitalize text-xs lg:border-b-0 border-b lg:px-0 px-1.5 py-2" data-v-3ef4dc3f><div data-v-3ef4dc3f><a href="/registrar" class="mr-2 hover:underline lg:h-10" data-v-3ef4dc3f>Home</a></div><div data-v-3ef4dc3f><i class="fas fa-caret-right" data-v-3ef4dc3f></i><a href="/registrar/heu/appointment" class="mx-2 hover:underline lg:h-10" data-v-3ef4dc3f>HEU Appointment</a><i class="fas fa-caret-right" data-v-3ef4dc3f></i><a href="/registrar/track" class="mx-2 hover:underline lg:h-10" data-v-3ef4dc3f>Track</a></div></div><div class="flex hover:text-green-800 text-white bg-white h-full" data-v-3ef4dc3f><div class="hover:bg-green-800 border-x bg-white hover:text-white text-green-800 px-1 lg:px-4 lg:h-10 h-8 flex items-center capitalize text-xs lg:py-2 py-1 lg:w-fit w-full border-r" data-v-3ef4dc3f><a href="/registrar" class="flex items-center w-fit mx-auto" data-v-3ef4dc3f><i class="fa fa-video-camera" aria-hidden="true" data-v-3ef4dc3f></i><span class="ml-3 whitespace-nowrap" data-v-3ef4dc3f>Demo Guide</span></a></div><div class="hover:bg-green-800 border-x bg-white hover:text-white text-green-800 px-1 lg:px-4 lg:h-10 h-8 flex items-center capitalize text-xs lg:py-2 py-1 lg:w-fit w-full border-r" data-v-3ef4dc3f><a href="/registrar/track" class="flex items-center w-fit mx-auto" data-v-3ef4dc3f><i class="fa fa-universal-access" aria-hidden="true" data-v-3ef4dc3f></i><span class="ml-3 whitespace-nowrap" data-v-3ef4dc3f>Track</span></a></div><div class="hover:bg-green-800 border-x bg-white hover:text-white text-green-800 px-1 lg:px-4 lg:h-10 h-8 flex items-center capitalize text-xs lg:py-2 py-1 lg:w-fit w-full" data-v-3ef4dc3f><a href="/registrar/login" class="flex items-center w-fit mx-auto" data-v-3ef4dc3f><i class="fa fa-user" aria-hidden="true" data-v-3ef4dc3f></i><span class="ml-3 whitespace-nowrap" data-v-3ef4dc3f>Admin Login</span></a></div></div></div></div></div>',1)),e("div",pe,[e("div",fe,[t[5]||(t[5]=e("h2",{class:"bg-white text-green-700 text-center uppercase py-2 px-5 font-bold text-sm lg:text-base"},[e("i",{class:"fa fa-certificate mr-2"}),m("Appointment Tracker ")],-1)),e("div",ge,[e("div",xe,[e("div",_e,[e("div",me,[z(e("input",{class:"w-full py-2.5 pl-10 pr-3 uppercase border-2 border-green-700 text-sm focus:ring-0 focus:border-green-800 transition",placeholder:"Enter 20-digit Tracking ID","onUpdate:modelValue":t[0]||(t[0]=a=>R.value=a),maxlength:"20"},null,512),[[B,R.value]]),t[2]||(t[2]=e("i",{class:"fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-green-700"},null,-1))])]),e("button",{class:"bg-green-700 hover:bg-green-800 text-white px-6 py-2.5 text-sm font-medium transition shadow-sm hover:shadow w-full lg:w-auto",onClick:L},[...t[3]||(t[3]=[e("i",{class:"fa fa-search mr-2"},null,-1),m("Track Now ",-1)])])]),S.value?(i(),l("div",ve,[...t[4]||(t[4]=[e("i",{class:"fa fa-exclamation-circle"},null,-1),e("span",null,"Tracking ID not found. Please check and try again.",-1)])])):g("",!0)])])]),D.value.length>0?(i(),l("div",ye,[(i(!0),l(h,null,b(D.value,(a,d)=>(i(),l("div",{key:d,class:"mb-4"},[e("div",he,[e("div",be,[e("div",ke,[e("h3",we,[t[6]||(t[6]=e("i",{class:"fa fa-barcode mr-2"},null,-1)),m(u(a.tracking_id),1)]),e("span",Ae,u(a.logs?.[0]?.status_remarks||"Pending"),1)])]),e("div",Te,[e("div",De,[e("div",Ce,[e("div",$e,[t[11]||(t[11]=e("h4",{class:"text-xs font-bold text-green-800 mb-2 flex items-center uppercase"},[e("i",{class:"fa fa-user mr-2"}),m("Personal Information ")],-1)),e("div",je,[e("div",Me,[t[7]||(t[7]=e("span",{class:"text-gray-600 w-20"},"Name:",-1)),e("span",Ne,u(a.firstname)+" "+u(a.middlename)+" "+u(a.lastname),1)]),e("div",Re,[t[8]||(t[8]=e("span",{class:"text-gray-600 w-20"},"College:",-1)),e("span",Se,u(a.college),1)]),e("div",Pe,[t[9]||(t[9]=e("span",{class:"text-gray-600 w-20"},"Course:",-1)),e("span",Ie,u(a.course),1)]),e("div",Ue,[t[10]||(t[10]=e("span",{class:"text-gray-600 w-20"},"Year:",-1)),e("span",Oe,u(a.year_graduated_last_attended),1)])])]),e("div",Fe,[t[13]||(t[13]=e("h4",{class:"text-xs font-bold text-gray-800 mb-2 flex items-center uppercase"},[e("i",{class:"fa fa-clock-o mr-2"}),m("Status Timeline ")],-1)),e("div",Ye,[(i(!0),l(h,null,b(a.logs,(s,r)=>(i(),l("div",{key:r,class:"flex items-start gap-2 text-xs"},[t[12]||(t[12]=e("i",{class:"fa fa-circle text-green-600 text-[6px] mt-1.5"},null,-1)),e("div",null,[e("span",Je,u(s.timestamp),1),e("span",Ee,u(s.status_remarks),1)])]))),128))])]),e("div",qe,[t[15]||(t[15]=e("h4",{class:"text-xs font-bold text-blue-800 mb-2 flex items-center uppercase"},[e("i",{class:"fa fa-file-text mr-2"}),m("Requested Document/s ")],-1)),e("div",Ge,[(i(!0),l(h,null,b(a.type_document_requests,(s,r)=>(i(),l("div",{key:r,class:"flex items-center gap-2 text-xs"},[t[14]||(t[14]=e("i",{class:"fa fa-check-circle text-blue-600 text-[10px]"},null,-1)),e("span",ze,u(s),1)]))),128))])]),a.details?(i(),l("div",Be,[t[16]||(t[16]=e("h4",{class:"text-xs font-bold text-yellow-800 mb-1 flex items-center uppercase"},[e("i",{class:"fa fa-info-circle mr-2"}),m("Additional Details ")],-1)),e("p",Ve,u(a.details),1)])):g("",!0)]),e("div",Le,[C.value[a.tracking_id]?(i(),l("div",He,[...t[17]||(t[17]=[e("i",{class:"fa fa-spinner fa-spin text-blue-600"},null,-1),e("span",{class:"text-blue-800"},"Uploading file...",-1)])])):v.value[a.tracking_id]?(i(),l("div",{key:1,class:y(["px-3 py-2 text-xs flex items-center gap-2",v.value[a.tracking_id].ok?"bg-green-50 border-2 border-green-300":"bg-red-50 border-2 border-red-300"])},[e("i",{class:y(v.value[a.tracking_id].ok?"fa fa-check-circle text-green-600":"fa fa-exclamation-circle text-red-600")},null,2),e("span",{class:y(v.value[a.tracking_id].ok?"text-green-800":"text-red-800")},u(v.value[a.tracking_id].msg),3)],2)):g("",!0),H(a)?(i(),l("div",Ke,[e("div",Qe,[t[18]||(t[18]=e("label",{class:"text-xs font-bold text-green-800 mb-2 flex items-center uppercase"},[e("i",{class:"fa fa-upload mr-2"}),m("Upload Receipt ")],-1)),e("input",{type:"file",onChange:s=>K(s,a),accept:"image/*",class:"w-full text-xs text-gray-700 file:mr-3 file:py-1.5 file:px-3 file:border-0 file:text-xs file:bg-green-700 file:text-white hover:file:bg-green-800 file:cursor-pointer"},null,40,We),t[19]||(t[19]=e("p",{class:"mt-1.5 text-[10px] text-gray-600"},"JPG, PNG â€¢ Max 5MB",-1))]),e("div",Xe,[t[20]||(t[20]=e("label",{class:"text-xs font-bold text-blue-800 mb-2 flex items-center uppercase"},[e("i",{class:"fa fa-paperclip mr-2"}),m("Additional Documents ")],-1)),e("input",{type:"file",onChange:s=>Q(s,a),accept:"image/*,application/pdf",class:"w-full text-xs text-gray-700 file:mr-3 file:py-1.5 file:px-3 file:border-0 file:text-xs file:bg-blue-700 file:text-white hover:file:bg-blue-800 file:cursor-pointer"},null,40,Ze),t[21]||(t[21]=e("p",{class:"mt-1.5 text-[10px] text-gray-600"},"JPG, PNG, PDF â€¢ Max 10MB",-1))])])):g("",!0),e("div",et,[t[29]||(t[29]=e("div",{class:"bg-green-700 px-3 py-2 border-b-2 border-green-800"},[e("h4",{class:"text-xs font-bold text-white flex items-center uppercase"},[e("i",{class:"fa fa-comments mr-2"}),m("Additonal Informations ")])],-1)),a.additional_documents&&a.additional_documents.length>0&&a.additional_documents[0].name!=="N/A"||a.valid_id_front&&a.valid_id_front.length>0||a.valid_id_back&&a.valid_id_back.length>0?(i(),l("div",tt,[t[24]||(t[24]=e("div",{class:"text-[10px] font-bold text-gray-700 uppercase mb-2 flex items-center gap-1"},[e("i",{class:"fa fa-thumb-tack text-green-600"}),m(),e("i",{class:"fa fa-paperclip text-green-600"}),e("span",null,"Attached Documents:")],-1)),e("div",at,[a.valid_id_front&&a.valid_id_front.length>0?(i(!0),l(h,{key:0},b(a.valid_id_front,(s,r)=>(i(),l("div",{key:"front-"+r,class:"flex-shrink-0"},[e("div",st,[s.url&&(s.url.includes("jpg")||s.url.includes("jpeg")||s.url.includes("png"))?(i(),l("img",{key:0,src:P(s.url),alt:"Gov ID Front",class:"w-10 h-10 object-cover rounded border border-gray-300 mb-1"},null,8,rt)):(i(),l("div",lt,[...t[22]||(t[22]=[e("i",{class:"fa fa-id-card text-2xl text-green-600"},null,-1)])]))])]))),128)):g("",!0),a.valid_id_back&&a.valid_id_back.length>0?(i(!0),l(h,{key:1},b(a.valid_id_back,(s,r)=>(i(),l("div",{key:"back-"+r,class:"flex-shrink-0"},[e("div",it,[s.url&&(s.url.includes("jpg")||s.url.includes("jpeg")||s.url.includes("png"))?(i(),l("img",{key:0,src:P(s.url),alt:"Gov ID Back",class:"w-10 h-10 object-cover rounded border border-gray-300 mb-1"},null,8,nt)):(i(),l("div",ot,[...t[23]||(t[23]=[e("i",{class:"fa fa-id-card text-2xl text-green-600"},null,-1)])]))])]))),128)):g("",!0),a.additional_documents&&a.additional_documents.length>0&&a.additional_documents[0].name!=="N/A"?(i(!0),l(h,{key:2},b(a.additional_documents,(s,r)=>(i(),l("div",{key:"doc-"+r,class:"flex-shrink-0"},[e("div",{class:y(s.url==="N/A"?"hidden":"w-10 mx-1")},[s.url&&(s.url.includes("jpg")||s.url.includes("jpeg")||s.url.includes("png"))?(i(),l("img",{key:0,src:P(s.url),alt:"Document",class:"w-10 h-10 object-cover rounded border border-gray-300 mb-1"},null,8,dt)):(i(),l("div",ct,[s.name&&s.name.includes(".pdf")?(i(),l("i",ut)):s.name&&(s.name.includes(".doc")||s.name.includes(".docx"))?(i(),l("i",pt)):(i(),l("i",ft))]))],2)]))),128)):g("",!0)])])):g("",!0),e("div",gt,[Array.isArray(a.additional_response_details)&&a.additional_response_details.length>0&&a.additional_response_details[0].message!=="N/A"?(i(!0),l(h,{key:0},b(a.additional_response_details,(s,r)=>(i(),l("div",{key:"msg-"+r,class:y(s.sender==="Registrar"?"flex justify-start":"flex justify-end")},[e("div",{class:y(s.sender==="Registrar"?"bg-white border-2 border-gray-300 px-3 py-2 max-w-[85%] shadow-sm rounded-lg":"bg-green-700 px-3 py-2 max-w-[85%] shadow-sm border-2 border-green-800 rounded-lg")},[e("div",{class:y(s.sender==="Registrar"?"text-[10px] font-bold text-green-700 mb-1 uppercase":"text-[10px] font-bold text-white/90 mb-1 uppercase")},u(s.sender==="Registrar"?"Registrar Office":"You")+": ",3),e("p",{class:y(s.sender==="Registrar"?"text-xs text-gray-800":"text-xs text-white")},u(s.message),3),e("p",{class:y(s.sender==="Registrar"?"text-[9px] text-gray-500 mt-1":"text-[9px] text-white/70 mt-1")},u(s.timestamp),3)],2)],2))),128)):g("",!0),!Array.isArray(a.additional_response_details)||a.additional_response_details.length===0||a.additional_response_details[0].message==="N/A"?(i(),l("div",xt,[...t[25]||(t[25]=[e("i",{class:"fa fa-comment-slash text-gray-300 text-3xl mb-2"},null,-1),e("p",{class:"text-xs text-gray-500"},"No messages yet",-1)])])):g("",!0),O(ne,{"enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100","enter-active-class":"transition duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95","leave-active-class":"transition duration-150"},{default:ie(()=>[U.value?(i(),l("div",_t,u(J.value),1)):g("",!0)]),_:1})]),e("div",mt,[e("input",{type:"file",ref_for:!0,ref:s=>q.value[a.tracking_id]=s,class:"hidden",onChange:s=>Z(s,a),accept:".jpg,.jpeg,.png,.pdf,.doc,.docx",multiple:""},null,40,vt),e("div",yt,[z(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>w.value=s),type:"text",placeholder:"Type in your message here and press Enter to send",class:"flex-1 text-xs border-2 border-gray-300 px-3 py-2 focus:ring-0 focus:border-green-700",onKeyup:oe(de(s=>E(a),["exact","prevent"]),["enter"])},null,40,ht),[[B,w.value]]),e("button",{type:"button",onClick:s=>X(a.tracking_id),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 text-xs font-medium transition",title:"Attach files"},[...t[26]||(t[26]=[e("i",{class:"fa fa-paperclip"},null,-1)])],8,bt),e("button",{onClick:s=>E(a),disabled:$.value||!w.value.trim(),class:"bg-green-700 hover:bg-green-800 text-white px-4 py-2 text-xs font-medium transition disabled:opacity-50 disabled:cursor-not-allowed"},[$.value?(i(),l("i",At)):(i(),l("i",wt))],8,kt)]),j.value[a.tracking_id]&&j.value[a.tracking_id].length>0?(i(),l("div",Tt,[t[28]||(t[28]=e("div",{class:"text-[10px] font-semibold text-gray-700 mb-1"}," Selected Files (Click send to upload): ",-1)),(i(!0),l(h,null,b(j.value[a.tracking_id],s=>(i(),l("div",{key:s.name,class:"bg-blue-50 border border-blue-200 rounded px-2 py-1 flex items-center justify-between text-[10px]"},[e("div",Dt,[t[27]||(t[27]=e("i",{class:"fa fa-file-o text-blue-600"},null,-1)),e("span",Ct,u(s.name),1)]),e("span",$t,u((s.size/1024/1024).toFixed(2))+" MB ",1)]))),128))])):g("",!0),_.value[a.tracking_id]?(i(),l("div",jt,[e("div",{class:y([_.value[a.tracking_id].includes("successful")?"text-green-600":_.value[a.tracking_id].includes("failed")?"text-red-600":"text-blue-600","flex items-center gap-1"])},[_.value[a.tracking_id].includes("Uploading")?(i(),l("i",Mt)):_.value[a.tracking_id].includes("successful")?(i(),l("i",Nt)):_.value[a.tracking_id].includes("failed")?(i(),l("i",Rt)):g("",!0),m(" "+u(_.value[a.tracking_id]),1)],2)])):g("",!0)])])])])])])]))),128))])):g("",!0),O(o)])}}},Jt=ce(St,[["__scopeId","data-v-3ef4dc3f"]]);export{Jt as default};
