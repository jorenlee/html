import{_ as K}from"./BgX3Uu7h.js";import{m as Q,u as X,r as n,p as Z,c as d,a as e,q as m,v as k,n as c,t as i,s as N,x as v,y as ee,F as T,z as S,A as z,b as te,o as u,d as y,B as ae,C as se}from"./Dd6w7bYo.js";import"./C5S46NFB.js";import{_ as le}from"./5JjjnmY2.js";import{_ as oe}from"./DlAUqK2U.js";const ie={class:"lg:flex lg:min-h-screen"},ne={class:"pb-3 lg:w-3/12 bg-gray-100 z-10 w-full lg:block lg:static absolute lg:min-h-auto min-h-[700px] lg:h-auto h-screen"},re={class:"flex items-center justify-center text-white bg-green-900 lg:py-[16px] py-[8px]"},de={class:"flex items-center w-full px-2"},ce={class:"text-sm"},ue={class:"w-full"},pe={class:"bg-green-800"},ve={class:"flex mx-auto justify-between py-2 px-3.5"},fe={class:"w-full lg:p-5 px-2 py-2"},me={class:"relative"},he={class:"appointment-lists mx-auto text-xs"},ge={class:""},xe={key:0,class:"lg:grid grid-cols-3 gap-4"},_e={class:"w-full"},be={class:"flex items-center justify-center border-b relative"},ye=["onClick"],we={class:"flex gap-x-3 absolute left-3"},ke=["href"],Ce=["href"],$e={class:"flex px-2 font-bold justify-center absolute right-0"},Te={class:"mx-auto lg:flex justify-center text-white items-center"},Se=["onClick"],De={class:"text-left px-2"},je={class:"w-full px-2 py-0.5 border-b"},Ae={class:""},Le={class:"px-2 py-0.5 border-b"},Ne={class:"px-2 py-0.5"},ze={class:"flex items-center justify-center border-t-4 uppercase"},Ie={class:"flex gap-x-0.5"},Pe={class:"border-y font-bold py-1 px-2 flex items-center justify-center"},Re={class:""},Ue={class:"flex items-center my-2"},Ve=["onUpdate:modelValue","onChange"],Be=["onClick"],Ge={class:"flex items-center justify-center"},Me={class:"w-fit mx-auto py-1 flex items-center gap-3"},qe={class:"flex items-center gap-x-2 w-full"},Ee=["onUpdate:modelValue","onChange"],Oe={class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#ffffff59] w-full h-screen flex items-center"},Fe={class:"px-5 rounded-lg bg-white shadow-2xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},He={key:0,class:"italic text-gray-400 text-center p-1 h-screen"},We={key:0,class:"absolute top-0 w-full z-10 bg-white h-full"},Ye={class:"border-4 border-gray-100 shadow-lg"},Je={class:"flex items-center"},Ke={class:"lg:flex lg:gap-x-3 lg:text-sm text-xs"},Qe={class:"static bottom-0 w-full"},Xe={__name:"index",setup(Ze){const C=Q(),f=X(),r=n(f.mainDevServer),h=n(0);let D=n(),j=n(),I=n(!0),o=n(!1),g=n(!1);const w=n(!1),l=n(null),x=n(!1),A=n([]),_=n([]);Z(()=>{setTimeout(async()=>{f.user.isAuthenticated&&(f.user.email==="jorenleeluna24@gmail.com"||f.user.email==="esmael.larubis@lsu.edu.ph")?(h.value=await $fetch(r.value+"/api/campus-pass/list").catch(s=>s.data)||0,C.push("/_/panels/campus-security/declined"),P()):C.push("/_/unauthorized")},5e3)});const P=()=>{h.value.filter(s=>{s.approval_status==="declined"&&_.value.push(s)})},R=async(s,t)=>{l.value=await $fetch(r.value+"/api/campus-pass/"+s+"/").catch(b=>b.data),l.value.approval_status=t,console.log(l.value),q(s)},U=async(s,t)=>{l.value=await $fetch(r.value+"/api/campus-pass/"+s+"/").catch(b=>b.data),l.value.remarks=t,console.log(l.value)},V=s=>{w.value=!0,j.value=s},B=()=>{M(),w.value=!1},G=s=>{h.value.filter(function(t){s===t.id&&(console.log(t),A.value=t.name_list,x.value=!x.value)})},M=async()=>{await $fetch(r.value+"/api/campus-pass/"+j.value+"/edit/",{method:"PUT",body:l.value}).then(s=>{console.log("response",s),console.log(l.value)})},q=async s=>{await $fetch(r.value+"/api/campus-pass/"+s+"/edit/",{method:"PUT",body:l.value}).then(t=>{console.log("response",t),console.log(l.value),l.value.approval_status==="approved"&&E(),l.value.approval_status==="declined"&&O(),l.value.approval_status==="for revision"&&F()})},E=async()=>{await $fetch(r.value+"/api/campus-pass/to-gmail-approved/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:l.value.incharge_firstname,incharge_contact_email:l.value.incharge_contact_email,schedule:l.value.schedule,approval_status:l.value.approval_status,remarks:l.value.remarks}}).then(s=>{console.log(s)})},O=async()=>{await $fetch(r.value+"/api/campus-pass/to-gmail-declined/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:l.value.incharge_firstname,incharge_contact_email:l.value.incharge_contact_email,schedule:l.value.schedule,approval_status:l.value.approval_status,remarks:l.value.remarks}}).then(s=>{console.log(s)})},F=async()=>{await $fetch(r.value+"/api/campus-pass/to-gmail-for-revision/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:l.value.incharge_firstname,incharge_contact_email:l.value.incharge_contact_email,schedule:l.value.schedule,approval_status:l.value.approval_status,remarks:l.value.remarks}}).then(s=>{console.log(s)})},H=async()=>{w.value=!1,h.value=await $fetch(r.value+"/api/campus-pass/list").catch(s=>s.data)||0},L=s=>{g.value=!g.value,D.value=s},W=async()=>{await $fetch(r.value+"/api/campus-pass/"+D.value+"/delete/",{method:"DELETE",headers:{Authorization:f.user.token,"Content-Type":"application/json"}}).then(async s=>{console.log("response",s),h.value=await $fetch(r.value+"/api/campus-pass/list").catch(t=>t.data)||0,g.value=!g.value})},Y=()=>{f.removeToken(),C.push("/_/campus-pass-admin")};return(s,t)=>{const b=K;return u(),d("div",null,[e("div",ie,[m(e("div",ne,[e("div",re,[e("div",de,[t[3]||(t[3]=e("i",{class:"fa fa-user mx-2","aria-hidden":"true"},null,-1)),e("h1",ce,i(c(f).user.email),1)]),e("div",{onClick:t[0]||(t[0]=a=>N(o)?o.value=!c(o):o=!c(o)),class:"w-10 px-1.5 lg:hidden flex"},[e("i",{class:v(["fa text-3xl text-white",c(o)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)])]),t[4]||(t[4]=ee('<div class="" data-v-080323ed><div class="w-fit mx-auto mt-5 mb-3" data-v-080323ed><img src="https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/logos/LSU_Seal.PNG" class="lg:w-24 w-20 mx-auto" data-v-080323ed></div><div class="text-center" data-v-080323ed><h1 class="font-bold text-green-800 text-2xl" data-v-080323ed>Dashboard</h1></div><div class="mx-auto mt-10 mb-5 grid grid-cols-1" data-v-080323ed><a href="/_/panels/campus-security" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-black hover:bg-black hover:text-white" data-v-080323ed><i class="fa fa-list mr-3" aria-hidden="true" data-v-080323ed></i> All Request Lists </a><a href="/_/panels/campus-security/pending" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-gray-900 hover:bg-gray-900 hover:text-white" data-v-080323ed><i class="fa fa-clock mr-0.5" aria-hidden="true" data-v-080323ed></i> Pending </a><a href="/_/panels/campus-security/declined" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-red-900 hover:bg-red-900 hover:text-white" data-v-080323ed><i class="fa fa-ban mr-0.5" aria-hidden="true" data-v-080323ed></i> Declined </a><a href="/_/panels/campus-security/inprogress" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-yellow-600 hover:bg-yellow-600 hover:text-white" data-v-080323ed><i class="fa fa-adjust mr-0.5" aria-hidden="true" data-v-080323ed></i> In Progress </a><a href="/_/panels/campus-security/approved" class="pl-12 text-xs mx-auto mb-2 w-full capitalize whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white" data-v-080323ed><i class="fa fa-check" aria-hidden="true" data-v-080323ed></i> Approved </a><a href="/" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white" data-v-080323ed><i class="fa fa-globe mr-3" aria-hidden="true" data-v-080323ed></i> LSU HOME PAGE </a></div></div>',1))],512),[[k,c(o)]]),e("div",ue,[e("div",pe,[e("div",ve,[e("div",{onClick:t[1]||(t[1]=a=>N(o)?o.value=!c(o):o=!c(o)),class:"w-10 px-1.5"},[e("i",{class:v(["fa text-3xl text-white",c(o)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)]),e("button",{onClick:Y,class:"flex hover:font-bold pt-1"},t[5]||(t[5]=[e("i",{class:"fa fa-sign-out text-white text-xl"},null,-1),e("h1",{class:"text-xs text-white p-1.5"},"Log Out",-1)]))])]),e("div",null,[e("div",fe,[m(e("div",null,[t[22]||(t[22]=e("div",{class:"w-full shadow bg-gray-100 text-green-900 font-bold px-2 text-center mb-3 py-2 text-xs uppercase"}," All Declined Request Lists ",-1)),e("div",me,[e("div",he,[e("div",ge,[_.value.length>0?(u(),d("div",xe,[(u(!0),d(T,null,S(c(le).orderBy(_.value,"id","asc"),(a,$)=>(u(),d("div",{class:"justify-evenly text-center items-center h-auto lg:mb-0 mb-3 border border-gray-200 shadow",key:$},[e("div",_e,[e("div",be,[e("div",{class:v(["font-bold uppercase w-full",a.attendees==="Group"?"py-[7px] cursor-pointer":"py-[14px]"]),onClick:p=>G(a.id)},[y(i(a.attendees)+" ",1),e("span",{class:v(a.attendees==="Group"?"text-green-800":"hidden")},t[6]||(t[6]=[e("i",{class:"fa fa-caret-down text-lg mt-0.5 ml-2"},null,-1)]),2)],10,ye),e("div",we,[e("a",{href:a.approved_activities_link,target:"_blank",class:v(["font-bold w-full block text-green-800",a.approved_activities_link==="-"?"hidden":""])},t[7]||(t[7]=[e("i",{class:"fa fa-file-pdf text-lg"},null,-1)]),10,ke),e("a",{href:a.approved_gso_docs_link,target:"_blank",class:v(["font-bold w-full block text-green-800",a.approved_gso_docs_link==="-"?"hidden":""])},t[8]||(t[8]=[e("i",{class:"fa fa-soccer-ball text-lg"},null,-1)]),10,Ce)]),e("div",$e,[e("div",Te,[e("button",{onClick:p=>L(a.id),class:"text-red-500 hover:text-white hover:bg-red-500 bg-white border border-red-500 px-1.5 py-0.5 rounded-md"},t[9]||(t[9]=[e("i",{class:"fa fa-close rounded-lg uppercase","aria-hidden":"true"},null,-1)]),8,Se)])])]),e("div",De,[e("div",je,[e("span",Ae,[t[10]||(t[10]=e("i",{class:"fa fa-user mr-2"},null,-1)),y(" "+i(a.incharge_firstname),1)]),e("span",{class:v([{hidden:a.incharge_middlename==="-",hidden:a.incharge_middlename==="n/a",hidden:a.incharge_middlename==="N/A",hidden:a.incharge_middlename===""},"mx-1"])},i(a.incharge_middlename),3),e("span",null,i(a.incharge_lastname),1)]),e("div",Le,[t[11]||(t[11]=e("i",{class:"fa fa-envelope mr-2"},null,-1)),y(" "+i(a.incharge_contact_email),1)]),e("div",Ne,[t[12]||(t[12]=e("i",{class:"fa fa-phone mr-2"},null,-1)),y(" "+i(a.incharge_contact_number),1)])]),e("div",ze,[e("ul",Ie,[(u(!0),d(T,null,S(a.type_of_access,(p,J)=>(u(),d("li",{key:J,class:"shadow px-2 py-0.5 text-[10px] tracking-tighter"},i(p),1))),128))])]),e("div",Pe,[t[13]||(t[13]=e("i",{class:"fa fa-calendar mr-2"},null,-1)),y(" "+i(a.schedule),1)]),e("div",Re,[e("div",Ue,[t[15]||(t[15]=e("label",{for:"remarks",class:"px-2 font-bold text-gray-800"},"Remarks:",-1)),m(e("input",{type:"text",class:"border w-full mx-auto py-1 px-1 shadow-sm","onUpdate:modelValue":p=>a.remarks=p,onChange:p=>U(a.id,a.remarks)},null,40,Ve),[[ae,a.remarks]]),e("button",{onClick:p=>V(a.id),class:"flex text-green-500 hover:text-white hover:bg-green-500 bg-white border border-green-500 px-1 py-1.5 mr-2"},t[14]||(t[14]=[e("i",{class:"fa fa-check rounded-lg uppercase","aria-hidden":"true"},null,-1)]),8,Be)])]),e("div",Ge,[e("div",{class:v(["flex w-full gap-5",{"bg-red-700":a.approval_status==="declined","bg-gray-700":a.approval_status==="pending","bg-yellow-500":a.approval_status==="for revision","bg-green-900":a.approval_status==="approved"}])},[e("div",Me,[e("div",qe,[t[17]||(t[17]=e("label",{class:"font-bold block text-white"},"Status:",-1)),m(e("select",{"onUpdate:modelValue":p=>a.approval_status=p,name:"borrower_category",class:"shadow block font-bold rounded-md w-fit border px-1 pb-0.5 border-[#e5e7eb] capitalize",required:"",onChange:p=>R(a.id,a.approval_status)},t[16]||(t[16]=[e("option",{value:"approved"},"approved",-1),e("option",{value:"declined"},"declined",-1),e("option",{value:"pending"},"pending",-1),e("option",{value:"for revision"},"for revision",-1)]),40,Ee),[[se,a.approval_status]])])])],2)])])]))),128)),m(e("div",Oe,[e("div",{class:"w-fit mx-auto flex items-center shadow-2xl border-2 rounded-lg py-2 bg-white"},[e("div",{class:"flex items-center"},[t[18]||(t[18]=e("div",{class:"font-bold pl-5 pr-10"},"Confirm Remarks: ",-1)),e("div",{class:"flex gap-10 mr-10"},[e("span",{class:"px-3 uppercase py-1 rounded-lg bg-green-900 border hover:border-green-900 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:B},"yes"),e("span",{class:"px-3 uppercase py-1 rounded-lg bg-red-700 border hover:border-red-700 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:H},"no")])])])],512),[[k,w.value]]),m(e("div",Fe,[t[19]||(t[19]=e("div",{class:"my-6"},"Are you sure you want to Delete?",-1)),e("div",{class:"flex gap-5 mx-auto w-fit my-5"},[e("span",{class:"bg-green-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:W},"Yes"),e("span",{class:"bg-red-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:L},"Cancel")])],512),[[k,c(g)]])])):z("",!0)]),_.value.length===0?(u(),d("div",He," Please Wait ... ")):(u(),d("div",{key:1,class:v(["italic text-gray-400 text-center p-1 h-screen",_.value.length>0?"hidden":""])}," No Results Found! ",2))]),x.value?(u(),d("div",We,[e("div",Ye,[e("div",Je,[t[21]||(t[21]=e("div",{class:"text-center border-b py-2 font-bold w-full"}," List of Names ",-1)),e("div",{onClick:t[2]||(t[2]=a=>x.value=!x.value),class:"bg-gray-600 hover:bg-white hover:text-gray-600 border-b border-l text-white px-2 py-[8px]"},t[20]||(t[20]=[e("i",{class:"fa fa-close","aria-hidden":"true"},null,-1)]))]),e("div",Ke,[(u(!0),d(T,null,S(A.value,(a,$)=>(u(),d("div",{key:$,class:"text-left lg:px-10 px-2 py-1 bg-gray-100 mb-0.5"},[e("div",null,i(a.lastname)+", "+i(a.firstname)+" "+i(a.middlename),1),e("div",null,i(a.email),1)]))),128))])])])):z("",!0)])],512),[[k,c(I)]])])])])]),e("div",Qe,[te(b)])])}}},ot=oe(Xe,[["__scopeId","data-v-080323ed"]]);export{ot as default};
