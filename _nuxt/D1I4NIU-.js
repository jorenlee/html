import{r as b,c as n,a as c,t as D,F as R,g as Y,o as s,M as z,i,p as f,m,d as X,A as g,f as h,z as B,n as N}from"#entry";const F={class:"relative w-full h-screen bg-gray-100 p-4 select-none overflow-x-hidden"},S={class:"flex gap-2 mb-4"},G=["onMousedown"],W=["onUpdate:modelValue"],A=["onUpdate:modelValue"],j=["onUpdate:modelValue"],H=["onUpdate:modelValue"],$=["onChange"],O=["value","onInput"],q=["onChange"],J=["onInput"],K={class:"w-full h-full"},P=["contenteditable","onInput"],Q=["src","onMousedown"],Z=["src","onMousedown"],ee={key:3,class:"w-full h-full p-2 overflow-auto border rounded bg-gray-50"},te=["src"],oe=["src"],le=["href"],ne=["src"],se=["onMousedown"],ie={__name:"backup",setup(ae){const r=b(!1),u=b([]);let L=1;function C(){u.value.push({id:L++,width:240,height:180,top:100,left:100,type:"text",content:"Sample Text",textColor:"text-black",bgColor:"bg-white",fileData:null,fileName:"",fileType:"",videoEmbed:null,page_route_link_belong:"/control-box/page1"})}let d=null;function v(o,t){r.value&&(d={index:t,startX:o.clientX,startY:o.clientY,startTop:u.value[t].top,startLeft:u.value[t].left},document.addEventListener("mousemove",x),document.addEventListener("mouseup",y))}function x(o){if(!d)return;const t=u.value[d.index];t.top=d.startTop+(o.clientY-d.startY),t.left=d.startLeft+(o.clientX-d.startX)}function y(){d=null,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",y)}let p=null;function M(o,t){p={index:t,startX:o.clientX,startY:o.clientY,startW:u.value[t].width,startH:u.value[t].height},document.addEventListener("mousemove",w),document.addEventListener("mouseup",_)}function w(o){if(!p)return;const t=u.value[p.index];t.width=p.startW+(o.clientX-p.startX),t.height=p.startH+(o.clientY-p.startY)}function _(){p=null,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",_)}function E(o,t){u.value[t].content=o.target.innerText}function I(o,t){u.value[t].fileData=o.target.value}function k(o,t){const e=o.target.files[0];if(!e)return;const a=new FileReader;a.onload=()=>{u.value[t].fileData=a.result,u.value[t].fileName=e.name;const l=e.name.split(".").pop().toLowerCase();u.value[t].fileType=l},a.readAsDataURL(e)}function V(o){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(o)}`}function T(o,t){const e=o.target.value;if(e.includes("youtube.com")||e.includes("youtu.be")){const a=U(e);u.value[t].videoEmbed=a}}function U(o){let t="";return o.includes("v=")?t=o.split("v=")[1].split("&")[0]:o.includes("youtu.be")&&(t=o.split(".be/")[1]),"https://www.youtube.com/embed/"+t}return(o,t)=>(s(),n("div",F,[c("div",S,[c("button",{class:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:C}," Add Box "),c("button",{class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:t[0]||(t[0]=e=>r.value=!r.value)},D(r.value?"Disable Edit Mode":"Enable Edit Mode"),1)]),(s(!0),n(R,null,Y(u.value,(e,a)=>(s(),n("div",{key:e.id,class:"absolute border border-purple-600 rounded-md shadow-md",style:z({width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px"})},[r.value?(s(),n("div",{key:0,class:"absolute -top-14 left-0 w-full bg-white shadow-md rounded p-2 flex gap-2 items-center z-50",onMousedown:t[1]||(t[1]=f(()=>{},["stop"]))},[c("div",{class:"w-full p-1 bg-purple-600 text-white text-xs cursor-move flex items-center gap-1 rounded-t-md",onMousedown:f(l=>v(l,a),["stop"])},[...t[3]||(t[3]=[c("i",{class:"fa-solid fa-arrows-up-down-left-right"},null,-1),X(" Drag ",-1)])],40,G),m(c("select",{"onUpdate:modelValue":l=>e.type=l,class:"border rounded px-1 text-sm"},[...t[4]||(t[4]=[h('<option value="text">Text</option><option value="image">Image</option><option value="image_link">Image Link</option><option value="video">Video</option><option value="file">File</option>',5)])],8,W),[[g,e.type]]),e.type==="text"?m((s(),n("input",{key:0,type:"url",class:"border rounded px-1 text-sm w-40",placeholder:"Route Link","onUpdate:modelValue":l=>e.page_route_link_belong=l},null,8,A)),[[B,e.page_route_link_belong]]):i("",!0),e.type==="text"?m((s(),n("select",{key:1,"onUpdate:modelValue":l=>e.textColor=l,class:"border rounded px-1 text-sm"},[...t[5]||(t[5]=[h('<option value="text-black">Black</option><option value="text-white">White</option><option value="text-gray-700">Gray</option><option value="text-green-600">Green</option><option value="text-red-600">Red</option>',5)])],8,j)),[[g,e.textColor]]):i("",!0),e.type==="text"?m((s(),n("select",{key:2,"onUpdate:modelValue":l=>e.bgColor=l,class:"border rounded px-1 text-sm"},[...t[6]||(t[6]=[h('<option value="bg-white">White</option><option value="bg-black">Black</option><option value="bg-gray-200">Gray</option><option value="bg-green-100">Green</option><option value="bg-red-100">Red</option>',5)])],8,H)),[[g,e.bgColor]]):i("",!0),e.type==="image"?(s(),n("input",{key:3,type:"file",accept:"image/*",class:"text-sm",onChange:l=>k(l,a)},null,40,$)):i("",!0),e.type==="image_link"?(s(),n("input",{key:4,type:"url",class:"border rounded px-1 text-sm w-40",placeholder:"Image URL",value:e.fileData||"",onInput:l=>I(l,a)},null,40,O)):i("",!0),e.type==="file"?(s(),n("input",{key:5,type:"file",class:"text-sm",accept:".pdf,.doc,.docx,.xls,.xlsx",onChange:l=>k(l,a)},null,40,q)):i("",!0),e.type==="video"?(s(),n("input",{key:6,type:"text",class:"border rounded px-1 text-sm w-40",placeholder:"YouTube link",onInput:l=>T(l,a)},null,40,J)):i("",!0)],32)):i("",!0),c("div",K,[e.type==="text"?(s(),n("div",{key:0,class:N(["w-full h-full p-2 whitespace-pre-wrap break-words",[e.textColor,e.bgColor,r.value?"border rounded":""]]),contenteditable:r.value,onInput:l=>E(l,a)},null,42,P)):i("",!0),e.type==="image"&&e.fileData?(s(),n("img",{key:1,src:e.fileData,class:"w-full h-full object-contain cursor-move",onMousedown:f(l=>v(l,a),["stop"])},null,40,Q)):i("",!0),e.type==="image_link"&&e.fileData?(s(),n("img",{key:2,src:e.fileData,class:"w-full h-full object-contain cursor-move",onMousedown:f(l=>v(l,a),["stop"])},null,40,Z)):i("",!0),e.type==="file"&&e.fileData?(s(),n("div",ee,[e.fileType==="pdf"?(s(),n("iframe",{key:0,src:e.fileData,class:"w-full h-full"},null,8,te)):["doc","docx","xls","xlsx"].includes(e.fileType)?(s(),n("iframe",{key:1,src:V(e.fileData),class:"w-full h-full"},null,8,oe)):(s(),n("a",{key:2,href:e.fileData,target:"_blank",class:"text-blue-600 underline"},D(e.fileName),9,le))])):i("",!0),e.type==="video"&&e.videoEmbed?(s(),n("iframe",{key:4,src:e.videoEmbed,class:"w-full h-full",allowfullscreen:"",onMousedown:t[2]||(t[2]=f(()=>{},["stop"]))},null,40,ne)):i("",!0)]),r.value?(s(),n("div",{key:1,class:"absolute bottom-0 right-0 w-4 h-4 bg-purple-600 cursor-se-resize rounded-br",onMousedown:f(l=>M(l,a),["stop"])},null,40,se)):i("",!0)],4))),128))]))}};export{ie as default};
