import{_ as Yt}from"./BbcMqS0V.js";import{s as Nt,x as Ft,r as u,e as qt,k as ae,y as Ze,I,c as o,a as t,m as k,v as We,h as M,f as Ee,t as f,O as Xe,n as v,i as m,F as S,g as E,d as x,A as Re,ag as et,z as j,p as B,b as Bt,o as r,ak as Ot}from"#entry";import{_ as zt}from"./CXohH4N5.js";import{h as D}from"./BLMuvzoS.js";import{s as Gt}from"./BzLCLO6P.js";import{_ as Ht}from"./DlAUqK2U.js";const Kt={class:"min-h-screen flex"},Qt={class:"pb-3 lg:w-3/12 bg-gray-100 w-full flex overflow-hidden"},Jt={class:"w-full"},Zt={class:"flex items-center justify-center text-white bg-green-900 lg:py-[16px] py-[8px] sta"},Wt={class:"flex items-center w-full px-2"},Xt={class:"text-sm"},es={class:"w-full"},ts={class:"bg-green-800 w-full z-10"},ss={class:"flex mx-auto justify-between py-2 px-3.5"},as={key:0,class:"lg:mx-2 mx-2 shadow-lg rounded-lg p-1"},ls={class:"lg:flex gap-2"},os={class:"font-semibold text-[10px] text-gray-800 whitespace-nowrap text-center lg:tracking-normal tracking-tighter"},rs={class:"text-[10px] text-gray-500 text-center"},ns={class:"flex flex-wrap mx-auto w-fit gap-1 mt-1 text-[11px]"},is={class:"border border-500 text-red-800 px-2 py-0.5 rounded-full font-semibold"},ds={class:"border border-700 text-green-800 px-2 py-0.5 rounded-full font-semibold"},us={class:"border border-600 text-blue-800 px-2 py-0.5 rounded-full font-semibold"},cs={class:"w-full px-2"},gs={class:"relative"},fs={key:0,class:"fixed inset-0 z-[1000] bg-gray-800 bg-opacity-90 flex items-center justify-center"},vs={class:"text-white text-lg font-semibold text-center px-6"},ms={key:1,class:"fixed inset-0 z-[1000] bg-red-900 bg-opacity-90 flex items-center justify-center"},ps={class:"text-white text-lg font-semibold text-center px-6"},xs={class:"w-full lg:flex flex-wrap items-center gap-3 mb-1 px-3 py-1 bg-white border rounded-md shadow-sm"},ys={class:"w-full lg:flex items-center gap-3"},bs={key:0,class:"lg:mb-0 mb-3 flex items-center gap-2 lg:w-3/12 w-full"},hs=["disabled"],_s={key:1,class:"lg:mb-0 mb-3 w-full"},ws=["value"],ks={class:"lg:mb-0 mb-3 relative w-full"},Cs={class:"w-fit mx-auto flex items-center gap-1"},As={class:""},Ms={class:"appointment-lists mx-auto text-xs"},Ss={key:0,class:"text-center"},Ts={key:1},js={key:0,class:"gap-4"},Ds={key:0,class:"w-fit flex px-2"},$s={class:""},Ps=["value"],Is={class:"lg:w-8/12 w-full"},Es={class:"w-full my-1"},Rs={class:"w-full text-xs uppercase text-black py-1 px-1 flex items-center font-montserrat"},Ls={class:"w-full text-[10px]"},Vs={class:"w-fit mx-auto"},Us={class:"lg:w-fit mx-auto w-full py-1 lg:flex lg:whitespace-nowrap text-left"},Ys=["onClick"],Ns=["onClick"],Fs=["onClick"],qs=["onClick"],Bs=["onClick"],Os=["onClick"],zs=["onClick"],Gs={class:"w-full flex items-center"},Hs={class:"text-[10px] font-light whitespace-nowrap"},Ks={class:"font-bold uppercase"},Qs={class:"border border-gray-200 bg-gray-50/50 px-5 py-4 my-4 rounded-xl shadow-sm"},Js={class:"grid lg:grid-cols-2 md:grid-cols-2 gap-4 mb-3"},Zs={class:"block text-xs font-medium text-gray-700 mb-1"},Ws={class:"mt-4"},Xs={key:0,class:"text-center py-6 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 mb-4"},ea={class:"flex-1 min-w-[150px]"},ta=["for"],sa=["id","onUpdate:modelValue"],aa={class:"flex-1 min-w-[120px]"},la=["for"],oa=["id","onUpdate:modelValue"],ra=["onClick"],na={class:"mt-4 hidden"},ia=["onUpdate:modelValue"],da={class:"mt-6"},ua=["onClick","disabled"],ca={key:0,class:"mt-4 text-center text-sm bg-green-100 text-green-800 border border-green-400 px-4 py-2 rounded-md animate-pulse"},ga={class:"pt-4 border-gray-200 dark:border-gray-700"},fa=["onClick","disabled"],va={key:0,class:"flex items-center gap-2"},ma={key:1},pa={class:"flex justify-between items-center mb-4 border-b pb-3"},xa={class:"text-lg font-medium text-gray-900"},ya={class:"mb-6 max-h-[40vh] overflow-y-auto"},ba={key:0,class:"text-center text-gray-500 py-4"},ha={key:1,class:"space-y-3"},_a={class:"flex items-center justify-between capitalize gap-x-3"},wa={class:"text-gray-500 w-3/12"},ka={class:"flex justify-between items-center mb-2 pb-2 border-b-2 border-green-200"},Ca={class:"flex items-center gap-3"},Aa={class:"flex gap-6 w-full"},Ma={class:"w-full bg-white rounded-xl p-2 shadow-md border border-gray-200 h-fit"},Sa={class:"mb-2"},Ta={class:"bg-gray-50 border border-gray-300 rounded-lg px-4 py-1 text-sm text-gray-900"},ja={class:"mb-2"},Da=["onUpdate:modelValue"],$a={class:"mb-2"},Pa=["onUpdate:modelValue"],Ia={class:"mb-2"},Ea=["onUpdate:modelValue"],Ra=["onUpdate:modelValue"],La={class:"w-full h-fit"},Va={class:"bg-white rounded-xl p-2 shadow-md border border-gray-200"},Ua={class:"mb-2"},Ya=["onUpdate:modelValue"],Na={class:"mb-2"},Fa=["onUpdate:modelValue"],qa={class:"mb-2"},Ba=["onUpdate:modelValue"],Oa={class:"mb-2"},za=["onUpdate:modelValue"],Ga={class:"space-y-3"},Ha={key:0,class:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg"},Ka={class:"text-sm text-gray-700"},Qa={class:"bg-blue-50 p-3 border-2 border-blue-200"},Ja={class:"space-y-1"},Za={class:"text-gray-900"},Wa={class:"mt-2 pt-2 border-t-2 border-gray-200"},Xa={class:"flex gap-3"},el=["onClick","disabled"],tl={key:0,class:"fa fa-spinner fa-spin"},sl={key:1,class:"fa fa-paper-plane"},al={key:2},ll={key:3},ol=["onClick"],rl={key:0},nl={key:1},il=["onClick"],dl={key:0},ul={key:1},cl={class:"flex justify-between items-center p-5 border-b bg-gradient-to-r from-green-600 to-green-700"},gl={class:"text-lg font-bold text-white flex items-center gap-2"},fl={key:0,class:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b-2 border-gray-200"},vl={class:"flex gap-3 overflow-x-auto pb-2"},ml={key:0,class:"bg-white border-2 border-blue-300 rounded-xl w-20 hover:shadow-lg transition-all hover:scale-105"},pl=["src","onClick"],xl={key:1,class:"w-full h-5 bg-blue-100 rounded-lg flex items-center justify-center mb-2"},yl={key:0,class:"fa fa-file-pdf-o text-3xl text-red-600"},bl={key:1,class:"fa fa-file-word-o text-3xl text-blue-600"},hl={key:2,class:"fa fa-file-o text-3xl text-gray-600"},_l={class:"flex-1 p-5 space-y-4 overflow-y-auto bg-gray-50",style:{"max-height":"400px"}},wl={class:"flex-shrink-0"},kl={key:0,class:"w-10 h-10 rounded-full bg-green-600 flex items-center justify-center text-white shadow-md"},Cl={key:1,class:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold shadow-md"},Al={key:0,class:"text-xs text-gray-500"},Ml={class:"text-sm font-bold text-gray-900"},Sl={key:1,class:"text-xs text-gray-500"},Tl={key:1,class:"text-center py-8"},jl={class:"p-4 bg-white border-t border-gray-200"},Dl={class:"relative"},$l=["disabled"],Pl=["src"],Il={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-emerald-900/60 backdrop-blur-sm transition-opacity duration-300"},El={class:"text-center"},Rl={class:"text-sm text-gray-500 mb-6"},Ll={class:"flex justify-center gap-4"},Vl=["disabled"],Ul={key:0,class:"fa fa-spinner fa-spin mr-2"},Yl=["disabled"],Nl={key:2,class:"flex justify-center my-4 pb-10"},Fl=["disabled"],ql=["onClick"],Bl=["disabled"],Ol={key:3,class:"text-center my-5"},zl={class:"w-full"},Gl=1e3,Le=500,ye=4,Hl={__name:"index",setup(Kl){const be=Nt(),O=Ft(),c=u([]);let tt=u(!0),A=u(!1),z=u(!1);const _=u(O.mainDevServer);let R=u(null);const P=u("all"),W=u(!1),Ve=u(""),G=u(!1),ne=u(null),H=u(!1),K=u(!1),Q=u(!1),L=u(!1),V=u(!1),U=u(!1),i=u(null),st=u(""),Y=u("");u(null);const y=u(""),p=u(""),N=u(!1),C=u(!1),at=s=>{Ve.value=s,W.value=!0,b.value=!0},ie=()=>{W.value=!1,b.value=T()},Ue=s=>{if(!s)return"";const e=s.match(/^(.*?\.(?:jpg|jpeg|png))/i);return e?e[1]:s},le=(s,e={})=>({id:s.id,tracking_id:s.tracking_id,firstname:s.firstname,middlename:s.middlename,lastname:s.lastname,email:s.email,contact_number:s.contact_number,college:s.college,course:s.course,year_level:s.year_level,student_id_number:s.student_id_number,date_of_birth:s.date_of_birth,mother_maiden_name:s.mother_maiden_name,year_graduated:s.year_graduated,purpose:s.purpose,type_document_requests:s.type_document_requests||[],detail_fees_type_document_requests:s.detail_fees_type_document_requests||[],grand_total_payment:s.grand_total_payment,valid_id_front:s.valid_id_front||[],valid_id_back:s.valid_id_back||[],additional_documents:s.additional_documents||[],additional_response_details:s.additional_response_details||[],logs:s.logs||[],latest_status:s.latest_status||"",...e}),lt=async s=>{const e="Reviewed and Verified";if(p.value="",y.value="",s.latest_status===e)return!1;try{const n={timestamp:D().format("MMMM DD, YYYY h:mm:ss A"),status_remarks:e},a=s.logs?[...s.logs]:[];a.unshift(n);const g=le(s,{logs:a,latest_status:e});await $fetch(`${_.value}/api/registrar/${s.id}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:g}),s.logs=a,s.latest_status=e;const l=c.value.findIndex(d=>d.id===s.id);return l!==-1&&(c.value[l].logs=a,c.value[l].latest_status=e),y.value="✅ Status updated successfully!",setTimeout(()=>y.value="",3e3),!0}catch(n){return console.error("Error updating status:",n),p.value="❌ Failed to update record.",setTimeout(()=>p.value="",3e3),!1}},ot=async s=>{const e="Reviewed and Verified";if(s.latest_status!==e){p.value="⚠️ Please update the status first before notifying.";return}if(s.notified){p.value="⚠️ Email has already been sent for this verified status.";return}p.value="",y.value="",N.value=!0;try{await $fetch(`${_.value}/api/registrar/status/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:{id:s.id,latest_status:e}}),s.notified=!0,await ee(),y.value="✅ Email notification sent successfully!",setTimeout(()=>y.value="",3e3)}catch(n){console.error("Error sending email notification:",n),p.value="❌ Failed to send email notification.",setTimeout(()=>p.value="",3e3)}finally{N.value=!1}},rt=async s=>{(await lt(s)||s.latest_status==="Reviewed and Verified")&&await ot(s)},Ye=async s=>{if(Y.value.trim())try{const e={sender:"Registrar",message:Y.value.trim(),timestamp:D().format("MMMM DD, YYYY h:mm:ss A")},a=[...Array.isArray(s.additional_response_details)?s.additional_response_details.filter(d=>d.message!=="N/A"):[],e],g={...s,additional_response_details:a};await $fetch(`${_.value}/api/registrar/${s.id}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:g}),await $fetch(`${_.value}/api/registrar/status/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:{id:s.id,latest_status:s.latest_status||""}}),s.additional_response_details=a;const l=c.value.findIndex(d=>d.id===s.id);l!==-1&&(c.value[l].additional_response_details=a),Y.value="",y.value="✅ Follow-up message sent successfully!",setTimeout(()=>y.value="",3e3)}catch(e){console.error("Error sending follow-up message:",e),p.value="❌ Failed to send follow-up message.",setTimeout(()=>p.value="",3e3)}},nt=async s=>{y.value="",p.value="",C.value=!0;const e="Preparing Documents";try{const n={timestamp:D().format("MMMM DD, YYYY h:mm:ss A"),status_remarks:e},a=s.logs?[...s.logs]:[];a.unshift(n),R.value=s.id;const g=le(s,{logs:a});await $fetch(`${_.value}/api/registrar/${R.value}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:g}),s.logs=a;const l=c.value.findIndex(d=>d.id===s.id);l!==-1&&(c.value[l].logs=a),ke.value[s.id]=!0,await $fetch(`${_.value}/api/registrar/status/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:{id:s.id,latest_status:e}}),await ee(),y.value="✅ Confirm and email sent successfully!",setTimeout(()=>{y.value=""},3e3)}catch(n){console.error("Error verifying and sending email:",n),p.value="❌ Failed to verify and send email.",setTimeout(()=>{p.value=""},3e3)}finally{C.value=!1,L.value=!1}},it=async s=>{y.value="",p.value="",C.value=!0;const e="Releasing Documents";try{const n={timestamp:D().format("MMMM DD, YYYY h:mm:ss A"),status_remarks:e},a=s.logs?[...s.logs]:[];a.unshift(n),R.value=s.id;const g=le(s,{logs:a});await $fetch(`${_.value}/api/registrar/${R.value}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:g}),s.logs=a;const l=c.value.findIndex(d=>d.id===s.id);l!==-1&&(c.value[l].logs=a),Ce.value[s.id]=!0,await $fetch(`${_.value}/api/registrar/status/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:{id:s.id,latest_status:e}}),await ee(),y.value="✅ Confirm and email sent successfully!",setTimeout(()=>{y.value=""},3e3)}catch(n){console.error("Error verifying and sending email:",n),p.value="❌ Failed to verify and send email.",setTimeout(()=>{p.value=""},3e3)}finally{C.value=!1,V.value=!1}},dt=async s=>{y.value="",p.value="",C.value=!0;const e="Transaction Closed";try{const n={timestamp:D().format("MMMM DD, YYYY h:mm:ss A"),status_remarks:e},a=s.logs?[...s.logs]:[];a.unshift(n),R.value=s.id;const g=le(s,{logs:a});await $fetch(`${_.value}/api/registrar/${R.value}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:g}),s.logs=a;const l=c.value.findIndex(d=>d.id===s.id);l!==-1&&(c.value[l].logs=a),Ae.value[s.id]=!0,await $fetch(`${_.value}/api/registrar/status/transaction-closed/`,{method:"POST",headers:{"Content-Type":"application/json"},body:{id:s.id,latest_status:e}}),await ee(),y.value="✅ Confirm and email sent successfully!",setTimeout(()=>{y.value=""},3e3)}catch(n){console.error("Error verifying and sending email:",n),p.value="❌ Failed to verify and send email.",setTimeout(()=>{p.value=""},3e3)}finally{C.value=!1,U.value=!1}},ut=async s=>{ve.value=!0,s.follow_up_remarks="Kindly upload the receipt to this page: https://lsu.edu.ph/registrar/track";const e={...h.value,date_graduated_last_attended:D(h.value.date_graduated_last_attended).format("LL")};try{await $fetch(_.value+"/api/registrar/payment/fees/",{method:"POST",headers:{"Content-Type":"application/json"},body:e}),Pe.value=!0,setTimeout(()=>{Pe.value=!1},3e3)}catch(n){console.error("Error sending email:",n)}finally{ve.value=!1,ct(s)}},ct=async s=>{y.value="",p.value="",N.value=!0;const e="Assessment";try{const n={timestamp:D().format("MMMM DD, YYYY h:mm:ss A"),status_remarks:e},a=s.logs?[...s.logs]:[];a.unshift(n),R.value=s.id;const g=le(s,{logs:a});await $fetch(`${_.value}/api/registrar/${R.value}/edit/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:g}),s.logs=a;const l=c.value.findIndex(d=>d.id===s.id);l!==-1&&(c.value[l].logs=a),we.value[s.id]=!0,await $fetch(`${_.value}/api/registrar/status/update/`,{method:"POST",headers:{"Content-Type":"application/json"},body:{id:s.id,latest_status:e}}),await ee(),y.value="✅ Confirm and email sent successfully!",setTimeout(()=>{y.value=""},3e3)}catch(n){console.error("Error verifying and sending email:",n),p.value="❌ Failed to verify and send email.",setTimeout(()=>{p.value=""},3e3)}finally{N.value=!1}},J=()=>{G.value=!1,K.value=!1,L.value=!1,V.value=!1,U.value=!1,H.value=!1,Q.value=!1,i.value=null,ne.value=null},gt=s=>{J(),i.value=s,H.value=!0,b.value=!0,st.value=""},Ne=()=>{H.value=!1,b.value=T()},ft=s=>{J(),i.value=s,K.value=!0,b.value=!0,h.value.fullname=`${s.firstname} ${s.middlename} ${s.lastname}`,h.value.email=s.email,h.value.course=s.course,h.value.tracking_id=s.tracking_id,h.value.college=s.college,h.value.date_graduated_last_attended=D(s.date_graduated_last_attended).format("YYYY-MM-DD"),s.detail_fees_type_document_requests&&Array.isArray(s.detail_fees_type_document_requests)&&s.detail_fees_type_document_requests.length>0?h.value.detail_fees_type_document_requests=JSON.parse(JSON.stringify(s.detail_fees_type_document_requests)):h.value.detail_fees_type_document_requests=[],xe()},Fe=()=>{K.value=!1,i.value=null,b.value=T()},vt=s=>{J(),ne.value=s,G.value=!0,b.value=!0,Y.value=""},qe=()=>{G.value=!1,ne.value=null,b.value=T()},mt=s=>{J(),i.value=s,Q.value=!0,b.value=!0,Y.value=""},Be=()=>{Q.value=!1,i.value=null,b.value=T()},pt=async s=>{J(),i.value=s,L.value=!0,b.value=!0},Oe=()=>{L.value=!1,i.value=null,b.value=T()},xt=s=>{J(),i.value=s,V.value=!0,b.value=!0},ze=()=>{V.value=!1,i.value=null,b.value=T()},yt=s=>{J(),i.value=s,U.value=!0,b.value=!0},Ge=()=>{U.value=!1,i.value=null,b.value=T()},T=()=>K.value||L.value||V.value||U.value||H.value||W.value||G.value||Q.value||z.value,Z=u(""),He=u([{value:"Arts and Sciences, Engineering, Architecture, Computer Studies",label:"Arts and Sciences, Engineering, Architecture, Computer Studies"},{value:"Business, Commerce, Accountancy",label:"Business, Commerce, Accountancy"},{value:"Education / Graduate Studies",label:"Education / Graduate Studies"},{value:"Nursing / Tourism and Hospitality Management",label:"Nursing / Tourism and Hospitality Management"},{value:"Criminology / BS Psychology",label:"Criminology / BS Psychology"}]);u(null),u("asc");const de=u(!1);qt(async()=>{const s=O.user.email,e={"ccsea.registrar@lsu.edu.ph":"Arts and Sciences, Engineering, Architecture, Computer Studies","jorenlee.luna@lsu.edu.ph":"Business, Commerce, Accountancy","cba.registrar@lsu.edu.ph":"Business, Commerce, Accountancy","cte.registrar@lsu.edu.ph":"Education / Graduate Studies","onlinerequest@lsu.edu.ph":"Nursing / Tourism and Hospitality Management","ccje.registrar@lsu.edu.ph":"Criminology / BS Psychology"},n=["jorenleeluna24@gmail.com","registrar@lsu.edu.ph","jason.yap@lsu.edu.ph"],a=[...n,...Object.keys(e)];window.addEventListener("keydown",g=>{g.key==="Escape"&&W.value&&ie()}),O.user.isAuthenticated&&a.includes(s)?(n.includes(s)?de.value=!0:Z.value=e[s]||"",await $e(),be.push("/registrar/dashboard"),_e()):be.push("/registrar/dashboard")});let X=null,b=u(!1),he=u(!1);const ue=u(!1),_e=()=>{X&&clearInterval(X),X=Gt(async()=>{!T()&&!he.value&&!C.value&&!N.value&&!ue.value&&(await ee(),await bt())},Gl)};ae(()=>b.value,s=>{if(typeof window<"u"){const e=document.documentElement.classList;s?e.add("overflow-hidden"):e.remove("overflow-hidden")}});const ce=()=>{X&&(clearInterval(X),X=null)},bt=async()=>{ce();try{const s=c.value;if(!s||!Array.isArray(s)||s.length===0)return;const e={},n=[],a=g=>{const l=g.additional_response_details;return!l||!Array.isArray(l)||l.length===0?!1:l.some(d=>d.message&&d.message!=="N/A")};s.forEach(g=>{if(g.tracking_id)if(e[g.tracking_id]){const l=e[g.tracking_id],d=a(l),q=a(g);let re;d&&!q?re=g.id:!d&&q?(re=l.id,e[g.tracking_id]=g):(re=new Date(l.created_at)>new Date(g.created_at)?g.id:l.id,re===l.id&&(e[g.tracking_id]=g)),n.push(re)}else e[g.tracking_id]=g});for(const g of n)await $fetch(_.value+"/api/registrar/"+g+"/delete/",{method:"DELETE",headers:{"Content-Type":"application/json"}});n.length>0&&await $e()}catch(s){console.error("Error checking for duplicates:",s)}finally{_e()}},Ke=u({}),we=u({}),ke=u({}),Ce=u({}),Ae=u({}),Me=()=>{!c.value||!Array.isArray(c.value)||c.value.forEach(s=>{s&&s.id&&(Ke.value[s.id]=ht(s))})},Se=()=>{!c.value||!Array.isArray(c.value)||c.value.forEach(s=>{s&&s.id&&(we.value[s.id]=_t(s))})},Te=()=>{!c.value||!Array.isArray(c.value)||c.value.forEach(s=>{s&&s.id&&(ke.value[s.id]=wt(s))})},je=()=>{!c.value||!Array.isArray(c.value)||c.value.forEach(s=>{s&&s.id&&(Ce.value[s.id]=kt(s))})},De=()=>{!c.value||!Array.isArray(c.value)||c.value.forEach(s=>{s&&s.id&&(Ae.value[s.id]=Ct(s))})},ht=s=>!s||!s.logs||!Array.isArray(s.logs)||s.logs.length===0?!1:s.logs.some(e=>e.status_remarks&&e.status_remarks.includes("Reviewed and Verified")),_t=s=>!s||!s.logs||!Array.isArray(s.logs)||s.logs.length===0?!1:s.logs.some(e=>e.status_remarks&&e.status_remarks.includes("Assessment")),wt=s=>!s||!s.logs||!Array.isArray(s.logs)||s.logs.length===0?!1:s.logs.some(e=>e.status_remarks&&e.status_remarks.includes("Preparing Documents")),kt=s=>!s||!s.logs||!Array.isArray(s.logs)||s.logs.length===0?!1:s.logs.some(e=>e.status_remarks&&e.status_remarks.includes("Releasing Documents")),Ct=s=>!s||!s.logs||!Array.isArray(s.logs)||s.logs.length===0?!1:s.logs.some(e=>e.status_remarks&&e.status_remarks.includes("Transaction Closed"));ae(()=>c.value,()=>{Me(),Se(),Te(),je(),De()},{deep:!0});const ee=async()=>{if(!ue.value){ue.value=!0;try{const s=await $fetch(_.value+"/api/registrar/list").catch(()=>[])||[],e=(n,a)=>{const g=new Map((n||[]).map(d=>[d.id,d])),l=[];for(const d of a||[])d&&g.has(d.id)?(Object.assign(g.get(d.id),d),l.push(g.get(d.id))):d&&l.push(d);return l};if(Array.isArray(s)&&(F.value.length>0?(F.value=e(F.value,s),Ie()):c.value.length===0?c.value=s:c.value=e(c.value,s),Me(),Se(),Te(),je(),De(),i.value)){const n=s.find(a=>a.id===i.value.id);n&&Object.assign(i.value,n)}}catch(s){console.error("Error fetching list items quietly:",s)}finally{ue.value=!1}}},$e=async()=>{ge.value=!0;try{const s=await $fetch(_.value+"/api/registrar/list").catch(e=>(console.error("Fetch error:",e),[]));c.value=Array.isArray(s)?s:[],F.value=[],fe.value="",Me(),Se(),Te(),je(),De()}catch(s){console.error("Error fetching list items:",s),c.value=[]}finally{ge.value=!1}};Ze(()=>{ce()});const At=()=>{be.push("/registrar/login"),O.removeToken()},w=u([]),te=u(!1),Qe=I(()=>w.value.length===pe.value.length&&pe.value.length>0),Mt=()=>{ce(),he.value=!0,Qe.value?w.value=[]:w.value=pe.value.map(s=>s.id),_e(),he.value=!1},St=()=>{w.value.length!==0&&(z.value=!0,b.value=!0)},Tt=()=>{z.value=!1,b.value=T()},jt=async()=>{if(w.value.length!==0)try{te.value=!0;for(const s of w.value)await $fetch(_.value+"/api/registrar/"+s+"/delete/",{method:"DELETE",headers:{"Content-Type":"application/json"}});w.value=[],await $e(),z.value=!1,b.value=T()}catch(s){console.error("Error deleting items:",s)}finally{te.value=!1}},se=I(()=>{let s=[...c.value];return P.value==="done"?s=s.filter(e=>e.logs?.some(n=>(n?.status_remarks?.toLowerCase()||"").includes("transaction closed"))):P.value==="pending"&&(s=s.filter(e=>e.logs?.every(n=>!(n?.status_remarks?.toLowerCase()||"").includes("transaction closed")))),zt.orderBy(s,"created_at","asc")}),Dt=s=>se.value.filter(e=>e.college===s&&e.logs?.some(n=>(n?.status_remarks?.toLowerCase()||"").includes("transaction closed"))).length,$t=s=>se.value.filter(e=>e.college===s&&e.logs?.every(n=>!(n?.status_remarks?.toLowerCase()||"").includes("transaction closed"))).length,Pt=s=>se.value.filter(e=>e.college===s).length,It=s=>{const e={"ccsea.registrar@lsu.edu.ph":"Arts and Sciences, Engineering, Architecture, Computer Studies","jorenlee.luna@lsu.edu.ph":"Business, Commerce, Accountancy","cba.registrar@lsu.edu.ph":"Business, Commerce, Accountancy","cte.registrar@lsu.edu.ph":"Education / Graduate Studies","onlinerequest@lsu.edu.ph":"Nursing / Tourism and Hospitality Management","ccje.registrar@lsu.edu.ph":"Criminology / BS Psychology"};return Object.keys(e).filter(n=>e[n]===s)},ge=u(!0),$=u(1),fe=u(""),F=u([]),Pe=u(!1),ve=u(!1),Je=I(()=>Math.ceil(se.value.length/Le)),me=I(()=>{const s=($.value-1)*Le,e=s+Le;return se.value.slice(s,e)}),pe=I(()=>!Z.value||!Z.value?me.value:me.value.filter(e=>e.college===Z.value)),Et=I(()=>{const s=[];let e=Math.max(1,$.value-Math.floor(ye/2)),n=Math.min(Je.value,e+ye-1);n-e+1<ye&&(e=Math.max(1,n-ye+1));for(let a=e;a<=n;a++)s.push(a);return s});Ze(()=>{window.removeEventListener("keydown",s=>{s.key==="Escape"&&W.value&&ie()}),ce()});const Ie=()=>{$.value=1,F.value.length===0&&c.value.length>0&&(F.value=[...c.value]);const s=fe.value.toLowerCase().trim(),e=F.value.length>0?F.value:c.value;c.value=e.filter(n=>n?Object.keys(n).some(a=>typeof n[a]=="string"?n[a].toLowerCase().includes(s):!1):!1),w.value=[]},oe=I(()=>!i.value?.logs||!Array.isArray(i.value.logs)?[]:[...i.value.logs].sort((s,e)=>{const n=D(s.timestamp,"MMMM DD, YYYY h:mm:ss A"),a=D(e.timestamp,"MMMM DD, YYYY h:mm:ss A");return n.valueOf()-a.valueOf()}));ae(c,s=>{}),ae(Z,()=>{w.value=[]}),ae(P,()=>{w.value=[]});const Rt=I(()=>O.user.email==="jorenleeluna24@gmail.com"||O.user.email==="registrar@lsu.edu.ph"),h=u({payment_id:"PID"+D().valueOf(),fullname:"",email:"",course:"",college:"",date_graduated_last_attended:"",total:"0",tracking_id:"",receipt_image_url:[],detail_fees_type_document_requests:[]}),Lt=()=>{h.value.detail_fees_type_document_requests.push({fee_name:"",amount:0}),xe()},Vt=s=>{h.value.detail_fees_type_document_requests.splice(s,1),xe()},xe=()=>{let s=0;h.value.detail_fees_type_document_requests.forEach(n=>{s+=Number((n.amount||0).toString())});const e=s.toFixed(2);h.value.total=e};ae(()=>h.value.detail_fees_type_document_requests,()=>xe(),{deep:!0});const Ut=I(()=>h.value?.detail_fees_type_document_requests?.some(s=>!s.fee_name||s.fee_name.trim()===""));return(s,e)=>{const n=Yt;return r(),o(S,null,[t("div",null,[t("div",Kt,[k(t("div",Qt,[t("div",Jt,[t("div",Zt,[t("div",Wt,[e[21]||(e[21]=t("i",{class:"fa fa-user mx-2","aria-hidden":"true"},null,-1)),t("h1",Xt,f(M(O).user.email),1)]),t("div",{onClick:e[0]||(e[0]=a=>Xe(A)?A.value=!M(A):A=!M(A)),class:"w-10 px-1.5 lg:hidden flex"},[t("i",{class:v(["fa text-3xl text-white",M(A)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)])]),e[22]||(e[22]=Ee('<div class="" data-v-82d37905><div class="w-fit mx-auto mt-5 mb-3" data-v-82d37905><img src="https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/logos/LSU_Seal.PNG" class="lg:w-24 w-20 mx-auto" data-v-82d37905></div><div class="text-center" data-v-82d37905><h1 class="font-bold text-green-800 text-2xl" data-v-82d37905>Dashboard</h1></div><div class="mx-auto mt-10 mb-5 grid grid-cols-1" data-v-82d37905><a href="/registrar/dashboard" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-black hover:bg-black hover:text-white" data-v-82d37905><i class="fa fa-list mr-3" aria-hidden="true" data-v-82d37905></i> All Request Lists </a><a href="/" class="text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white" data-v-82d37905><i class="fa fa-globe mr-3" aria-hidden="true" data-v-82d37905></i> LSU HOME PAGE </a></div></div>',1))])],512),[[We,M(A)]]),t("div",es,[t("div",ts,[t("div",ss,[t("div",{onClick:e[1]||(e[1]=a=>Xe(A)?A.value=!M(A):A=!M(A)),class:"w-auto flex items-center lg:px-1.5"},[t("i",{class:v(["fa text-3xl text-white",M(A)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2),e[23]||(e[23]=t("p",{class:"text-white whitespace-nowrap lg:ml-5 ml-3 font-bold uppercase lg:text-sm text-xs"}," Registrar ",-1))]),t("button",{onClick:At,class:"flex hover:font-bold pt-1"},[...e[24]||(e[24]=[t("i",{class:"fa fa-sign-out text-white text-xl"},null,-1),t("h1",{class:"text-xs text-white p-1.5 lg:flex hidden"},"Log Out",-1)])])])]),Rt.value?(r(),o("div",as,[t("div",ls,[(r(!0),o(S,null,E(He.value,a=>(r(),o("div",{key:a.value,class:"border border-gray-300 rounded-lg px-2 py-1 shadow-sm w-full lg:mb-0 mb-2"},[t("div",os,f(a.label),1),t("div",rs,f(It(a.value).join(", ")),1),t("div",ns,[t("span",is," Pending: "+f($t(a.value)),1),t("span",ds," Done: "+f(Dt(a.value)),1),t("span",us," Total: "+f(Pt(a.value)),1)])]))),128))])])):m("",!0),t("div",null,[t("div",cs,[k(t("div",gs,[e[79]||(e[79]=t("div",{class:"w-full shadow bg-gray-100 text-green-900 font-bold px-2 text-center mb-1 py-1 text-xs uppercase"}," All Request Lists ",-1)),y.value?(r(),o("div",fs,[t("p",vs,f(y.value),1)])):m("",!0),p.value?(r(),o("div",ms,[t("p",ps,f(p.value),1)])):m("",!0),t("div",xs,[t("div",ys,[de.value?(r(),o("div",bs,[t("button",{onClick:Mt,class:"flex items-center text-xs px-2 py-1 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 transition whitespace-nowrap"},f(Qe.value?"Deselect All":"Select All"),1),t("button",{onClick:St,disabled:w.value.length===0,class:v([w.value.length===0?"bg-pink-100 text-red-300 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700","flex items-center text-xs px-2 py-1 rounded-md transition whitespace-nowrap"])},[e[25]||(e[25]=t("i",{class:"fa fa-trash mr-1"},null,-1)),x(" ("+f(w.value.length)+") ",1)],10,hs)])):m("",!0),de.value?(r(),o("div",_s,[k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>Z.value=a),class:"w-full text-xs px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-green-500"},[e[26]||(e[26]=t("option",{value:""},"All Colleges",-1)),(r(!0),o(S,null,E(He.value,a=>(r(),o("option",{key:a.value,value:a.value},f(a.label),9,ws))),128))],512),[[Re,Z.value]])])):m("",!0),t("div",ks,[k(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>fe.value=a),type:"search",placeholder:"Search",class:"text-xs w-full border border-gray-300 rounded-md px-2 py-1 pr-8 focus:outline-none focus:ring-1 focus:ring-green-500 focus:border-green-500",onKeyup:et(Ie,["enter"])},null,544),[[j,fe.value]]),t("button",{onClick:Ie,class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-green-600"},[...e[27]||(e[27]=[t("i",{class:"fa fa-search"},null,-1)])])]),t("div",Cs,[t("button",{onClick:e[4]||(e[4]=a=>P.value="all"),class:v([P.value==="all"?"bg-gray-900 text-white":"bg-white text-gray-900 border hover:bg-gray-900 hover:text-white","text-xs border border-gray-900 px-2 py-1 rounded-full transition"])}," All ",2),t("button",{onClick:e[5]||(e[5]=a=>P.value="pending"),class:v([P.value==="pending"?"bg-red-500 text-white":"bg-white text-red-600 border hover:bg-red-500 hover:text-white","text-xs border border-red-600 px-2 py-1 rounded-full transition"])}," Pending ",2),t("button",{onClick:e[6]||(e[6]=a=>P.value="done"),class:v([P.value==="done"?"bg-green-600 text-white":"bg-white text-green-600 border hover:bg-green-600 hover:text-white","text-xs border border-green-600 px-2 py-1 rounded-full transition"])}," Done ",2)])])]),t("div",As,[t("div",Ms,[ge.value?(r(),o("div",Ss,[...e[28]||(e[28]=[Ee('<div class="" data-v-82d37905><div class="flex animate-pulse space-x-4" data-v-82d37905><div class="flex-1" data-v-82d37905><div class="h-10 bg-gray-300" data-v-82d37905></div><div class="h-0.5 bg-gray-100" data-v-82d37905></div><div class="h-10 bg-gray-200" data-v-82d37905></div><div class="h-0.5 bg-gray-100" data-v-82d37905></div><div class="h-10 bg-gray-300" data-v-82d37905></div><div class="h-0.5 bg-gray-100" data-v-82d37905></div><div class="h-10 bg-gray-200" data-v-82d37905></div><div class="h-0.5 bg-gray-100" data-v-82d37905></div><div class="h-10 bg-gray-300" data-v-82d37905></div><div class="h-0.5 bg-gray-100" data-v-82d37905></div><div class="h-10 bg-gray-100" data-v-82d37905></div><div class="h-0.5 bg-gray-100" data-v-82d37905></div></div></div></div>',1)])])):(r(),o("div",Ts,[me.value.length>0?(r(),o("div",js,[(r(!0),o(S,null,E(pe.value,(a,g)=>(r(),o("div",{class:"flex items-center h-auto shadow lg:mb-0 mb-3 border-gray-200",key:g},[de.value?(r(),o("div",Ds,[t("div",$s,[k(t("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":e[7]||(e[7]=l=>w.value=l),class:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2"},null,8,Ps),[[Ot,w.value]])])])):m("",!0),t("div",{class:v(["w-full border-l lg:flex items-center",g%2?"bg-gray-100":""])},[t("div",Is,[t("div",Es,[t("div",Rs,[e[29]||(e[29]=t("i",{class:"fa fa-user mr-2.5"},null,-1)),x(" "+f(a.lastname)+", "+f(a.firstname)+" "+f(a.middlename),1)])])]),t("div",Ls,[t("div",Vs,[t("div",Us,[t("button",{class:"lg:w-fit w-full px-2 py-1 font-bold text-[#ffffff] cursor-pointer lg:px-5 border-b shadow-lg border-green-500 bg-green-800 hover:bg-[#fff] hover:text-green-800",onClick:l=>mt(a)},[...e[30]||(e[30]=[t("i",{class:"fa fa-comments mr-3"},null,-1),t("i",{class:"fa fa-file"},null,-1)])],8,Ys),t("button",{onClick:l=>vt(a),class:v(["w-full lg:text-center text-left px-1.5 py-1 cursor-pointer lg:px-5 border-b shadow-lg border-green-500 hover:bg-green-800 hover:text-white",Ke.value[a.id]?"bg-green-800 text-white":"bg-white text-green-800"])}," Verify ",10,Ns),t("button",{class:v(["w-full lg:text-center text-left px-1.5 py-1 cursor-pointer lg:px-5 border-b shadow-lg border-green-500 hover:bg-green-800 hover:text-white",we.value[a.id]?"bg-green-800 text-white":"bg-white text-green-800"]),onClick:l=>ft(a)}," Assessment ",10,Fs),t("button",{onClick:l=>pt(a),class:v([ke.value[a.id]?"bg-green-800 text-white":"bg-white text-green-800","w-full lg:text-center text-left px-1.5 py-1 cursor-pointer lg:px-5 border-b shadow-lg border-green-500 hover:bg-green-800 hover:text-white"])}," Preparing ",10,qs),t("button",{onClick:l=>xt(a),class:v([Ce.value[a.id]?"bg-green-800 text-white":"bg-white text-green-800","w-full lg:text-center text-left px-1.5 py-1 cursor-pointer lg:px-5 border-b shadow-lg border-green-500 hover:bg-green-800 hover:text-white"])}," Releasing ",10,Bs),t("button",{onClick:l=>yt(a),class:v([Ae.value[a.id]?"bg-green-800 text-white":"bg-white text-green-800","w-full lg:text-center text-left px-1.5 py-1 cursor-pointer lg:px-5 border-b shadow-lg border-green-500 hover:bg-green-800 hover:text-white"])}," Closed ",10,Os),t("button",{class:"lg:w-fit w-full px-2 py-1 text-green-700 cursor-pointer bg-white border-b shadow-lg border-green-500 hover:bg-green-800 hover:text-white",onClick:l=>gt(a)},[...e[31]||(e[31]=[t("i",{class:"fa fa-ellipsis-h"},null,-1)])],8,zs)])])]),t("div",Gs,[t("div",Hs,[t("span",Ks,f(a.course),1)])]),K.value&&i.value===a?(r(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:Fe},[t("div",{class:v(["bg-white rounded-xl shadow-2xl p-6 w-full max-w-3xl mx-4 transform transition-transform duration-300 max-h-[90vh] overflow-auto",{"scale-100 opacity-100":K.value,"scale-95 opacity-0":!K.value}]),onClick:e[8]||(e[8]=B(()=>{},["stop"]))},[t("div",{class:"flex justify-between items-center mb-4 border-b pb-3"},[e[33]||(e[33]=t("h3",{class:"text-lg font-medium text-gray-900"}," Payment Information ",-1)),t("button",{onClick:Fe,class:"text-gray-400 hover:text-gray-500"},[...e[32]||(e[32]=[t("i",{class:"fa fa-times"},null,-1)])])]),t("div",Qs,[t("div",Js,[t("div",null,[t("label",Zs,"Total : "+f(h.value.total),1)])]),t("div",Ws,[!h.value?.detail_fees_type_document_requests||h.value.detail_fees_type_document_requests.length===0?(r(),o("div",Xs,[...e[34]||(e[34]=[t("i",{class:"fa fa-file-invoice-dollar text-3xl text-gray-400 mb-2"},null,-1),t("p",{class:"text-sm text-gray-500"}," No document request fees added yet ",-1),t("p",{class:"text-xs text-gray-400 mt-1"},' Click "Add Fee" below to add document request fees ',-1)])])):m("",!0),(r(!0),o(S,null,E(h.value?.detail_fees_type_document_requests,(l,d)=>(r(),o("div",{key:d,class:"flex flex-wrap items-end gap-3 mb-3 bg-white p-3 rounded-lg shadow-sm border border-gray-200"},[t("div",ea,[t("label",{for:"fee_name_"+d,class:"block text-xs font-medium text-gray-700 mb-1"}," Fee Name ",8,ta),k(t("input",{type:"text",id:"fee_name_"+d,"onUpdate:modelValue":q=>l.fee_name=q,class:"w-full text-sm py-2 px-3 rounded-md border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none shadow-sm"},null,8,sa),[[j,l.fee_name]])]),t("div",aa,[t("label",{for:"fee_amount_"+d,class:"block text-xs font-medium text-gray-700 mb-1"}," Amount ",8,la),k(t("input",{type:"number",id:"fee_amount_"+d,"onUpdate:modelValue":q=>l.amount=q,class:"w-full text-sm py-2 px-3 rounded-md border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none shadow-sm"},null,8,oa),[[j,l.amount]])]),t("button",{onClick:q=>Vt(d),class:"px-3 py-2 text-xs text-red-500 bg-red-50 border border-red-500 rounded-md hover:bg-red-600 hover:text-white transition-all duration-200",title:"Remove Fee"},[...e[35]||(e[35]=[t("i",{class:"fa fa-trash"},null,-1)])],8,ra)]))),128)),t("button",{onClick:Lt,class:"block mx-auto mt-3 px-4 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 transition-all"}," + Add Fee ")]),t("div",na,[e[36]||(e[36]=t("label",{class:"block text-xs font-medium text-gray-700 mb-1"}," Follow Up Remarks: ",-1)),k(t("textarea",{"onUpdate:modelValue":l=>a.follow_up_remarks=l,rows:"3",placeholder:"Follow Up Remarks",class:"w-full text-sm py-2 px-3 rounded-md border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none shadow-sm"},null,8,ia),[[j,a.follow_up_remarks]])]),t("div",da,[t("button",{onClick:l=>ut(a),disabled:Ut.value||ve.value,class:"w-full py-2 font-semibold rounded-md border border-green-600 bg-green-600 text-white hover:bg-white hover:text-green-600 transition-all disabled:opacity-60 disabled:cursor-not-allowed"},[ve.value?(r(),o(S,{key:0},[e[37]||(e[37]=t("svg",{class:"animate-spin h-4 w-4 inline-block mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)),e[38]||(e[38]=x(" Sending... ",-1))],64)):(r(),o(S,{key:1},[x("Send Payment")],64))],8,ua)]),Pe.value?(r(),o("div",ca," ✅ Payment details sent successfully! ")):m("",!0)])],2)])):m("",!0)],2),L.value&&i.value===a?(r(),o("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:Oe},[t("div",{class:v(["bg-white dark:bg-gray-800 rounded-xl shadow-3xl p-6 w-full max-w-sm mx-4 transform transition-all duration-300 ease-out",{"scale-100 opacity-100":L.value,"scale-95 opacity-0":!L.value}]),onClick:e[9]||(e[9]=B(()=>{},["stop"]))},[t("div",{class:"flex items-center justify-between pb-4 mb-4 border-b"},[e[40]||(e[40]=t("h2",{class:"text-xl font-bold text-gray-800 dark:text-gray-100"}," Verify & Prepare Documents ",-1)),t("button",{onClick:Oe,class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700"},[...e[39]||(e[39]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6"},[t("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})],-1)])])]),t("div",ga,[t("button",{onClick:l=>nt(a),class:v(["w-full flex items-center justify-center gap-2 px-4 py-0.5 text-base font-semibold rounded-lg transition-all duration-250 ease-in-out",{"bg-green-600 hover:bg-white hover:text-green-600 text-white hover:border hover:border-green-600  shadow-md hover:shadow-lg":!C.value,"bg-gray-400 text-white cursor-not-allowed":C.value}]),disabled:C.value},[C.value?(r(),o("span",va,[...e[41]||(e[41]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Notifying... ",-1)])])):(r(),o("span",ma,"Notify"))],10,fa)])],2)])):m("",!0),H.value&&i.value===a?(r(),o("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-xs transition-opacity duration-300",onClick:Ne},[t("div",{class:v(["bg-white rounded-lg p-6 max-w-2xl w-full mx-4 transform transition-transform duration-300 max-h-[90vh] overflow-auto",{"scale-100 opacity-100":H.value,"scale-95 opacity-0":!H.value}]),onClick:e[10]||(e[10]=B(()=>{},["stop"]))},[t("div",pa,[t("h3",xa," Status Logs - "+f(i.value?.tracking_id||"N/A"),1),t("button",{onClick:Ne,class:"text-gray-400 hover:text-gray-500"},[...e[42]||(e[42]=[t("i",{class:"fa fa-times"},null,-1)])])]),t("div",ya,[!i.value?.logs||i.value.logs.length===0?(r(),o("div",ba," No logs available ")):(r(),o("div",ha,[(r(!0),o(S,null,E(oe.value,(l,d)=>(r(),o("div",{key:d,class:v(["border-l-4 rounded-r text-[10px]",d===oe.value.length-1?"border-green-500 bg-green-50 py-3 ":"border-gray-300 bg-gray-50"])},[t("div",_a,[t("div",{class:v(["font-medium w-9/12",d===oe.value.length-1?"text-green-800 text-sm":"text-gray-500"])},[t("div",{class:v(["w-full bg-transparent focus:outline-none px-1",d===oe.value.length-1?"border-green-300 focus:border-green-500":"border-gray-300 focus:border-gray-500"])},f(l.status_remarks),3)],2),t("div",wa,[t("div",{class:v(["whitespace-nowrap bg-transparent text-center -mb-0.5 focus:outline-none px-1 pb-0.5",d===oe.value.length-1?"border-green-300 focus:border-green-500":"border-gray-300 focus:border-gray-500"])},f(l.timestamp),3)])])],2))),128))]))])],2)])):m("",!0),G.value&&ne.value===a?(r(),o("div",{key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-md transition-opacity duration-300",onClick:qe},[t("div",{class:v(["bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-2xl px-5 py-2 w-11/12 mx-auto transform transition-transform duration-300 max-h-[95vh] overflow-y-auto",{"scale-100 opacity-100":G.value,"scale-95 opacity-0":!G.value}]),onClick:e[11]||(e[11]=B(()=>{},["stop"]))},[t("div",ka,[t("div",Ca,[e[44]||(e[44]=t("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center shadow-lg"},[t("i",{class:"fa fa-user text-white text-xl"})],-1)),t("div",null,[e[43]||(e[43]=t("h3",{class:"text-lg font-bold text-gray-900"}," Personal Information ",-1)),t("p",null,f(a.tracking_id),1)])]),t("button",{onClick:qe,class:"w-10 h-10 flex items-center justify-center rounded-full bg-red-100 text-red-600 hover:bg-red-600 hover:text-white transition-all duration-200 shadow-md"},[...e[45]||(e[45]=[t("i",{class:"fa fa-times text-lg"},null,-1)])])]),t("div",Aa,[t("div",Ma,[e[51]||(e[51]=t("h4",{class:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa fa-id-card text-green-600"}),x(" Personal Details ")],-1)),t("div",Sa,[e[46]||(e[46]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-user text-green-600 mr-2"}),x(" Fullname ")],-1)),t("div",Ta,f(a.firstname)+" "+f(a.middlename)+" "+f(a.lastname),1)]),t("div",ja,[e[47]||(e[47]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-birthday-cake text-green-500 mr-2"}),x(" Date of Birth ")],-1)),k(t("input",{type:"text",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.birthdate=l},null,8,Da),[[j,a.birthdate]])]),t("div",$a,[e[48]||(e[48]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-female text-green-500 mr-2"}),x(" Mother's Maiden Name ")],-1)),k(t("input",{type:"text",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.mother_maiden_name=l},null,8,Pa),[[j,a.mother_maiden_name]])]),t("div",Ia,[e[49]||(e[49]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-envelope text-green-600 mr-2"}),x(" Email ")],-1)),k(t("input",{type:"text",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.email=l},null,8,Ea),[[j,a.email]])]),t("div",null,[e[50]||(e[50]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-phone text-green-600 mr-2"}),x(" Contact Number ")],-1)),k(t("input",{type:"text",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.contact_number=l},null,8,Ra),[[j,a.contact_number]])])]),t("div",La,[t("div",Va,[e[61]||(e[61]=t("h4",{class:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fa fa-graduation-cap text-green-600"}),x(" Academic Information ")],-1)),t("div",Ua,[e[53]||(e[53]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-graduation-cap text-green-500 mr-2"}),x(" ICC / LSU Graduate? ")],-1)),k(t("select",{class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.alumni=l},[...e[52]||(e[52]=[t("option",{value:"yes"},"Alumnus",-1),t("option",{value:"no"}," Non-Alumnus ",-1)])],8,Ya),[[Re,a.alumni]])]),t("div",Na,[e[54]||(e[54]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-calendar text-green-500 mr-2"}),x(" Academic Year Graduated or Attended ")],-1)),k(t("input",{type:"text",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.year_graduated_last_attended=l},null,8,Fa),[[j,a.year_graduated_last_attended]])]),t("div",qa,[e[56]||(e[56]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-university text-green-500 mr-2"}),x(" College ")],-1)),k(t("select",{class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.college=l},[...e[55]||(e[55]=[Ee('<option value="" data-v-82d37905>Choose</option><option value="Arts and Sciences, Engineering, Architecture, Computer Studies" data-v-82d37905> Arts and Sciences, Engineering, Architecture, Computer Studies </option><option value="Business, Commerce, Accountancy" data-v-82d37905> Business, Commerce, Accountancy </option><option value="Education / Graduate Studies" data-v-82d37905> Education / Graduate Studies </option><option value="Nursing / Tourism and Hospitality Management" data-v-82d37905> Nursing / Tourism and Hospitality Management </option><option value="Criminology / BS Psychology" data-v-82d37905> Criminology / BS Psychology </option>',6)])],8,Ba),[[Re,a.college]])]),t("div",Oa,[e[57]||(e[57]=t("label",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-book text-green-500 mr-2"}),x(" Course ")],-1)),k(t("input",{type:"text",class:"w-full bg-white border border-gray-300 rounded-lg px-4 py-1 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all","onUpdate:modelValue":l=>a.course=l},null,8,za),[[j,a.course]])]),t("div",Ga,[a.details?(r(),o("div",Ha,[e[58]||(e[58]=t("p",{class:"flex items-center text-sm font-semibold text-gray-700 mb-2"},[t("i",{class:"fa fa-info-circle text-green-600 mr-2"}),x(" Purpose and Details: ")],-1)),t("p",Ka,f(a.details),1)])):m("",!0)]),t("div",Qa,[e[60]||(e[60]=t("h4",{class:"text-xs font-bold text-blue-800 mb-2 flex items-center uppercase"},[t("i",{class:"fa fa-file-text mr-2"}),x("Requested Document/s ")],-1)),t("div",Ja,[(r(!0),o(S,null,E(a.detail_fees_type_document_requests,(l,d)=>(r(),o("div",{key:d,class:"flex items-center gap-2 text-xs"},[e[59]||(e[59]=t("i",{class:"fa fa-check-circle text-blue-600 text-[10px]"},null,-1)),t("span",Za,f(l.fee_name),1)]))),128))])])])])]),t("div",Wa,[t("div",Xa,[t("button",{onClick:l=>rt(a),disabled:N.value,class:"flex-1 flex items-center justify-center gap-2 px-6 py-3 font-bold text-white bg-gradient-to-r from-green-600 to-green-700 rounded-xl shadow-lg hover:shadow-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[N.value?(r(),o("i",tl)):(r(),o("i",sl)),N.value?(r(),o("span",al,"Verifying...")):(r(),o("span",ll,"Verify Information"))],8,el)])])],2)])):m("",!0),V.value&&i.value===a?(r(),o("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:ze},[t("div",{class:v(["bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4 transform transition-transform duration-300",{"scale-100 opacity-100":V.value,"scale-95 opacity-0":!V.value}]),onClick:e[12]||(e[12]=B(()=>{},["stop"]))},[t("div",{class:"flex justify-between items-center mb-4 border-b pb-3"},[e[63]||(e[63]=t("h3",{class:"text-lg font-medium text-gray-900"}," Releasing Documents ",-1)),t("button",{onClick:ze,class:"text-gray-400 hover:text-gray-500"},[...e[62]||(e[62]=[t("i",{class:"fa fa-times"},null,-1)])])]),t("div",{onClick:l=>it(a),class:v(["w-full text-center px-2 py-1 font-bold bg-green-600 text-white rounded-md mt-2 cursor-pointer hover:bg-white hover:text-green-600 border hover:border-green-600",{"opacity-75 cursor-not-allowed":C.value}])},[C.value?(r(),o("span",rl,[...e[64]||(e[64]=[t("i",{class:"fa fa-spinner fa-spin mr-1"},null,-1),x(" Confirming... ",-1)])])):(r(),o("span",nl,"Confirm"))],10,ol)],2)])):m("",!0),U.value&&i.value===a?(r(),o("div",{key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:Ge},[t("div",{class:v(["bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4 transform transition-transform duration-300",{"scale-100 opacity-100":U.value,"scale-95 opacity-0":!U.value}]),onClick:e[13]||(e[13]=B(()=>{},["stop"]))},[t("div",{class:"flex justify-between items-center mb-4 border-b pb-3"},[e[66]||(e[66]=t("h3",{class:"text-lg font-medium text-gray-900"}," Transaction Closed ",-1)),t("button",{onClick:Ge,class:"text-gray-400 hover:text-gray-500"},[...e[65]||(e[65]=[t("i",{class:"fa fa-times"},null,-1)])])]),t("div",{onClick:l=>dt(a),class:v(["w-full text-center px-2 py-1 font-bold bg-green-600 text-white rounded-md mt-2 cursor-pointer hover:bg-white hover:text-green-600 border hover:border-green-600",{"opacity-75 cursor-not-allowed":C.value}])},[C.value?(r(),o("span",dl,[...e[67]||(e[67]=[t("i",{class:"fa fa-spinner fa-spin mr-1"},null,-1),x(" Confirming... ",-1)])])):(r(),o("span",ul,"Confirm"))],10,il)],2)])):m("",!0),Q.value&&i.value===a?(r(),o("div",{key:6,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:Be},[t("div",{class:v(["bg-white rounded-xl shadow-2xl w-full max-w-3xl mx-4 transform transition-transform duration-300 max-h-[90vh] overflow-hidden flex flex-col",{"scale-100 opacity-100":Q.value,"scale-95 opacity-0":!Q.value}]),onClick:e[17]||(e[17]=B(()=>{},["stop"]))},[t("div",cl,[t("h3",gl,[e[68]||(e[68]=t("i",{class:"fa fa-comments"},null,-1)),x(" Communication Chat - "+f(i.value?.tracking_id||"N/A"),1)]),t("button",{onClick:Be,class:"text-white hover:text-gray-200 transition-colors"},[...e[69]||(e[69]=[t("i",{class:"fa fa-times text-xl"},null,-1)])])]),i.value.additional_documents&&i.value.additional_documents.length>0&&i.value.additional_documents[0].name!=="N/A"||i.value.valid_id_front&&i.value.valid_id_front.length>0||i.value.valid_id_back&&i.value.valid_id_back.length>0?(r(),o("div",fl,[e[70]||(e[70]=t("div",{class:"text-xs font-bold text-gray-700 uppercase mb-3 flex items-center gap-2"},[t("i",{class:"fa fa-thumb-tack text-green-600"}),t("i",{class:"fa fa-paperclip text-green-600"}),t("span",null,"Attached Documents")],-1)),t("div",vl,[i.value.additional_documents&&i.value.additional_documents.length>0&&i.value.additional_documents[0].name!=="N/A"?(r(!0),o(S,{key:0},E(i.value.additional_documents,(l,d)=>(r(),o("div",{key:"doc-"+d,class:"flex-shrink-0"},[l.url!=="N/A"?(r(),o("div",ml,[l.url&&(l.url.includes("jpg")||l.url.includes("jpeg")||l.url.includes("png"))?(r(),o("img",{key:0,src:Ue(l.url),alt:"Document",class:"w-full h-5 object-cover rounded-lg border border-gray-300 cursor-pointer",onClick:q=>at(l.url)},null,8,pl)):(r(),o("div",xl,[l.name&&l.name.includes(".pdf")?(r(),o("i",yl)):l.name&&(l.name.includes(".doc")||l.name.includes(".docx"))?(r(),o("i",bl)):(r(),o("i",hl))]))])):m("",!0)]))),128)):m("",!0)])])):m("",!0),t("div",_l,[Array.isArray(i.value.additional_response_details)&&i.value.additional_response_details.length>0&&i.value.additional_response_details[0].message!=="N/A"?(r(!0),o(S,{key:0},E(i.value.additional_response_details,(l,d)=>(r(),o("div",{key:"msg-"+d,class:v(l.sender==="Registrar"?"flex gap-3 flex-row-reverse animate-fade-in":"flex gap-3 animate-fade-in")},[t("div",wl,[l.sender==="Registrar"?(r(),o("div",kl,[...e[71]||(e[71]=[t("i",{class:"fa fa-user-tie"},null,-1)])])):(r(),o("div",Cl,f(i.value.firstname?.charAt(0))+f(i.value.lastname?.charAt(0)),1))]),t("div",{class:v(l.sender==="Registrar"?"flex-1 text-right":"flex-1")},[t("div",{class:v(l.sender==="Registrar"?"flex items-center gap-2 mb-1 justify-end":"flex items-center gap-2 mb-1")},[l.sender==="Registrar"?(r(),o("span",Al,"Registrar")):m("",!0),t("span",Ml,f(l.sender==="Registrar"?"You":i.value.firstname+" "+i.value.lastname),1),l.sender!=="Registrar"?(r(),o("span",Sl,"Applicant")):m("",!0)],2),t("div",{class:v(l.sender==="Registrar"?"bg-gradient-to-r from-green-500 to-green-600 rounded-2xl rounded-tr-none px-4 py-3 shadow-md inline-block text-left":"bg-white border border-blue-200 rounded-2xl rounded-tl-none px-4 py-3 shadow-sm")},[t("p",{class:v(l.sender==="Registrar"?"text-sm text-white":"text-sm text-gray-800")},f(l.message),3),t("p",{class:v(l.sender==="Registrar"?"text-xs text-white/70 mt-1":"text-xs text-gray-500 mt-1")},f(l.timestamp),3)],2)],2)],2))),128)):m("",!0),!Array.isArray(i.value.additional_response_details)||i.value.additional_response_details.length===0||i.value.additional_response_details[0].message==="N/A"?(r(),o("div",Tl,[...e[72]||(e[72]=[t("i",{class:"fa fa-comment-slash text-gray-300 text-4xl mb-3"},null,-1),t("p",{class:"text-sm text-gray-500"}," No messages yet ",-1)])])):m("",!0)]),t("div",jl,[e[75]||(e[75]=t("label",{class:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-2"},[t("i",{class:"fa fa-pencil text-green-600"}),x(" Send Follow-up Message ")],-1)),t("div",Dl,[k(t("textarea",{class:"w-full bg-gray-50 border-2 border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all resize-none",placeholder:"Type your follow-up remarks here...","onUpdate:modelValue":e[14]||(e[14]=l=>Y.value=l),rows:"3",onKeydown:e[15]||(e[15]=et(l=>Ye(i.value),["enter"]))},null,544),[[j,Y.value]]),e[73]||(e[73]=t("div",{class:"absolute bottom-3 right-3 text-xs text-gray-400"},[t("i",{class:"fa fa-keyboard-o mr-1"}),x(" Press Enter to send ")],-1))]),t("button",{onClick:e[16]||(e[16]=l=>Ye(i.value)),disabled:!Y.value.trim(),class:"mt-3 w-full flex items-center justify-center gap-2 px-4 py-2.5 font-semibold text-white bg-gradient-to-r from-green-600 to-green-700 rounded-lg shadow-md hover:shadow-lg hover:from-green-700 hover:to-green-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[...e[74]||(e[74]=[t("i",{class:"fa fa-paper-plane"},null,-1),t("span",null,"Send Message",-1)])],8,$l)])],2)])):m("",!0)]))),128))])):m("",!0),W.value?(r(),o("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-emerald-900/70 backdrop-blur-md",onClick:ie},[t("div",{class:"relative max-w-4xl max-h-[90vh] overflow-auto bg-white p-2 rounded-lg",onClick:e[18]||(e[18]=B(()=>{},["stop"]))},[t("button",{onClick:ie,class:"absolute top-2 right-2 text-gray-700 hover:text-red-500 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-md"},[...e[76]||(e[76]=[t("i",{class:"fa fa-close"},null,-1)])]),t("img",{src:Ue(Ve.value),class:"max-w-full max-h-[85vh] object-contain"},null,8,Pl)])])):m("",!0),M(z)?(r(),o("div",Il,[t("div",{class:v(["bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4 transform transition-transform duration-300",{"scale-100 opacity-100":M(z),"scale-95 opacity-0":!M(z)}])},[t("div",El,[e[77]||(e[77]=t("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4"},[t("i",{class:"fa fa-exclamation-triangle text-red-600 text-xl"})],-1)),e[78]||(e[78]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"}," Confirm Deletion ",-1)),t("p",Rl," Are you sure you want to delete "+f(w.value.length===1?"this record":"these "+w.value.length+" records")+"? This action cannot be undone. ",1)]),t("div",Ll,[t("button",{onClick:jt,class:"inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition-colors duration-200",disabled:te.value},[te.value?(r(),o("i",Ul)):m("",!0),x(" "+f(te.value?"Deleting...":"Delete"),1)],8,Vl),t("button",{onClick:Tt,class:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 transition-colors duration-200",disabled:te.value}," Cancel ",8,Yl)])],2)])):m("",!0)])),se.value.length>0?(r(),o("div",Nl,[t("button",{disabled:$.value===1,onClick:e[19]||(e[19]=a=>$.value--),class:"px-2 py-2 mx-1 bg-gray-200 rounded hover:bg-gray-500 hover:text-white"}," Prev ",8,Fl),(r(!0),o(S,null,E(Et.value,a=>(r(),o("button",{key:a,onClick:g=>$.value=a,class:v(["hover:bg-green-500 hover:text-white",{"px-4 py-2 mx-1 rounded":!0,"bg-green-800 text-white":$.value===a,"bg-gray-200":$.value!==a}])},f(a),11,ql))),128)),t("button",{disabled:$.value===Je.value,onClick:e[20]||(e[20]=a=>$.value++),class:"px-2 py-2 mx-1 bg-gray-200 rounded hover:bg-gray-500 hover:text-white"}," Next ",8,Bl)])):ge.value?m("",!0):(r(),o("div",Ol," No items found! "))])])],512),[[We,M(tt)]])])])])])]),t("div",zl,[Bt(n)])],64)}}},to=Ht(Hl,[["__scopeId","data-v-82d37905"]]);export{to as default};
