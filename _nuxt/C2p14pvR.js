import{r as L,l as D,e as W,y as $,c as a,a as r,F as j,g as A,o as d,M as H,n as x,i as h,m as U,A as O,z as P,p,t as q}from"#entry";import{_ as G}from"./DlAUqK2U.js";const J={class:"relative w-full h-screen p-4"},K=["onMousedown"],Q=["onUpdate:modelValue","onChange","disabled"],Z=["onChange","disabled"],ee=["onUpdate:modelValue","disabled","placeholder"],te=["onClick","disabled"],oe={class:"p-4 h-full w-full overflow-hidden"},le=["contenteditable","onInput"],ne=["src"],se=["src"],ie=["href"],ae=["onMousedown"],de=["onMousedown"],re=["onMousedown"],ue=["onMousedown"],f=80,m=60,ce={__name:"index",setup(pe){const n=L(!0),z=()=>{n.value=!0},B=()=>{n.value=!1},s=D([]),T=L([]);let I=0,c=null,k=!1,u=null,_=0,b=0,v=0,y=0,w=0,g=0;const R=()=>{s.push({id:I++,width:240,height:200,top:100+s.length*20,left:100+s.length*20,type:"text",content:"Sample Text",fileType:null,fileName:null})},V=o=>{s.splice(o,1)},Y=(o,t)=>{s[o].content=t.target.innerText},F=o=>{const t=s[o];t.type==="text"?t.content="Sample Text":(t.type==="image"||t.type,t.content=""),t.fileType=null},N=(o,t)=>{const e=t.target.files[0];if(!e)return;const l=URL.createObjectURL(e);s[o].content=l,s[o].fileName=e.name,e.type.startsWith("image")?s[o].fileType="image":e.type.startsWith("video")?s[o].fileType="video":s[o].fileType="other"},S=o=>o?o.includes("watch?v=")?`https://www.youtube.com/embed/${o.split("v=")[1].split("&")[0]}`:o.includes("youtu.be/")?`https://www.youtube.com/embed/${o.split("youtu.be/")[1]}`:o:"",X=(o,t)=>{n.value&&(k=!0,u=o,_=t.clientX,b=t.clientY,w=s[o].top,g=s[o].left)},M=(o,t,e)=>{if(!n.value)return;c=t,u=o;const l=T.value[o].getBoundingClientRect();_=e.clientX,b=e.clientY,v=l.width,y=l.height,w=s[o].top,g=s[o].left},C=o=>{if(k&&u!==null){const t=o.clientX-_,e=o.clientY-b;s[u].top=w+e,s[u].left=g+t}if(c&&u!==null){const t=o.clientX-_,e=o.clientY-b,l=s[u];c==="br"&&(l.width=Math.max(f,v+t),l.height=Math.max(m,y+e)),c==="bl"&&(l.width=Math.max(f,v-t),l.height=Math.max(m,y+e),l.width>f&&(l.left=g+t)),c==="tr"&&(l.width=Math.max(f,v+t),l.height=Math.max(m,y-e),l.height>m&&(l.top=w+e)),c==="tl"&&(l.width=Math.max(f,v-t),l.height=Math.max(m,y-e),l.width>f&&(l.left=g+t),l.height>m&&(l.top=w+e))}},E=()=>{k=!1,c=null,u=null};return W(()=>{window.addEventListener("mousemove",C),window.addEventListener("mouseup",E)}),$(()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",E)}),(o,t)=>(d(),a("div",J,[r("button",{class:"mb-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition",onClick:R}," Add Box "),r("button",{class:"ml-2 px-4 py-2 bg-green-600 text-white rounded",onClick:z}," Enable Edit Mode "),r("button",{class:"ml-2 px-4 py-2 bg-red-600 text-white rounded",onClick:B}," Disable Edit Mode "),(d(!0),a(j,null,A(s,(e,l)=>(d(),a("div",{key:e.id,ref_for:!0,ref_key:"boxesRefs",ref:T,class:x(["relative bg-white rounded-md transition-shadow duration-100",n.value?"cursor-move border-2 border-purple-600 shadow-lg":"cursor-default"]),style:H({width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",position:"absolute"}),onMousedown:i=>n.value?X(l,i):null},[r("div",{class:x(n.value?"border absolute top-1 right-1 bg-white p-1 rounded  shadow z-10 flex items-center gap-2":"")},[U(r("select",{"onUpdate:modelValue":i=>e.type=i,class:x(["text-sm rounded",n.value?"":"hidden"]),onChange:i=>F(l),disabled:!n.value},[...t[2]||(t[2]=[r("option",{value:"text"},"Text",-1),r("option",{value:"image"},"Image Link",-1),r("option",{value:"video"},"Video Link",-1),r("option",{value:"file"},"Upload File",-1)])],42,Q),[[O,e.type]]),e.type==="file"?(d(),a("input",{key:0,type:"file",class:"text-xs p-1 border rounded",onChange:i=>N(l,i),disabled:!n.value},null,40,Z)):e.type==="image"||e.type==="video"?U((d(),a("input",{key:1,"onUpdate:modelValue":i=>e.content=i,class:"",onClick:t[0]||(t[0]=p(()=>{},["stop"])),disabled:!n.value,placeholder:e.type==="image"?"Paste Image URL":"Paste YouTube Embed URL"},null,8,ee)),[[P,e.content]]):h("",!0),r("button",{onClick:p(i=>n.value?V(l):null,["stop"]),disabled:!n.value,class:x(n.value?"text-red-500 hover:text-red-700 lg:text-sm font-bold ml-1 border rounded text-xs p-1   w-fit":"hidden")}," Ã— ",10,te)],2),r("div",oe,[e.type==="text"?(d(),a("div",{key:0,class:x(["w-full h-full overflow-auto text-sm text-black break-words whitespace-pre-wrap text-left",n.value?"border border-gray-300 rounded p-2":""]),contenteditable:n.value,onInput:i=>n.value?Y(l,i):null,onMousedown:t[1]||(t[1]=p(()=>{},["stop"]))},null,42,le)):e.type==="image"||e.type==="file"&&e.fileType==="image"?(d(),a("img",{key:1,src:e.content,class:"max-w-full max-h-full object-contain"},null,8,ne)):e.type==="video"||e.type==="file"&&e.fileType==="video"?(d(),a("iframe",{key:2,src:S(e.content),class:"w-full h-full",frameborder:"0",allowfullscreen:""},null,8,se)):e.type==="file"&&e.fileType==="other"?(d(),a("a",{key:3,href:e.content,target:"_blank",class:"text-blue-600 underline p-4 bg-gray-50 rounded"}," Open File ("+q(e.fileName)+") ",9,ie)):h("",!0)]),n.value?(d(),a("div",{key:0,class:"resize-handle corner-handle",style:{top:"-6px",left:"-6px"},onMousedown:p(i=>M(l,"tl",i),["stop"])},null,40,ae)):h("",!0),n.value?(d(),a("div",{key:1,class:"resize-handle corner-handle",style:{top:"-6px",right:"-6px"},onMousedown:p(i=>M(l,"tr",i),["stop"])},null,40,de)):h("",!0),n.value?(d(),a("div",{key:2,class:"resize-handle corner-handle",style:{bottom:"-6px",left:"-6px"},onMousedown:p(i=>M(l,"bl",i),["stop"])},null,40,re)):h("",!0),n.value?(d(),a("div",{key:3,class:"resize-handle corner-handle",style:{bottom:"-6px",right:"-6px"},onMousedown:p(i=>M(l,"br",i),["stop"])},null,40,ue)):h("",!0)],46,K))),128))]))}},me=G(ce,[["__scopeId","data-v-41f39dee"]]);export{me as default};
