import{o as d,c as u,a as e,d as g,m as X,u as Z,r as c,q as ee,v as h,x as k,n as p,t as r,y as A,z as f,b as B,F as $,D as S,E as P,B as te,C as se}from"./IwTky3Mg.js";import{_ as ae}from"./DSdVwntb.js";import"./C5S46NFB.js";import{_ as le}from"./5JjjnmY2.js";import{_ as oe}from"./DlAUqK2U.js";const ne={class:""},ie={class:"mx-auto mt-10 mb-5 grid grid-cols-1"},re={__name:"CampusPassMenuBar",props:["goToList","goToCreate"],setup(C){return(x,o)=>(d(),u("div",ne,[o[3]||(o[3]=e("div",{class:"w-fit mx-auto mt-5 mb-3"},[e("img",{src:"https://raw.githubusercontent.com/jorenlee/lsu-public-images/main/images/images/logos/LSU_Seal.PNG",class:"lg:w-24 w-20 mx-auto"})],-1)),o[4]||(o[4]=e("div",{class:"text-center"},[e("h1",{class:"font-bold text-green-800 text-2xl"},"Dashboard")],-1)),e("div",ie,[e("button",{onClick:o[0]||(o[0]=(...n)=>C.goToList&&C.goToList(...n)),class:"text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white"},o[1]||(o[1]=[e("i",{class:"fa fa-list mr-3","aria-hidden":"true"},null,-1),g(" All Request Lists ")])),o[2]||(o[2]=e("a",{href:"/",class:"text-xs mx-auto mb-2 w-full uppercase whitespace-nowrap px-5 py-1 font-bold text-left text-green-900 hover:bg-green-900 hover:text-white"},[e("i",{class:"fa fa-globe mr-3","aria-hidden":"true"}),g(" LSU HOME PAGE ")],-1))])]))}},de={class:"flex"},ue={class:"pb-24 lg:w-3/12 bg-gray-100 z-10 w-11/12 lg:block lg:static absolute h-full"},ce={class:"flex items-center justify-center text-white bg-green-900 lg:py-[16px] py-[8px]"},pe={class:"flex items-center w-full px-2"},ve={class:"text-sm"},me={class:"w-full min-h-screen"},fe={class:"bg-green-800"},ge={class:"flex mx-auto justify-between py-2 px-3.5"},he={class:"w-full lg:p-5 py-2"},xe={class:"relative"},_e={class:"appointment-lists mx-auto text-xs"},be={class:""},ye={key:0,class:"px-2 lg:grid grid-cols-3 gap-x-10"},we={class:"w-full border-4 border-gray-100 shadow"},ke={class:"flex items-center justify-center border-b relative"},Ce=["onClick"],Te={class:"flex gap-x-3 absolute left-3"},$e=["href"],Se=["href"],Le={class:"flex px-2 font-bold justify-center absolute right-0"},De={class:"mx-auto lg:flex justify-center text-white items-center"},je=["onClick"],Ne={class:"text-left px-2"},Ae={class:"w-full px-2 py-0.5 border-b"},Be={class:""},Pe={class:"px-2 py-0.5 border-b"},Ue={class:"px-2 py-0.5"},Me={class:"flex items-center justify-center border-t-4 uppercase"},Re={class:"flex gap-x-0.5"},Ie={class:"border-y font-bold py-1 px-2 flex items-center justify-center"},Ve={class:""},ze={class:"flex items-center my-2"},Ee=["onUpdate:modelValue","onChange"],Ge=["onClick"],Oe={class:"flex items-center justify-center"},qe={class:"w-fit mx-auto py-1 flex items-center gap-3"},Fe={class:"flex items-center gap-x-2 w-full"},He=["onUpdate:modelValue","onChange"],We={class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#ffffff59] w-full h-screen flex items-center"},Ye={class:"px-5 rounded-lg bg-white shadow-2xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},Je={key:0,class:"italic text-gray-400 text-center p-1"},Ke={key:0,class:"absolute top-0 w-full z-10 bg-white h-full"},Qe={class:"border-4 border-gray-100 shadow-lg"},Xe={class:"flex items-center"},Ze={class:"lg:flex lg:gap-x-3 lg:text-sm text-xs"},et={__name:"index",setup(C){const x=X(),o=Z(),n=c(o.mainDevServer),m=c(0);let L=c(),D=c(),U=c(!0),i=c(!0),_=c(!1);const w=c(!1),a=c(null),b=c(!1),j=c([]);ee(()=>{setTimeout(async()=>{o.user.isAuthenticated&&(o.user.email==="jorenleeluna24@gmail.com"||o.user.email==="esmael.larubis@lsu.edu.ph")?(m.value=await $fetch(n.value+"/api/campus-pass/list").catch(l=>l.data)||0,x.push("/_/panels/campus-security"),console.log(m.value)):x.push("/_/unauthorized")},5e3)});const M=async(l,t)=>{a.value=await $fetch(n.value+"/api/campus-pass/"+l+"/").catch(y=>y.data),a.value.approval_status=t,console.log(a.value),G(l)},R=async(l,t)=>{a.value=await $fetch(n.value+"/api/campus-pass/"+l+"/").catch(y=>y.data),a.value.remarks=t,console.log(a.value)},I=l=>{w.value=!0,D.value=l},V=()=>{E(),w.value=!1},z=l=>{m.value.filter(function(t){l===t.id&&(console.log(t),j.value=t.name_list,b.value=!b.value)})},E=async()=>{await $fetch(n.value+"/api/campus-pass/"+D.value+"/edit/",{method:"PUT",body:a.value}).then(l=>{console.log("response",l),console.log(a.value)})},G=async l=>{await $fetch(n.value+"/api/campus-pass/"+l+"/edit/",{method:"PUT",body:a.value}).then(t=>{console.log("response",t),console.log(a.value),a.value.approval_status==="approved"&&O(),a.value.approval_status==="declined"&&q(),a.value.approval_status==="for revision"&&F()})},O=async()=>{await $fetch(n.value+"/api/campus-pass/to-gmail-approved/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks}}).then(l=>{console.log(l)})},q=async()=>{await $fetch(n.value+"/api/campus-pass/to-gmail-declined/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks}}).then(l=>{console.log(l)})},F=async()=>{await $fetch(n.value+"/api/campus-pass/to-gmail-for-revision/",{method:"POST",headers:{"Content-Type":"application/json"},body:{incharge_firstname:a.value.incharge_firstname,incharge_contact_email:a.value.incharge_contact_email,schedule:a.value.schedule,approval_status:a.value.approval_status,remarks:a.value.remarks}}).then(l=>{console.log(l)})},H=async()=>{w.value=!1,m.value=await $fetch(n.value+"/api/campus-pass/list").catch(l=>l.data)||0},N=l=>{_.value=!_.value,L.value=l},W=async()=>{await $fetch(n.value+"/api/campus-pass/"+L.value+"/delete/",{method:"DELETE",headers:{Authorization:o.user.token,"Content-Type":"application/json"}}).then(async l=>{console.log("response",l),m.value=await $fetch(n.value+"/api/campus-pass/list").catch(t=>t.data)||0,_.value=!_.value})},Y=()=>{o.removeToken(),x.push("/_/campus-pass-admin")},J=()=>{x.push("/_/panels/campus-security")};return(l,t)=>{const y=re,K=ae;return d(),u("div",null,[e("div",de,[h(e("div",ue,[e("div",ce,[e("div",pe,[t[3]||(t[3]=e("i",{class:"fa fa-user mx-2","aria-hidden":"true"},null,-1)),e("h1",ve,r(p(o).user.email),1)]),e("div",{onClick:t[0]||(t[0]=s=>A(i)?i.value=!p(i):i=!p(i)),class:"w-10 px-1.5 lg:hidden flex"},[e("i",{class:f(["fa text-3xl text-white",p(i)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)])]),B(y,{goToList:J})],512),[[k,p(i)]]),e("div",me,[e("div",fe,[e("div",ge,[e("div",{onClick:t[1]||(t[1]=s=>A(i)?i.value=!p(i):i=!p(i)),class:"w-10 px-1.5"},[e("i",{class:f(["fa text-3xl text-white",p(i)?"fa-caret-left":"fa-bars"]),"aria-hidden":"true"},null,2)]),e("button",{onClick:Y,class:"flex hover:font-bold pt-1"},t[4]||(t[4]=[e("i",{class:"fa fa-sign-out text-white text-xl"},null,-1),e("h1",{class:"text-xs text-white p-1.5"},"Log Out",-1)]))])]),e("div",null,[e("div",he,[h(e("div",null,[e("div",xe,[e("div",_e,[e("div",be,[m.value.length>0?(d(),u("div",ye,[(d(!0),u($,null,S(p(le).orderBy(m.value,"id","asc"),(s,T)=>(d(),u("div",{class:"justify-evenly text-center items-center h-auto mb-5",key:T},[e("div",we,[e("div",ke,[e("div",{class:f(["font-bold uppercase w-full",s.attendees==="Group"?"py-[7px] cursor-pointer":"py-[14px]"]),onClick:v=>z(s.id)},[g(r(s.attendees)+" ",1),e("span",{class:f(s.attendees==="Group"?"text-green-800":"hidden")},t[5]||(t[5]=[e("i",{class:"fa fa-caret-down text-lg mt-0.5 ml-2"},null,-1)]),2)],10,Ce),e("div",Te,[e("a",{href:s.approved_activities_link,target:"_blank",class:f(["font-bold w-full block text-green-800",s.approved_activities_link==="-"?"hidden":""])},t[6]||(t[6]=[e("i",{class:"fa fa-file-pdf text-lg"},null,-1)]),10,$e),e("a",{href:s.approved_gso_docs_link,target:"_blank",class:f(["font-bold w-full block text-green-800",s.approved_gso_docs_link==="-"?"hidden":""])},t[7]||(t[7]=[e("i",{class:"fa fa-soccer-ball text-lg"},null,-1)]),10,Se)]),e("div",Le,[e("div",De,[e("button",{onClick:v=>N(s.id),class:"text-red-500 hover:text-white hover:bg-red-500 bg-white border border-red-500 px-1.5 py-0.5 rounded-md"},t[8]||(t[8]=[e("i",{class:"fa fa-close rounded-lg uppercase","aria-hidden":"true"},null,-1)]),8,je)])])]),e("div",Ne,[e("div",Ae,[e("span",Be,[t[9]||(t[9]=e("i",{class:"fa fa-user mr-2"},null,-1)),g(" "+r(s.incharge_firstname),1)]),e("span",{class:f({hidden:s.incharge_middlename==="-",hidden:s.incharge_middlename==="n/a",hidden:s.incharge_middlename==="N/A",hidden:s.incharge_middlename===""})},r(s.incharge_middlename),3),e("span",null,r(s.incharge_lastname),1)]),e("div",Pe,[t[10]||(t[10]=e("i",{class:"fa fa-envelope mr-2"},null,-1)),g(" "+r(s.incharge_contact_email),1)]),e("div",Ue,[t[11]||(t[11]=e("i",{class:"fa fa-phone mr-2"},null,-1)),g(" "+r(s.incharge_contact_number),1)])]),e("div",Me,[e("ul",Re,[(d(!0),u($,null,S(s.type_of_access,(v,Q)=>(d(),u("li",{key:Q,class:"shadow px-2 py-0.5 text-[10px] tracking-tighter"},r(v),1))),128))])]),e("div",Ie,[t[12]||(t[12]=e("i",{class:"fa fa-calendar mr-2"},null,-1)),g(" "+r(s.schedule),1)]),e("div",Ve,[e("div",ze,[t[14]||(t[14]=e("label",{for:"remarks",class:"px-2 font-bold text-gray-800"},"Remarks:",-1)),h(e("input",{type:"text",class:"border w-full mx-auto py-1 px-1 shadow-sm","onUpdate:modelValue":v=>s.remarks=v,onChange:v=>R(s.id,s.remarks)},null,40,Ee),[[te,s.remarks]]),e("button",{onClick:v=>I(s.id),class:"flex text-green-500 hover:text-white hover:bg-green-500 bg-white border border-green-500 px-1 py-1.5 mr-2"},t[13]||(t[13]=[e("i",{class:"fa fa-check rounded-lg uppercase","aria-hidden":"true"},null,-1)]),8,Ge)])]),e("div",Oe,[e("div",{class:f(["flex w-full gap-5",{"bg-red-700":s.approval_status==="declined","bg-yellow-500":s.approval_status==="pending","bg-orange-500":s.approval_status==="for revision","bg-green-900":s.approval_status==="approved"}])},[e("div",qe,[e("div",Fe,[t[16]||(t[16]=e("label",{class:"font-bold block text-white"},"Status:",-1)),h(e("select",{"onUpdate:modelValue":v=>s.approval_status=v,name:"borrower_category",class:"shadow block font-bold rounded-md w-fit border px-1 pb-0.5 border-[#e5e7eb] capitalize",required:"",onChange:v=>M(s.id,s.approval_status)},t[15]||(t[15]=[e("option",{value:"approved"},"approved",-1),e("option",{value:"declined"},"declined",-1),e("option",{value:"pending"},"pending",-1),e("option",{value:"for revision"},"for revision",-1)]),40,He),[[se,s.approval_status]])])])],2)])])]))),128)),h(e("div",We,[e("div",{class:"w-fit mx-auto flex items-center shadow-2xl border-2 rounded-lg py-2 bg-white"},[e("div",{class:"flex items-center"},[t[17]||(t[17]=e("div",{class:"font-bold pl-5 pr-10"},"Confirm Remarks: ",-1)),e("div",{class:"flex gap-10 mr-10"},[e("span",{class:"px-3 uppercase py-1 rounded-lg bg-green-900 border hover:border-green-900 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:V},"yes"),e("span",{class:"px-3 uppercase py-1 rounded-lg bg-red-700 border hover:border-red-700 hover:bg-white hover:text-green-900 text-white font-bold cursor-pointer",onClick:H},"no")])])])],512),[[k,w.value]]),h(e("div",Ye,[t[18]||(t[18]=e("div",{class:"my-6"},"Are you sure you want to Delete?",-1)),e("div",{class:"flex gap-5 mx-auto w-fit my-5"},[e("span",{class:"bg-green-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:W},"Yes"),e("span",{class:"bg-red-900 text-white px-3 py-1 rounded-lg cursor-pointer",onClick:N},"Cancel")])],512),[[k,p(_)]])])):P("",!0)]),m.value.length===0?(d(),u("div",Je," No Results Found! ")):(d(),u("div",{key:1,class:f(["italic text-gray-400 text-center p-1",m.value.length>0?"hidden":""])}," Please Wait ... ",2))]),b.value?(d(),u("div",Ke,[e("div",Qe,[e("div",Xe,[t[20]||(t[20]=e("div",{class:"text-center border-b py-2 font-bold w-full"}," List of Names ",-1)),e("div",{onClick:t[2]||(t[2]=s=>b.value=!b.value),class:"bg-gray-600 hover:bg-white hover:text-gray-600 border-b border-l text-white px-2 py-[8px]"},t[19]||(t[19]=[e("i",{class:"fa fa-close","aria-hidden":"true"},null,-1)]))]),e("div",Ze,[(d(!0),u($,null,S(j.value,(s,T)=>(d(),u("div",{key:T,class:"text-left lg:px-10 px-2 py-1 bg-gray-100 mb-0.5"},[e("div",null,r(s.lastname)+", "+r(s.firstname)+" "+r(s.middlename),1),e("div",null,r(s.email),1)]))),128))])])])):P("",!0)])],512),[[k,p(U)]])])])])]),B(K)])}}},nt=oe(et,[["__scopeId","data-v-42894728"]]);export{nt as default};
